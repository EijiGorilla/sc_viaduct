{"version":3,"file":"static/js/2843.89f7cc47.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/floorFilterUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingSourceInfo.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction o(o){const n=o.layer;if(\"floorInfo\"in n&&n.floorInfo?.floorField&&\"floors\"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return\"floorInfo\"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{o as getFloorFilterClause,n as getLayerFloorFilterClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import has from\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{watch as i,syncAndInitial as l}from\"../../../core/reactiveUtils.js\";import{sqlAnd as s}from\"../../../core/sql.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../layers/support/FeatureFilter.js\";import{getFloorFilterClause as u}from\"../../../layers/support/floorFilterUtils.js\";import{isSubtypeGroupLayer as p,isFeatureLayer as d}from\"../../../layers/support/layerUtils.js\";import{isUtilityNetworkWebMap as c}from\"./snappingUtils.js\";import{scaleBoundsPredicate as y}from\"../../support/layerViewUtils.js\";let f=class extends t{set attributeRulesEnabled(e){this._set(\"attributeRulesEnabled\",e),e&&this.loadRules()}get layerView(){return this.view?.allLayerViews?.find((e=>e.layer===this.layer))}get valid(){const{_valid:e,snappingSource:t,layer:r}=this;return!(!t||!r)&&e}get subtypeFilter(){const{layer:e,snappingSource:t}=this;if(!p(e)||!e.subtypes?.length||!t)return{mode:\"not-in-use\",filter:null};const r=t.layerSource.sublayerSources.filter((e=>e.enabled&&e.layer.visible&&y(this.view?.scale,e.layer.effectiveScaleRange.minScale,e.layer.effectiveScaleRange.maxScale))).map((e=>e.layer.subtypeCode));if(!r.length)return{mode:\"none-visible\",filter:null};if(r.length===e.subtypes.length)return{mode:\"all-visible\",filter:null};const i=e.fieldsIndex.get(e.subtypeField)?.name??e.subtypeField;return 1===r.length?{mode:\"in-use\",filter:`${i} = ${r.getItemAt(0)}`}:{mode:\"in-use\",filter:`${i} IN (${r.join(\", \")})`}}get floorFilter(){const{view:e,layer:t}=this;return e&&t?u({view:e,layer:t}):null}constructor(e){super(e),this.layer=null,this.snappingSource=null,this.rulesTable=null,this._valid=null}initialize(){if(!this.snappingSource||!this.layer)return void(this._valid=!1);const{layer:e,snappingSource:t}=this;if(\"refresh\"in e){const r=e;this.addHandles(r.on(\"refresh\",(()=>t.refresh())))}this.loadRules(),this.addHandles([i((()=>t.updating),(e=>t.layerSource.updating=e),l),i((()=>t.availability),(e=>t.layerSource.availability=e),l)])}getFetchCandidatesParameters(e,t,r){if(!this.valid)return[];const{layer:i,layerView:l,floorFilter:o,rulesTable:a,subtypeFilter:u}=this,y={distance:r,mode:this.view?.type??\"2d\",point:e,coordinateHelper:t.coordinateHelper,...h(),filter:l&&\"filter\"in l?l.filter:null};if(o&&(y.filter=m(y.filter,o)),\"not-in-use\"!==u.mode&&\"all-visible\"!==u.mode){if(\"none-visible\"===u.mode)return[];y.filter?y.filter.where=s(y.filter.where,u.mode):y.filter=new n({where:u.filter})}if(!this.attributeRulesEnabled)return[y];const f=t.feature,v=\"subtype-sublayer\"===f?.sourceLayer?.type?f.sourceLayer.parent:f?.sourceLayer;if(a&&f&&c(this.view?.map)&&(d(i)||p(i))&&i.layerId&&(d(v)||p(v))&&this.view.map.utilityNetworks?.find((e=>e.isUtilityLayer(v)))){if(\"loaded\"!==a.loadStatus)return[];const e=[],t=i.layerId,r=a.getFeatureSQL(v,f)?.[t];if(!r)return[];const l=r.anyVertex;let s=r.endVertex;return s&&l&&s===l&&(s=\"\"),s&&e.push({...y,returnEdge:!1,vertexMode:\"ends\",filter:m(y.filter,s)}),l&&e.push({...y,returnEdge:has(\"snapping-include-edges-when-applying-any-vertex-rule\")??!1,vertexMode:\"all\",filter:m(y.filter,l)}),e}return[y]}async loadRules(){this._valid=null;const{layer:e,view:t,attributeRulesEnabled:i}=this;if(i&&e&&t&&c(t?.map)&&(d(e)||p(e)))try{await Promise.allSettled(t.map.utilityNetworks?.map((e=>e.load()))??[]);const r=t.map.utilityNetworks?.find((t=>t.isUtilityLayer(e)));r&&(this.rulesTable=await r.getRulesTable(),await(this.rulesTable?.load()))}catch(l){return this._valid=!1,void r.getLogger(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\").error(\"Failed to load rules table for snapping source\",e.title)}this._valid=!0}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};function h(){return{returnEdge:!0,vertexMode:\"all\"}}function m(e,t){return null==e?new n({where:t}):e.where?new n({where:s(e.where,t)}):new n({where:t})}e([o({constructOnly:!0})],f.prototype,\"layer\",void 0),e([o({constructOnly:!0})],f.prototype,\"snappingSource\",void 0),e([o({constructOnly:!0})],f.prototype,\"view\",void 0),e([o({value:!1})],f.prototype,\"attributeRulesEnabled\",null),e([o()],f.prototype,\"layerView\",null),e([o()],f.prototype,\"rulesTable\",void 0),e([o()],f.prototype,\"valid\",null),e([o()],f.prototype,\"subtypeFilter\",null),e([o()],f.prototype,\"floorFilter\",null),e([o()],f.prototype,\"_valid\",void 0),f=e([a(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\")],f);export{f as FeatureSnappingSourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import{destroyHandle as a}from\"../../../core/handleUtils.js\";import\"../../../core/has.js\";import{allSettledValues as n,throwIfAborted as s}from\"../../../core/promiseUtils.js\";import{mapCollectionAsync as i,watch as o,sync as c}from\"../../../core/reactiveUtils.js\";import{getMetersPerUnitForSR as u,getMetersPerVerticalUnitForSR as l}from\"../../../core/unitUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{squaredDistance as m}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{s as g,c as h}from\"../../../chunks/vec32.js\";import{create as S}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getEpsilon as f}from\"../../../core/libs/gl-matrix-2/math/common.js\";import{UpdatingHandles as y}from\"../../../core/support/UpdatingHandles.js\";import{absoluteHeightElevationInfo as _}from\"../../../support/elevationInfoUtils.js\";import{VerticalHalfPlaneConstraint as v}from\"../sketch/constraints.js\";import{fromAnyMapPoint as w,markAsTarget as j,asVec2 as F}from\"../sketch/normalizedPoint.js\";import{FeatureSnappingSourceInfo as b}from\"./FeatureSnappingSourceInfo.js\";import{SnappingDomain as x}from\"./SnappingDomain.js\";import{sortCandidatesInPlace as C,screenDistance as R}from\"./snappingUtils.js\";import{DrapedEdgeSnappingCandidate as E}from\"./candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as M}from\"./candidates/EdgeSnappingCandidate.js\";import{FeatureSnappingCandidate as L}from\"./candidates/FeatureSnappingCandidate.js\";import{RightAngleSnappingCandidate as I,OtherVertexType as G}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as H}from\"../support/viewUtils.js\";let P=class extends t{get updating(){return this._snappingSources.some((e=>null==e?.valid||!0===e.valid&&!0===e.snappingSource?.updating))||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=x.FEATURE,this._updatingHandles=new y,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=i((()=>this.options?._effectiveFeatureSources),((e,t)=>this._createSourceInfo(e,t)));this._snappingSources=e,this.addHandles([a(e),o((()=>({rulesEnabled:!!this.options?.attributeRulesEnabled,sources:this._snappingSources.filter(r)})),(({rulesEnabled:e,sources:t})=>{for(const r of t)r.attributeRulesEnabled=e}),c)])}destroy(){this._set(\"options\",null),this._updatingHandles.destroy()}async fetchCandidates(e,t,r,a){if(!(t&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const i=[],o=this._computeScreenSizeDistanceParameters(e,r);for(const n of this._snappingSources){if(!n?.valid||!n.snappingSource?.layerSource?.enabled||n.layerView?.suspended)continue;const t=n.getFetchCandidatesParameters(e,r,o);for(const e of t)i.push(n.snappingSource.fetchCandidates(e,a).then((e=>e.filter((e=>!this._candidateIsExcluded(n.snappingSource,e,r.excludeFeature))))))}const c=(await n(i)).flat();return this._addRightAngleCandidates(c,e,o,r),s(a),C(e,c),c}_addRightAngleCandidates(e,t,r,a){const n=null!=a.vertexHandle?a.vertexHandle.rightEdge?.rightVertex?.pos:null!=a.editGeometryOperations&&\"polygon\"===a.editGeometryOperations.data.type?a.editGeometryOperations.data.components[0]?.getFirstVertex()?.pos:null,s=null!=a.vertexHandle?a.vertexHandle.leftEdge?.leftVertex?.pos:null!=a.editGeometryOperations?a.editGeometryOperations.data.components[0]?.getLastVertex()?.pos:null,{view:i}=this,o=w(n,i,a),c=w(s,i,a),u=e.length;for(let l=0;l<u;l++)this._addRightAngleCandidate(e[l],c,t,r,e),this._addRightAngleCandidate(e[l],o,t,r,e)}_addRightAngleCandidate(e,t,r,a,n){if(null==t||!A(e))return;const s=e.constraint.closestTo(t),i=(s[0]-r[0])/a.x,o=(s[1]-r[1])/a.y,{start:c,end:u}=e.constraint;if(i*i+o*o<=1){const r=m(F(s),F(c))>m(F(s),F(u))?c:u,a=new I({targetPoint:j(s),otherVertex:t,otherVertexType:G.NEXT,previousVertex:r,constraint:new v(t,s),objectId:e.objectId,isDraped:e.isDraped,domain:x.FEATURE});n.push(a)}}_computeScreenSizeDistanceParameters(e,t){let r=null!=this.options?this.options.distance*(\"touch\"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:r,y:r,z:r,distance:r}:\"2d\"===this.view.type?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,r,a){const{spatialReference:n}=a;r.renderCoordsHelper.toRenderCoords(e,n,D);const s=r.state.camera.computeScreenPixelSizeAt(D),i=s*r.renderCoordsHelper.unitInMeters,o=i/u(n),c=i/l(n),p=t*o,d=t*c,m=H(e,n,_,r),g=m?z(m,e,o,0,0,r,a):0,h=m?z(m,e,0,o,0,r,a):0,S=m?z(m,e,0,0,c,r,a):0;return{x:0===g?0:p/g,y:0===h?0:p/h,z:0===S?0:d/S,distance:s*t}}_candidateIsExcluded(e,t,r){if(null==r)return!1;const a=this._getCandidateObjectId(t);if(null==a)return!1;const n=e.layerSource.layer;return\"graphics\"===n.type?r.uid===a:r.sourceLayer===n&&(!(!r.attributes||!(\"objectIdField\"in n))&&r.attributes[n.objectIdField]===a)}_getCandidateObjectId(e){return e instanceof L?e.objectId:null}async _createSourceInfo(e,t){const r=e.layer;r.loaded||(await r.load(),s(t));const{view:a}=this,n=await this._createFeatureSnappingSourceType(e);return s(t),new b(null==n?{}:{snappingSource:n,view:a,layer:r})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case\"feature\":case\"geojson\":case\"csv\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return this._createFeatureSnappingSourceFeatureLayer(e);case\"graphics\":return this._createFeatureSnappingSourceGraphicsLayer(e);case\"map-notes\":return this._createFeatureSnappingSourceMapNotesLayer(e);case\"scene\":case\"building-scene\":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(null==t||\"3d\"!==t.type)return null;return new((await this._getSourceModule(\"scene\")).SceneLayerSnappingSource)({layerSource:e,view:t})}async _createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case\"feature-layer\":case\"oriented-imagery\":return new((await this._getSourceModule(\"featureService\")).FeatureServiceSnappingSource)({spatialReference:this.spatialReference,view:this.view,layerSource:e});case\"memory\":case\"csv\":case\"geojson\":case\"wfs\":if(\"mesh\"===e.layer.geometryType)return null;return new((await this._getSourceModule(\"featureCollection\")).FeatureCollectionSnappingSource)({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new((await this._getSourceModule(\"graphics\")).GraphicsSnappingSource)({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new((await this._getSourceModule(\"notes\")).GraphicsSnappingSource)({getGraphicsLayers:()=>e.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const t=this._sourceModules[e];if(null==t.loader){const t=this._loadSourceModule(e),r={module:null,loader:t};this._sourceModules[e]=r;const a=await t,n={module:a,loader:t};return this._sourceModules[e]=n,a}return null==t.module?t.loader:t.module}_loadSourceModule(e){const t=this._updatingHandles;switch(e){case\"featureService\":return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));case\"featureCollection\":return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));case\"graphics\":case\"notes\":return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));case\"scene\":return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"))}}get test(){}};function A(e){return(e instanceof M||e instanceof E)&&!U(e)}function U({constraint:{start:e,end:t}}){const r=g(e,t),a=m(F(e),F(t));return r<f()||a/r<T}function z(e,t,r,a,n,s,{spatialReference:i}){const o=h(O,t);o[0]+=r,o[1]+=a,o[2]+=n;const c=H(o,i,_,s);return c?R(c,e):1/0}e([p({constructOnly:!0})],P.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],P.prototype,\"view\",void 0),e([p()],P.prototype,\"options\",void 0),e([p({readOnly:!0})],P.prototype,\"updating\",null),e([p()],P.prototype,\"_snappingSources\",void 0),P=e([d(\"esri.views.interactive.snapping.FeatureSnappingEngine\")],P);const D=S(),O=S(),T=1e-4;export{P as FeatureSnappingEngine};\n"],"names":["o","_n$floorInfo","n","layer","floorInfo","floorField","view","l","floors","_n$floorInfo2","length","filter","map","concat","push","join","f","t","attributeRulesEnabled","e","this","_set","loadRules","layerView","_this$view","allLayerViews","find","valid","_valid","snappingSource","r","subtypeFilter","_e$subtypes","_e$fieldsIndex$get$na","_e$fieldsIndex$get","p","subtypes","mode","layerSource","sublayerSources","_this$view2","enabled","visible","y","scale","effectiveScaleRange","minScale","maxScale","subtypeCode","i","fieldsIndex","get","subtypeField","name","getItemAt","floorFilter","u","constructor","super","rulesTable","initialize","addHandles","on","refresh","updating","availability","getFetchCandidatesParameters","_this$view$type","_this$view3","_f$sourceLayer","_this$view4","_this$view$map$utilit","a","_objectSpread","distance","type","point","coordinateHelper","returnEdge","vertexMode","m","where","s","feature","v","sourceLayer","parent","c","d","layerId","utilityNetworks","isUtilityLayer","_a$getFeatureSQL","_has","loadStatus","getFeatureSQL","anyVertex","endVertex","has","_t$map$utilityNetwork","_t$map$utilityNetwork2","_t$map$utilityNetwork3","_this$rulesTable","Promise","allSettled","load","getRulesTable","getLogger","error","title","remove","destroy","_this$snappingSource","constructOnly","prototype","value","P","_snappingSources","some","_e$snappingSource","_updatingHandles","options","_domain","x","FEATURE","_sourceModules","featureService","module","loader","featureCollection","graphics","notes","scene","_this$options","_effectiveFeatureSources","_createSourceInfo","_this$options2","rulesEnabled","sources","_ref","fetchCandidates","effectiveFeatureEnabled","_computeScreenSizeDistanceParameters","_n$snappingSource","_n$layerView","suspended","then","_candidateIsExcluded","excludeFeature","flat","_addRightAngleCandidates","C","_a$vertexHandle$right","_a$editGeometryOperat","_a$vertexHandle$leftE","_a$editGeometryOperat2","vertexHandle","rightEdge","rightVertex","pos","editGeometryOperations","data","components","getFirstVertex","leftEdge","leftVertex","getLastVertex","w","_addRightAngleCandidate","M","E","_ref2","constraint","start","end","g","F","T","U","A","closestTo","I","targetPoint","j","otherVertex","otherVertexType","G","NEXT","previousVertex","objectId","isDraped","domain","pointer","touchSensitivityMultiplier","z","resolution","_computeScreenSizeDistanceParameters3D","spatialReference","renderCoordsHelper","toRenderCoords","D","state","camera","computeScreenPixelSizeAt","unitInMeters","H","_","h","S","_getCandidateObjectId","uid","attributes","objectIdField","L","loaded","_createFeatureSnappingSourceType","b","_createFeatureSnappingSourceFeatureLayer","_createFeatureSnappingSourceGraphicsLayer","_createFeatureSnappingSourceMapNotesLayer","_createFeatureSnappingSourceSceneLayer","_getSourceModule","SceneLayerSnappingSource","_e$layer$source","source","FeatureServiceSnappingSource","geometryType","FeatureCollectionSnappingSource","GraphicsSnappingSource","getGraphicsLayers","_e$layer$sublayers$to","_e$layer$sublayers","sublayers","toArray","_loadSourceModule","addPromise","test","_ref3","O","R","readOnly"],"sourceRoot":""}