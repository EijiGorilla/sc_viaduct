"use strict";(self.webpackChunksc_viaduct=self.webpackChunksc_viaduct||[]).push([[4407],{29201:(e,t,n)=>{n.d(t,{I:()=>m,b:()=>E});var i,r,s=n(57528),o=n(34981),a=n(26917),l=n(59395),c=n(90080),u=n(94192),d=n(80883),h=n(3799),p=n(21390),f=n(64839),v=n(32307),g=n(70367),y=n(66470),_=n(91911);function E(e){const t=new v.N5,{vertex:n,fragment:E}=t;return(0,h.NB)(n,e),t.include(l.d,e),t.include(u.Z,e),t.include(a.HQ,e),t.include(c.g,e),t.include(_.z,e),t.attributes.add(y.r.POSITION,"vec3"),t.attributes.add(y.r.UV0,"vec2"),e.perspectiveInterpolation&&t.attributes.add(y.r.PERSPECTIVEDIVIDE,"float"),t.varyings.add("vpos","vec3"),e.terrainDepthTest&&t.varyings.add("depth","float"),n.main.add((0,f.H)(i||(i=(0,s.A)(["\n    vpos = position;\n    ","\n    vTexCoord = uv0;\n    gl_Position = transformPosition(proj, view, vpos);\n    ",""])),e.terrainDepthTest?"depth = (view * vec4(vpos, 1.0)).z;":"",e.perspectiveInterpolation?"gl_Position *= perspectiveDivide;":"")),E.uniforms.add(new g.N("tex",(e=>e.texture)),new p.m("opacity",(e=>e.opacity))),t.varyings.add("vTexCoord","vec2"),E.include(d.a),E.main.add((0,f.H)(r||(r=(0,s.A)(["\n    discardBySlice(vpos);\n    ","\n    ","\n    vec4 finalColor = texture(tex, vTexCoord) * opacity;\n    outputColorHighlightOID(finalColor, vpos);"])),e.terrainDepthTest?"terrainDepthTest(depth);":"",e.output===o.V.ObjectAndLayerIdColor?"fragColor = vec4(0, 0, 0, 1);\n           return;":"")),t}const m=Object.freeze(Object.defineProperty({__proto__:null,build:E},Symbol.toStringTag,{value:"Module"}))},86401:(e,t,n)=>{n.d(t,{Ci:()=>s,Dq:()=>l,dB:()=>a,zK:()=>o});var i=n(48549),r=n(66470);const s=(0,i.BP)().vec3f(r.r.POSITION),o=(0,i.BP)().vec3f(r.r.POSITION).vec2f(r.r.UV0),a=(0,i.BP)().vec3f(r.r.POSITION).vec4u8(r.r.COLOR),l=(0,i.BP)().vec3f(r.r.POSITION).vec2f(r.r.UV0).vec4u8(r.r.OBJECTANDLAYERIDCOLOR)},30416:(e,t,n)=>{n.d(t,{r:()=>R});var i=n(8),r=n(88105),s=n(34981),o=n(83490),a=n(75803),l=n(45463),c=n(60322),u=n(77730),d=n(86994),h=n(66470),p=n(82809),f=n(86401),v=n(63928),g=n(52757),y=(n(64839),n(16506)),_=n(59246),E=n(72001),m=n(96643),S=n(29201),b=n(57162);class T extends _.w{constructor(e,t,i){super(e,t,new y.$(S.I,(()=>n.e(8391).then(n.bind(n,48391)))),i,w)}_getPipelineState(e,t){const{oitPass:n,output:i,hasOccludees:r,enableOffset:o,cullFace:a}=e,l=n===E.Y.NONE,u=n===E.Y.FrontFace;return(0,b.Ey)({blending:i===s.V.Color?l?b.Os:(0,c.ez)(n):null,culling:(0,b.Xt)(a),depthTest:{func:(0,c.K_)(n)},depthWrite:(0,c.z5)(e),drawBuffers:(0,c.m6)(n,i),colorWrite:b.kn,stencilWrite:r?m.v0:null,stencilTest:r?t?m.a9:m.qh:null,polygonOffset:l||u?null:(0,c.aB)(o)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const w=new Map([[h.r.POSITION,0],[h.r.UV0,2],[h.r.PERSPECTIVEDIVIDE,3]]);var N=n(35143),L=n(97808),A=n(42717),M=n(6485),P=n(94570);class x extends P.E{constructor(){super(...arguments),this.cullFace=o.s2.None,this.hasSlicePlane=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=L.I.None,this.emissionSource=A.ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1}}(0,N._)([(0,M.W)({count:o.s2.COUNT})],x.prototype,"cullFace",void 0),(0,N._)([(0,M.W)()],x.prototype,"hasSlicePlane",void 0),(0,N._)([(0,M.W)()],x.prototype,"enableOffset",void 0),(0,N._)([(0,M.W)()],x.prototype,"writeDepth",void 0),(0,N._)([(0,M.W)()],x.prototype,"hasOccludees",void 0),(0,N._)([(0,M.W)()],x.prototype,"terrainDepthTest",void 0),(0,N._)([(0,M.W)()],x.prototype,"cullAboveTerrain",void 0),(0,N._)([(0,M.W)()],x.prototype,"perspectiveInterpolation",void 0);class R extends v.W{constructor(e){super(e,O),this._configuration=new x,this.vertexAttributeLocations=w,this.supportsEdges=!0,this.produces=new Map([[u.N.OPAQUE_MATERIAL,e=>(0,s.CL)(e)],[u.N.TRANSPARENT_MATERIAL,e=>(0,s._o)(e)&&this.parameters.writeDepth],[u.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,s._o)(e)&&!this.parameters.writeDepth],[u.N.DRAPED_MATERIAL,e=>(0,s._o)(e)||(0,s.CL)(e)]])}getConfiguration(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<c.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new I(e)}createBufferWriter(){const e=f.zK.clone();return this.parameters.perspectiveInterpolation&&e.f32(h.r.PERSPECTIVEDIVIDE),new C(e)}}class I extends a.m8{constructor(e){super((0,i.A)((0,i.A)({},e),e.material.parameters))}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.acquireTechnique(T,e)}}class C extends p.Z{write(e,t,n,i,s,o){for(const a of this.vertexBufferLayout.fields.keys()){const i=n.get(a);if(i)if(a===h.r.PERSPECTIVEDIVIDE){(0,d.vA)(1===i.size);const e=s.getField(a,r.Y$);e&&(0,g.uO)(i,e,o)}else(0,g.zC)(a,i,e,t,s,o)}}}class O extends l.qA{constructor(){super(...arguments),this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=o.s2.None,this.opacity=1,this.textureId=null,this.initTextureTransparent=!0,this.perspectiveInterpolation=!1}}},82307:(e,t,n)=>{n.d(t,{NE:()=>l,TU:()=>d,ac:()=>u,fn:()=>c,oe:()=>h});var i=n(18690),r=n(54901),s=n(87663),o=n(57308),a=n(41036);const l={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},c={toggle:"Control"},u={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},d={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:a.i,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},undo:"z",redo:"r"};class h{constructor(){this._bindings=new Map}add(e,t){return this.addToggle(e,(e=>{"key-down"===e.type&&t(e)}))}addToggle(e,t){const n=p.fromDefinition(e,t),o=(0,s.tE)(this._bindings,n.key,(()=>[]));return o.push(n),(0,r.hA)((()=>(0,i.TF)(o,n)))}register(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.o.WIDGET;return(0,r.vE)([e.on("key-down",(t=>this.dispatch(e.inputManager,t)),t),e.on("key-up",(t=>this.dispatch(e.inputManager,t)),t)])}dispatch(e,t){const n=t.key,i=this._bindings.get(n);if(i)for(const r of i)r.process(e,t)}}class p{constructor(e,t,n,i,r){this.key=e,this.modifiers=t,this.repeats=n,this.continuePropagation=i,this.callback=r}process(e,t){if(!(t.key!==this.key||"repeat"in t&&t.repeat&&!this.repeats)){for(const t of this.modifiers)if(!e.isModifierKeyDown(t))return;this.continuePropagation||t.stopPropagation(),this.callback(t)}}static fromDefinition(e,t){if("string"==typeof e)return new p(e,[],!1,!1,t);const{key:n,modifier:i,repeats:r,continuePropagation:s}=e;return new p(n,i?Array.isArray(i)?i:[i]:[],!!r,!!s,t)}}},75543:(e,t,n)=>{n.d(t,{FX:()=>z,Mn:()=>b,QT:()=>V,WG:()=>H,ej:()=>N,en:()=>j,fT:()=>se,i7:()=>m,jf:()=>k,qR:()=>x,xW:()=>ie});var i=n(18690),r=n(15941),s=n(19555),o=n(72745),a=n(20664),l=n(9392),c=n(43047),u=n(55855),d=n(63885),h=n(7137),p=n(13927),f=n(78315),v=n(94966),g=n(23862),y=n(79337),_=n(74050);class E{intersect(e){return X(this,e)}closestPoints(e){return[this.closestTo(e)]}}class m extends E{constructor(e){super(),this.point=e}equals(e){return this===e||se(e)&&(0,a.p)(this.point,e.point)}closestTo(){return(0,g.o8)(this.point)}}class S extends E{constructor(e,t,n){super(),this.start=e,this.end=t,this.lineLike={start:e,end:t,type:n}}equals(e){return this===e||oe(e)&&this.lineLike.type===e.lineLike.type&&(0,a.p)(this.start,e.start)&&(0,a.p)(this.end,e.end)}closestTo(e){const t=(0,g.Hh)();return(0,y.Yv)(e,this.lineLike,t),t}}class b extends S{constructor(e,t){super(e,t,_.Vv.LINE)}}class T extends S{constructor(e,t){super(e,t,_.Vv.RAY)}}class w extends E{constructor(e){super(),this.constraints=e}equals(e){return this===e||re(e)&&(0,i.aI)(this.constraints,e.constraints,((e,t)=>e.equals(t)))}closestTo(e){var t;let n,i=1/0;for(const r of this.constraints){const t=r.closestTo(e),s=(0,a.s)(e,t);s<i&&(i=s,n=t)}return(0,g.o8)(null!==(t=n)&&void 0!==t?t:e)}closestPoints(e){return this.constraints.flatMap((t=>t===this?[]:t.closestPoints(e)))}}class N extends E{constructor(e,t){super(),this.center=e,this.radius=t}equals(e){return this===e||ce(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const t=(0,g.Hh)();return(0,y.Nm)(e,this.center,this.radius,t),t}}class L extends E{constructor(e,t){super(),this.center=e,this.radius=t}equals(e){return this===e||ue(e)&&(0,a.p)(this.center,e.center)&&this.radius===e.radius}closestTo(e){const t=(0,g.Hh)();return(0,y.Nm)(e,this.center,this.radius,t),t[2]=this.center[2],t}asCircle(){return new A((0,g.o8)(this.center),this.radius,(0,g.fA)(0,0,1))}}class A extends E{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;super(),this.center=e,this.radius=t,this.normal=n,this.slicePlane=i}equals(e){return this===e||de(e)&&(0,a.p)(this.center,e.center)&&(0,a.p)(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:t,radius:n}=this;(0,p._I)(this.getPlane(P),e,M);const i=(0,a.a)(M,M,t),r=(0,a.k)(i);if((0,y.Zj)(r,0))return(0,g.o8)(e);const s=n/Math.sqrt(r),o=(0,g.Hh)();(0,a.b)(o,t,i,s);const{slicePlane:l}=this;if(l&&!(0,y.F2)(l,o)){var c;const t=U(l,this);return null!==(c=null===t||void 0===t?void 0:t.closestTo(e))&&void 0!==c?c:(0,g.o8)(e)}return o}getPlane(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.vt)();return(0,p.O_)(this.center,this.normal,e)}}const M=(0,l.vt)(),P=(0,p.vt)();class x extends E{constructor(e){super(),this.z=e}equals(e){return this===e||ae(e)&&this.z===e.z}closestTo(e){return(0,g.fA)(e[0],e[1],this.z)}getPlane(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.vt)();return(0,a.i)(R,0,0,this.z),(0,p.O_)(R,l.Cb,e)}}const R=(0,l.vt)();class I extends E{constructor(e,t,n){super(),this.start=e,this.end=t,this.planeLike={start:(0,g.Xz)(e),end:(0,g.Xz)(t),type:n}}equals(e){return this===e||le(e)&&this.planeLike.type===e.planeLike.type&&(0,a.p)(this.start,e.start)&&(0,a.p)(this.end,e.end)}closestTo(e){const t=(0,g.Hh)();return(0,y.r2)(e,this.planeLike,t),t}closestEndTo(e){const{start:t,end:n}=this.planeLike;return Math.sign((0,s.Om)((0,s.Re)(C,n,t),(0,s.Re)(O,(0,g.Xz)(e),t)))>0?this.end:this.start}getPlane(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.vt)();const t=(0,a.c)(Z,this.end);return t[2]+=1,(0,p.Cr)(this.start,this.end,t,e)}getSlicePlane(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.vt)();const{start:t,end:n,type:i}=this.planeLike;if(i===y.pJ.PLANE)return;const r=(0,a.i)(Z,t[0],t[1],0),s=(0,a.i)(D,n[0],n[1],0),o=(0,a.d)(D,s,r);return(0,p.O_)(r,o,e),e}}const C=(0,o.vt)(),O=(0,o.vt)(),Z=(0,l.vt)(),D=(0,l.vt)();class z extends I{constructor(e,t){super(e,t,y.pJ.HALF_PLANE)}}class H extends I{constructor(e,t){super(e,t,y.pJ.PLANE)}}class F extends E{constructor(e,t){super(),this.sphere=(0,f.l)(e,t)}equals(e){return this===e||he(e)&&(0,f.m)(this.sphere,e.sphere)}closestTo(e){const t=(0,g.Hh)();return(0,f.p)(this.sphere,e,t),t}get center(){return(0,f.a)(this.sphere)}get radius(){return this.sphere[3]}}class j extends E{constructor(e,t,n){super(),this.start=e,this.end=t,this.getZ=n,this.planeLike={start:(0,g.Xz)(e),end:(0,g.Xz)(t),type:y.pJ.PLANE}}equals(e){return this===e||pe(e)&&(0,a.p)(this.start,e.start)&&(0,a.p)(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return function(e,t){var n;const i=(0,g.Hh)();return(0,y.r2)(t,e.planeLike,i),i[2]=null!==(n=e.getZ(i[0],i[1]))&&void 0!==n?n:fe,i}(this,e)}addIfOnTheGround(e,t){for(const i of t){var n;const t=null!==(n=this.getZ(i[0],i[1]))&&void 0!==n?n:0;(0,y.Zj)(i[2],t)&&(i[2]=t,e.push(i))}}}class V extends E{constructor(e,t,n){super(),this._x=e,this._y=t,this._z=n}equals(e){return this===e||function(e){return e instanceof V}(e)&&this._x===e._x&&this._y===e._y&&this._z===e._z}closestTo(e){var t,n,i;let[r,s,o]=e;return(0,g.vt)(null!==(t=this._x)&&void 0!==t?t:r,null!==(n=this._y)&&void 0!==n?n:s,null!==(i=this._z)&&void 0!==i?i:o)}}class k extends E{constructor(e,t,n,i,r){super(),this._origin=e,this._spatialReference=t,this._distanceMeters=n,this._z=i,this._directionDegrees=r}equals(e){return this===e||function(e){return e instanceof k}(e)&&(0,s.t2)(this._origin,e._origin)&&this._spatialReference===e._spatialReference&&this._distanceMeters===e._distanceMeters&&this._z===e._z&&this._directionDegrees===e._directionDegrees}closestTo(e){var t;let[n,i,r]=e;return(0,s.hZ)(q,n,i),(0,s.t2)(q,this._origin)||this._applyDirectionAndDistance(q),(0,g.vt)(q[0],q[1],null!==(t=this._z)&&void 0!==t?t:r)}_applyDirectionAndDistance(e){if(null!=this._directionDegrees&&null!=this._distanceMeters)(0,h.vN)(e,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(null!=this._directionDegrees)!function(e,t,n,i,r){var s;let{azimuth:o,distance:a}=(0,h._3)(W,t,i,r);null!==(s=o)&&void 0!==s||(o=0);let l=a*Math.cos((o-n)*d.eh);l=Math.max(0,l),(0,h.vN)(e,t,n,l,r)}(e,this._origin,this._directionDegrees,e,this._spatialReference);else if(null!=this._distanceMeters){const{azimuth:t}=(0,h._3)(B,this._origin,e,this._spatialReference);(0,h.vN)(e,this._origin,null!==t&&void 0!==t?t:0,this._distanceMeters,this._spatialReference)}}}const q=[0,0],B=new h.Zj;const W=new h.Zj;function X(e,t){if(re(e)){const n=[];for(const i of e.constraints){const e=i.intersect(t);e&&n.push(e)}return ie(n)}if(re(t))return X(t,e);if(pe(e))return Q(e,t);if(pe(t))return Q(t,e);if(se(e)){const{point:n}=e;if(se(t))return(0,a.p)(n,t.point)?e:void 0;const i=t.closestTo(n);return(0,a.H)(i,n)?e:void 0}if(oe(e)){if(se(t))return X(t,e);if(oe(t))return te((0,y.SO)(e.lineLike,t.lineLike));if(ae(t))return G(e,t);if(le(t))return te((0,y.Mc)(t.planeLike,e.lineLike));if(ce(t))return te((0,y.K4)(e.lineLike,t.center,t.radius));if(de(t))return te((0,y.IB)(e.lineLike,t));if(ue(t))return function(e,t){let{lineLike:n}=e,{center:i,radius:r}=t;const s=i[2];return te((0,y.K4)(n,i,r).filter((e=>(0,y.Zj)(e[2],s))))}(e,t);if(he(t))return function(e,t){let{lineLike:n}=e,{sphere:i}=t;return te((0,f.n)(i,n.start,n.end))}(e,t)}else if(ae(e)){if(se(t)||oe(t))return X(t,e);if(ae(t))return function(e,t){return(0,y.Zj)(e.z,t.z)?e:void 0}(e,t);if(le(t))return function(e,t){let{z:n}=e,{planeLike:i}=t;const[r,s]=i.start,[o,a]=i.end,l=(0,g.fA)(r,s,n),c=(0,g.fA)(o,a,n);return i.type===y.pJ.PLANE?new b(l,c):new T(l,c)}(e,t);if(ce(t))return function(e,t){const[n,i]=t.center;return new L((0,g.fA)(n,i,e.z),t.radius)}(e,t);if(de(t))return Y(e,t);if(ue(t))return function(e,t){return(0,y.Zj)(t.center[2],e.z)?t:void 0}(e,t);if(he(t))return function(e,t){let{center:n,radius:i}=t;const r=Math.abs(n[2]-e.z);if(r>i&&!(0,y.Zj)(r,i))return;const s=(0,g.fA)(n[0],n[1],e.z),o=Math.sqrt(i**2-r**2);return(0,y.Zj)(o,0)?void 0:new L(s,o)}(e,t)}else if(le(e)){if(se(t)||oe(t)||ae(t))return X(t,e);if(le(t))return ee((0,y.b_)(e.planeLike,t.planeLike));if(ce(t))return ee((0,y.Bn)(e.planeLike,t.center,t.radius));if(de(t))return K(e,t);if(ue(t))return J(e,t);if(he(t))return $(e,t)}else if(ce(e)){if(se(t)||oe(t)||ae(t)||le(t))return X(t,e);if(ce(t))return ee((0,y.t1)((0,g.Xz)(e.center),e.radius,(0,g.Xz)(t.center),t.radius));if(de(t))return;if(ue(t))return function(e,t){const n=(0,s.hG)((0,g.Xz)(e.center),(0,g.Xz)(t.center));return(0,y.Zj)(n,0)&&(0,y.Zj)(e.radius,t.radius)?t:ne((0,y.t1)((0,g.Xz)(e.center),e.radius,(0,g.Xz)(t.center),t.radius),t.center[2])}(e,t);if(he(t))return}else if(de(e)){if(se(t)||oe(t)||ae(t)||le(t)||ce(t))return X(t,e);if(de(t))return;if(ue(t))return void t.asCircle();if(he(t))return}else if(ue(e)){if(se(t)||oe(t)||ae(t)||le(t)||ce(t)||de(t))return X(t,e);if(ue(t))return function(e,t){if(!(0,y.HG)(e.center,t.center))return;const n=(0,s.hG)((0,g.Xz)(e.center),(0,g.Xz)(t.center));return(0,y.Zj)(n,0)&&(0,y.Zj)(e.radius,t.radius)?e:ne((0,y.t1)((0,g.Xz)(e.center),e.radius,(0,g.Xz)(t.center),t.radius),e.center[2])}(t,e);if(he(t))return}else if(he(e)){if(se(t)||oe(t)||ae(t)||le(t)||ce(t)||ue(t))return X(t,e);if(he(t))return}}const G=(()=>{const e=(0,p.vt)();return(t,n)=>{const{start:i,end:r}=t;if((0,y.HG)(i,r)&&(0,y.Zj)(i[2],n.z))return t;const s=(0,g.Hh)();return(0,p.U5)(n.getPlane(e),i,r,s)?new m(s):void 0}})();const U=(()=>{const e=(0,u.vt)(),t=(0,l.vt)(),n=(0,l.vt)();return(i,s,o)=>{const{normal:u,center:d,radius:h}=s;(0,v.VV)(u,t,n);const f=(0,p.Qj)(i),_=h*(0,a.f)(f,t),E=h*(0,a.f)(f,n);(0,c.s)(e,d[0],d[1],d[2],1);const S=(0,c.h)(i,e),b=Math.hypot(_,E),T=(0,y.Zj)(b,0);if((0,y.Zj)((0,p.Io)(i,d),0)){if(T)return s;if((0,y.Zj)(h,0))return!o||(0,y.F2)(o,d)?new m((0,g.o8)(d)):void 0;(0,a.e)(t,f,u),(0,a.n)(t,t);const e=new Array,n=(0,l.o8)(d);(0,a.b)(n,n,t,h),o&&!(0,y.F2)(o,n)||e.push(n);const i=(0,l.o8)(d);return(0,a.b)(i,i,t,-h),o&&!(0,y.F2)(o,i)||e.push(i),te(e)}if(T)return;const w=-S/b;if(Math.abs(w)>1||(0,y.Zj)(w,1))return;const N=Math.atan(_/E),L=(0,r.YN)(w)-N,A=Math.PI-L,M=new Array,P=(0,l.vt)();(0,a.b)(P,d,t,h*Math.cos(L)),(0,a.b)(P,P,n,h*Math.sin(L)),M.push(P);const x=(0,l.vt)();return(0,a.b)(x,d,t,h*Math.cos(A)),(0,a.b)(x,x,n,h*Math.sin(A)),M.push(x),te(o?(0,y.UL)(o,M):M)}})();const Y=(()=>{const e=(0,p.vt)();return(t,n)=>U(t.getPlane(e),n,n.slicePlane)})();const J=(()=>{const e=(0,p.vt)();return(t,n)=>{let{center:i,radius:r}=n;const s=(0,y.Bn)(t.planeLike,i,r),o=i[2];t.getSlicePlane(e);const a=new Array;for(const[l,c]of s){const t=[l,c,o];(0,y.F2)(e,t)&&a.push(t)}return te(a)}})(),K=(()=>{const e=(0,p.vt)(),t=(0,p.vt)();return(n,i)=>U(n.getPlane(e),i,n.getSlicePlane(t))})(),$=(()=>{const e=(0,p.vt)();return(t,n)=>{let{center:i,radius:r}=n;const s=t.getPlane(e),o=(0,p.mN)(s,i),c=Math.abs(o);if(c>r&&!(0,y.Zj)(c,r))return;const u=Math.sqrt(r**2-o**2);if((0,y.Zj)(u,0)){const e=(0,g.Hh)();return(0,p._I)(s,i,e),new m(e)}const d=(0,g.Hh)(),h=(0,l.o8)((0,p.Qj)(s));return(0,a.b)(d,i,h,o),new A(d,u,h,t.getSlicePlane())}})();function Q(e,t){const{planeLike:n,getZ:i}=e,r=new Array;if(se(t))e.addIfOnTheGround(r,(0,y.VT)(n,t.point));else if(oe(t))e.addIfOnTheGround(r,(0,y.Mc)(n,t.lineLike));else if(ce(t))for(const[o,a]of(0,y.Bn)(n,t.center,t.radius)){const e=i(o,a);null!=e&&r.push((0,l.fA)(o,a,e))}else if(le(t)||pe(t))for(const[o,a]of(0,y.b_)(n,t.planeLike)){var s;const e=null!==(s=i(o,a))&&void 0!==s?s:fe;r.push((0,l.fA)(o,a,e))}return te(r)}function ee(e){return ie(e.map((e=>{let[t,n]=e;const i=(0,g.fA)(t,n,0),r=(0,g.fA)(t,n,1);return new b(i,r)})))}function te(e){return ie(e.map((e=>e?new m((0,g._7)(e)):void 0)))}function ne(e,t){return te(e.map((e=>{let[n,i]=e;return[n,i,t]})))}function ie(e){var t;if(0!==e.length)return 1===e.length?null!==(t=e[0])&&void 0!==t?t:void 0:new w(e.filter(i.Ru))}function re(e){return e instanceof w}function se(e){return e instanceof m}function oe(e){return e instanceof S}function ae(e){return e instanceof x}function le(e){return e instanceof I}function ce(e){return e instanceof N}function ue(e){return e instanceof L}function de(e){return e instanceof A}function he(e){return e instanceof F}function pe(e){return e instanceof j}const fe=0},23862:(e,t,n)=>{n.d(t,{Ex:()=>f,FH:()=>E,Hh:()=>l,Lp:()=>v,Xz:()=>u,_7:()=>c,de:()=>p,fA:()=>d,io:()=>y,o8:()=>h,vf:()=>g,vt:()=>a,xF:()=>_});var i,r=n(9392),s=n(18117),o=n(12482);function a(e,t,n){return l(e,t,n)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,r.fA)(e,t,n)}function c(e){return e}function u(e){return e}function d(e,t,n){return(0,r.fA)(e,t,n)}function h(e){const[t,n,i]=e;return e.length>3?[t,n,i,e[3]]:[t,n,i]}function p(e){var t;return e[3]=(null!==(t=e.length>3?e[3]:void 0)&&void 0!==t?t:i.NONE)|i.TARGET,e}function f(e){var t;return Boolean((null!==(t=e.length>3?e[3]:void 0)&&void 0!==t?t:i.NONE)&i.TARGET)}function v(e,t,n,i){let{coordinateHelper:r,elevationInfo:s}=n;return e?g(r.vectorToDehydratedPoint(e,m),t,s,i):null}function g(e,t,n){var i,r;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l();return s[0]=e.x,s[1]=e.y,s[2]=null!==(i=e.z)&&void 0!==i?i:0,null==t||("2d"===t.type?s[2]=0:s[2]=null!==(r=(0,o.wS)(t,e,n,o.qt))&&void 0!==r?r:0),s}function y(e,t,n){return n?((0,s.J)(n,e[0],e[1],e[2],t),n):(0,s.T)(e[0],e[1],e[2],t)}function _(e,t,n,i,r){let{z:a,m:l}=n;const{spatialReference:c,elevationInfo:u}=i;let d;if(null==a&&null==l)d=void 0;else if(null==t||"2d"===t.type)d=null!==a&&void 0!==a?a:void 0;else{var h;d=null!==(h=(0,o.xS)(t,e,c,o.qt,u))&&void 0!==h?h:0}const[p,f]=e;return r?(0,s.J)(r,p,f,d,c):r=(0,s.T)(p,f,d,c),null!=l&&(r.m=l,r.hasM=!0),r}function E(e,t,n,r){var s,a;let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l();const[u,d]=e;return c[0]=u,c[1]=d,e.length>3&&(c[3]=null!==(s=e[3])&&void 0!==s?s:i.NONE),"3d"!==(null===n||void 0===n?void 0:n.type)?(c[2]=t.value,c):(c[2]=null!==(a=(0,o.Fo)(n,u,d,t.value,r,t.elevationInfo,o.qt))&&void 0!==a?a:0,c)}!function(e){e[e.NONE=0]="NONE",e[e.TARGET=1]="TARGET"}(i||(i={}));const m=(0,s.T)(0,0,0,null)},63078:(e,t,n)=>{n.d(t,{N:()=>u});var i=n(35143),r=n(69539),s=n(42553),o=n(46053),a=n(85842);let l=class extends s.oY{constructor(){super(...arguments),this.enabled=!0}};(0,i._)([(0,o.MZ)({type:Boolean})],l.prototype,"enabled",void 0),l=(0,i._)([(0,a.$)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],l);let c=class extends s.oY{constructor(e){super(e),this.lineSnapper=new l,this.parallelLineSnapper=new l,this.rightAngleSnapper=new l,this.rightAngleTriangleSnapper=new l,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new r.A([255,127,0]),this.orangeTransparent=new r.A([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};(0,i._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"lineSnapper",void 0),(0,i._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"parallelLineSnapper",void 0),(0,i._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleSnapper",void 0),(0,i._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleTriangleSnapper",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"shortLineThreshold",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"distance",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointThreshold",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"intersectionParallelLineThreshold",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"parallelLineThreshold",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"verticalLineThresholdMeters",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"touchSensitivityMultiplier",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointOnLineThreshold",void 0),(0,i._)([(0,o.MZ)({type:r.A,nonNullable:!0})],c.prototype,"orange",void 0),(0,i._)([(0,o.MZ)({type:r.A,nonNullable:!0})],c.prototype,"orangeTransparent",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthReference",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthTarget",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"lineHintFadedExtensions",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"parallelLineHintWidth",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],c.prototype,"parallelLineHintLength",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"parallelLineHintOffset",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],c.prototype,"rightAngleHintSize",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],c.prototype,"rightAngleHintOutlineSize",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"satisfiesConstraintScreenThreshold",void 0),c=(0,i._)([(0,a.$)("esri.views.interactive.snapping.Settings.Defaults")],c);const u=new c},99791:(e,t,n)=>{var i;n.d(t,{n:()=>i}),function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"}(i||(i={}))},12818:(e,t,n)=>{n.d(t,{X:()=>W});var i=n(8),r=n(54901),s=n(77944),o=n(19276),a=n(68134),l=n(35143),c=n(91967),u=n(46053),d=(n(81806),n(76460)),h=(n(47249),n(85842));let p=class extends c.A{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new o.A}};(0,l._)([(0,u.MZ)({constructOnly:!0})],p.prototype,"layer",void 0),(0,l._)([(0,u.MZ)()],p.prototype,"enabled",void 0),(0,l._)([(0,u.MZ)()],p.prototype,"updating",void 0),(0,l._)([(0,u.MZ)()],p.prototype,"availability",void 0),(0,l._)([(0,u.MZ)()],p.prototype,"sublayerSources",void 0),p=(0,l._)([(0,h.$)("esri.views.interactive.snapping.FeatureSnappingLayerSource")],p);const f=p;var v=n(63078),g=n(18690);let y=class extends c.A{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new o.A,this.distance=v.N.distance,this.touchSensitivityMultiplier=v.N.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){var e,t,n;const i=this.featureSources;i.some(E)&&d.A.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const r=i.filter(S),s=null!==(e=null===(t=this._get("_effectiveFeatureSources"))||void 0===t?void 0:t.filter(E))&&void 0!==e?e:new o.A;for(const o of r){const e=s.find((e=>e.layer===o.layer.parent));if(e)e.sublayerSources.includes(o)||e.sublayerSources.add(o);else if(o.layer.parent){const e=new f({layer:o.layer.parent});e.sublayerSources.add(o),s.add(e)}}for(const o of s){const e=o.sublayerSources.filter((e=>!r.includes(e)));o.sublayerSources.removeMany(e)}s.removeMany(s.filter((e=>0===e.sublayerSources.length)));const a=i.filter(m),l=null!==(n=this._get("_effectiveFeatureSources"))&&void 0!==n?n:new o.A,{added:c,removed:u}=(0,g.iv)(l.toArray(),[...a,...s]);return l.removeMany(u),l.addMany(c),l}};(0,l._)([(0,u.MZ)()],y.prototype,"enabled",void 0),(0,l._)([(0,u.MZ)()],y.prototype,"enabledToggled",void 0),(0,l._)([(0,u.MZ)()],y.prototype,"forceDisabled",void 0),(0,l._)([(0,u.MZ)()],y.prototype,"selfEnabled",void 0),(0,l._)([(0,u.MZ)()],y.prototype,"featureEnabled",void 0),(0,l._)([(0,u.MZ)()],y.prototype,"gridEnabled",void 0),(0,l._)([(0,u.MZ)()],y.prototype,"attributeRulesEnabled",void 0),(0,l._)([(0,u.MZ)({type:o.A.ofType(f)})],y.prototype,"featureSources",void 0),(0,l._)([(0,u.MZ)()],y.prototype,"distance",void 0),(0,l._)([(0,u.MZ)()],y.prototype,"touchSensitivityMultiplier",void 0),(0,l._)([(0,u.MZ)({readOnly:!0})],y.prototype,"effectiveEnabled",null),(0,l._)([(0,u.MZ)({readOnly:!0})],y.prototype,"effectiveGridEnabled",null),(0,l._)([(0,u.MZ)({readOnly:!0})],y.prototype,"effectiveSelfEnabled",null),(0,l._)([(0,u.MZ)({readOnly:!0})],y.prototype,"effectiveFeatureEnabled",null),(0,l._)([(0,u.MZ)({readOnly:!0})],y.prototype,"_effectiveFeatureSources",null),y=(0,l._)([(0,h.$)("esri.views.interactive.snapping.SnappingOptions")],y);const _=y;function E(e){return"subtype-group"===e.layer.type}function m(e){return"subtype-group"!==e.layer.type}function S(e){return"subtype-sublayer"===e.layer.type}var b=n(98773),T=n(54099),w=n(50346),N=n(9624),L=n(12482),A=n(23862),M=n(99791),P=n(70330),x=n(80794),R=n(9876),I=n(90836),C=n(45633),O=n(20612),Z=n(78228),D=n(59380),z=n(17072);let H=class extends(T.A.EventedMixin(c.A)){constructor(e){super(e),this.options=new _,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=F.MAIN}initialize(){this.addHandles([(0,a.wB)((()=>{const{distance:e,touchSensitivityMultiplier:t,effectiveSelfEnabled:n,effectiveFeatureEnabled:i,effectiveGridEnabled:r}=this.options;return{selfEnabled:n,featureEnabled:i,gridEnabled:"2d"===this.view.type&&r,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:e,touchSensitivityMultiplier:t}}),((e,t)=>{var n;t&&(this.doneSnapping(),this.emit("changed")),null!==(n=this._loadTask)&&void 0!==n&&n.abort(),this._loadTask=(0,b.UT)((n=>this._updateEngines(e,t,n)))}),a.pc),(0,a.wB)((()=>this.options),(e=>{for(const t of this._engines)t.options=e}),a.OH)])}destroy(){this._destroyEngines()}get updating(){var e;return this._engines.some((e=>e.updating))||!(null!==(e=this._loadTask)&&void 0!==e&&e.finished)}_destroyEngines(){this._engineCache.forEach((e=>e.destroy())),this._engineCache.clear(),this._engines=[]}async _updateEngines(e,t,n){if(!e.viewReady)return void this._destroyEngines();(null===t||void 0===t?void 0:t.viewSpatialReference)!==e.viewSpatialReference&&this._destroyEngines();const{_engineCache:i}=this,r=[];e.featureEnabled&&!i.has("feature")&&r.push(this._setupFeatureSnappingEngine(n)),e.selfEnabled&&!i.has("self")&&r.push(this._setupSelfSnappingEngine(n)),e.gridEnabled&&!i.has("grid")&&"2d"===this.view.type&&r.push(this._setupGridSnappingEngine(n)),await Promise.allSettled(r),n.aborted||(this._engines=Array.from(i.values()))}async _setupSelfSnappingEngine(e){const{SelfSnappingEngine:t}=await Promise.all([n.e(2612),n.e(8422)]).then(n.bind(n,67960));(0,w.Te)(e);const i=new t({view:this.view,options:this.options});this._engineCache.set("self",i)}async _setupGridSnappingEngine(e){const{view:t}=this,{GridSnappingEngine:i}=await n.e(5411).then(n.bind(n,35411));if((0,w.Te)(e),"2d"===t.type){const e=new i({view:t,options:this.options});this._engineCache.set("grid",e)}}async _setupFeatureSnappingEngine(e){const{FeatureSnappingEngine:t}=await n.e(2843).then(n.bind(n,12843));(0,w.Te)(e);const{view:i,options:r,_engineCache:s}=this,o=new t({view:i,options:r,spatialReference:i.spatialReference});s.set("feature",o)}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,n=e*t;return n*n}snap(e){return function(e){return null!=e.scenePoint}(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:t,context:n}=e;this._removeVisualization();const i=this._currentMainCandidate;if(null==i)return t;const r=this._selectUpdateInput(e);if(null==r)return t;const{spatialReference:s}=n,o=(0,N.project)(r,s);if(null==o)return t;const{view:a}=this,{elevationInfo:l,visualizer:c}=n,u=[],d=(0,A.vf)(o,a,l),h=i.constraint.closestTo(d);if(!this._arePointsWithinScreenThreshold(d,h,n)||!V(i,n.drawConstraints))return this._resetSnappingState(),t;i.targetPoint=(0,A.de)(h),u.push(...i.hints);for(const p of this._currentOtherActiveCandidates)V(p,n.drawConstraints)&&(p.targetPoint=(0,A.de)(h),u.push(...p.hints));return null!=c&&this.addHandles(c.draw(u,{spatialReference:s,elevationInfo:q(n),view:a,selfSnappingZ:n.selfSnappingZ}),j),(0,A.xF)(h,a,t,n)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput(e){let{point:t,scenePoint:n}=e;switch(this._currentSnappedType){case F.MAIN:return t;case F.SCENE:return n}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=F.MAIN}_removeVisualization(){this.removeHandles(j)}async _snapSinglePoint(e){let{point:t,context:n,signal:i}=e;const{view:r}=this,{elevationInfo:s}=n,o=(0,A.vf)(t,r,s),a=await this._fetchCandidates(o,M.n.ALL,n,i);return this._createSnapResult(o,F.MAIN,a,r,t,n,i)}async _snapMultiPoint(e){var t,n;let{point:i,scenePoint:r,context:s,signal:o}=e;const{view:a}=this,{coordinateHelper:l,elevationInfo:c,spatialReference:u}=s;await(0,N.initializeProjection)(r.spatialReference,u);const d=(0,N.project)(r,u),h=(0,A.vf)(d,a,c),p=await this._fetchCandidates(h,M.n.FEATURE,s,o);if(p.length>0){const e=await this._fetchCandidates(h,M.n.SELF,s,o);return this._createSnapResult(h,F.SCENE,[...p,...e],a,d,s,o)}const f=(0,A.vf)(i,a,c),v=await this._fetchCandidates(f,M.n.SELF,s,o);return this._createSnapResult(f,F.MAIN,v,a,{z:l.hasZ()&&i.hasZ?null!==(t=i.z)&&void 0!==t?t:0:void 0,m:l.hasM()&&i.hasM?null!==(n=i.m)&&void 0!==n?n:0:void 0},s,o)}async _fetchCandidates(e,t,n,i){return(await Promise.all(this._engines.map((r=>r.fetchCandidates(e,t,n,i))))).flat()}_createSnapResult(e,t,n,i,r,s,o){return{get valid(){return!(0,w.G4)(o)},apply:()=>{const{spatialReference:o}=s,{snappedPoint:a,hints:l}=this._processCandidates(e,t,n,s);return this._removeVisualization(),null!=s.visualizer&&this.addHandles(s.visualizer.draw(l,{spatialReference:o,elevationInfo:L.qt,view:i,selfSnappingZ:s.selfSnappingZ}),j),(0,A.xF)(a,i,r,s)}}}_processCandidates(e,t,n,i){if(n.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),(0,P.xX)(e,n);const r=this._currentMainCandidate;if(null!=r){const s=function(e,t){return e instanceof I.N?k(t,e.first)>=0&&k(t,e.second)>=0?0:-1:k(t,e)}(r,n);if(s>=0){if(!(n[s]instanceof I.N))return this._intersectWithOtherCandidates(s,n,e,t,i);if(this._arePointsWithinScreenThreshold(e,r.targetPoint,i))return this._updateSnappingCandidate(r,t,n,i)}}return this._intersectWithOtherCandidates(0,n,e,t,i)}_intersectWithOtherCandidates(e,t,n,i,r){const{coordinateHelper:s}=r,o=t[e],a=[];for(let l=0;l<t.length;++l){if(l===e)continue;const i=t[l],r=o.constraint.intersect(i.constraint);if(r)for(const e of r.closestPoints(o.targetPoint))a.push([new I.N((0,A.de)(e),o,i,i.isDraped),this._squaredScreenDistance(n,e,s)])}return a.length>0&&(a.sort(((e,t)=>e[1]-t[1])),a[0][1]<this._squaredPointProximityThreshold(r.pointer))?this._updateSnappingCandidate(a[0][0],i,t,r):V(o,r.drawConstraints)?this._updateSnappingCandidate(o,i,t,r):{snappedPoint:n,hints:[]}}_updateSnappingCandidate(e,t,n,i){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;const r=this._currentMainCandidate.targetPoint,s=[];s.push(...e.hints);for(const o of n){if(e instanceof I.N){if(o.constraint.equals(e.first.constraint)||o.constraint.equals(e.second.constraint))continue}else if(o.constraint.equals(e.constraint))continue;const t=o.constraint.closestTo(r);this._squaredScreenDistance(t,r,i.coordinateHelper)<v.N.satisfiesConstraintScreenThreshold*v.N.satisfiesConstraintScreenThreshold&&(o.targetPoint=r,this._currentOtherActiveCandidates.push(o),s.push(...o.hints))}return{snappedPoint:r,hints:s}}_squaredPointProximityThreshold(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,t,n){return this._squaredScreenDistance(e,t,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(e,t,n){return(0,P.pM)(this._toScreen(e,n),this._toScreen(t,n))}_toScreen(e,t){return(0,z.j)(e,t.spatialReference,L.qt,this.view)}get test(){}};var F;(0,l._)([(0,u.MZ)({constructOnly:!0})],H.prototype,"view",void 0),(0,l._)([(0,u.MZ)()],H.prototype,"options",void 0),(0,l._)([(0,u.MZ)({readOnly:!0})],H.prototype,"updating",null),(0,l._)([(0,u.MZ)()],H.prototype,"_loadTask",void 0),(0,l._)([(0,u.MZ)()],H.prototype,"_engines",void 0),(0,l._)([(0,u.MZ)()],H.prototype,"_squaredMouseProximityThreshold",null),(0,l._)([(0,u.MZ)()],H.prototype,"_squaredTouchProximityThreshold",null),H=(0,l._)([(0,h.$)("esri.views.interactive.snapping.SnappingManager")],H),function(e){e[e.MAIN=0]="MAIN",e[e.SCENE=1]="SCENE"}(F||(F={}));const j="visualization-handle";function V(e,t){return!t||null==t.direction&&null==t.distance||!(e instanceof x.X||e instanceof R.z||e instanceof C.o||e instanceof O.B||e instanceof D.R)&&(!(e instanceof Z.HJ)||null==t.direction&&e.selfSnappingType===Z._b.LastVertex)}function k(e,t){let n=-1;for(let i=0;i<e.length;++i)if(t.constraint.equals(e[i].constraint)){n=i;break}return n}function q(e){let{coordinateHelper:t,elevationInfo:n}=e;return t.hasZ()?L.qt:n}const B=new Map;function W(e){if(!B.has(e)){const t=function(e,t){var n,r;const s=new _({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:null!==(n=null===t||void 0===t?void 0:t.distance)&&void 0!==n?n:v.N.distance,touchSensitivityMultiplier:null!==(r=null===t||void 0===t?void 0:t.touchSensitivityMultiplier)&&void 0!==r?r:v.N.touchSensitivityMultiplier});return(0,i.A)((0,i.A)({},(0,a.wB)((()=>{var t,n;return null!==(t=null===(n=e.map)||void 0===n||null===(n=n.allLayers)||void 0===n?void 0:n.toArray())&&void 0!==t?t:[]}),(e=>{s.featureSources=new o.A(e).map((e=>new f({layer:e})))}),a.pc)),{},{options:s})}(e,{distance:10}),n=function(e,t){return new H({view:e,options:t})}(e,t.options);B.set(e,{referenceCount:0,snappingManager:n,remove:()=>{t.remove(),n.destroy()}})}const t=B.get(e);t.referenceCount++;const n=(0,r.hA)((()=>function(e,t){t.referenceCount--,t.referenceCount>0||(0,s.d)((()=>{0===t.referenceCount&&(t.remove(),B.delete(e))}))}(e,t)));return(0,i.A)({snappingManager:t.snappingManager},n)}},80794:(e,t,n)=>{n.d(t,{X:()=>l});var i=n(8),r=n(75543),s=n(70330),o=n(61751),a=n(23543);class l extends o.w{constructor(e){super((0,i.A)((0,i.A)({},e),{},{isDraped:!0,constraint:new r.en(e.edgeStart,e.edgeEnd,e.getGroundElevation)}))}get hints(){return[new a.c(s.H3.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}},9876:(e,t,n)=>{n.d(t,{z:()=>l});var i=n(8),r=n(75543),s=n(70330),o=n(61751),a=n(23543);class l extends o.w{constructor(e){super((0,i.A)((0,i.A)({},e),{},{constraint:new r.Mn(e.edgeStart,e.edgeEnd)}))}get hints(){return[new a.c(s.H3.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}},61751:(e,t,n)=>{n.d(t,{w:()=>s});var i=n(99791),r=n(30003);class s extends r.C{constructor(e){let{targetPoint:t,objectId:n,constraint:r,isDraped:s}=e;super(t,r,s,i.n.FEATURE),this.objectId=n}}},90836:(e,t,n)=>{n.d(t,{N:()=>a});var i=n(75543),r=n(99791),s=n(30003),o=n(30484);class a extends s.C{constructor(e,t,n,s){super(e,new i.i7(e),s,r.n.ALL),this.first=t,this.second=n}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new o.v(this.targetPoint,this.isDraped,this.domain)]}}},45633:(e,t,n)=>{n.d(t,{o:()=>l});var i=n(75543),r=n(99791),s=n(70330),o=n(30003),a=n(23543);class l extends o.C{constructor(e){let{lineStart:t,lineEnd:n,targetPoint:o,isDraped:l}=e;super(o,new i.WG(t,n),l,r.n.SELF),this._referenceLineHint=new a.c(s.H3.REFERENCE_EXTENSION,t,n,l,this.domain)}get hints(){return[this._referenceLineHint,new a.c(s.H3.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}},20612:(e,t,n)=>{n.d(t,{B:()=>h});var i=n(20664),r=n(9392),s=n(75543),o=n(23862),a=n(99791),l=n(70330),c=n(30003),u=n(23543),d=n(20578);class h extends c.C{constructor(e){let{referenceLine:t,lineStart:n,targetPoint:l,isDraped:c}=e;const u=(0,r.o8)(n),{left:d,right:h}=t;(0,i.d)(u,(0,i.g)(u,u,h),d),super(l,new s.WG(n,(0,o._7)(u)),c,a.n.SELF),this._referenceLines=[{edge:t,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new u.c(l.H3.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new d.r(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map((e=>new u.c(l.H3.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight)))]}addReferenceLine(e){const t={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((n=>{(0,i.p)(e.right,n.edge.left)&&(n.fadeLeft=!1,t.fadeRight=!1),(0,i.p)(e.right,n.edge.right)&&(n.fadeRight=!1,t.fadeRight=!1),(0,i.p)(e.left,n.edge.right)&&(n.fadeRight=!1,t.fadeLeft=!1),(0,i.p)(e.left,n.edge.left)&&(n.fadeLeft=!1,t.fadeLeft=!1)})),this._referenceLines.push(t)}}},78228:(e,t,n)=>{n.d(t,{HJ:()=>u,_b:()=>r,pn:()=>i});var i,r,s=n(99791),o=n(70330),a=n(30003),l=n(23543),c=n(56572);class u extends a.C{constructor(e){let{targetPoint:t,constraint:n,previousVertex:i,otherVertex:o,otherVertexType:a,isDraped:l,selfSnappingType:c,objectId:u,domain:d}=e;super(t,n,l,null!==d&&void 0!==d?d:s.n.SELF),this.previousVertex=i,this.otherVertex=o,this.otherVertexType=a,this.selfSnappingType=null!==c&&void 0!==c?c:r.None,this.objectId=null!==u&&void 0!==u?u:null}get hints(){const e=this.previousVertex,t=this.otherVertexType===i.CENTER?this.otherVertex:this.targetPoint,n=this.otherVertexType===i.CENTER?this.targetPoint:this.otherVertex;return[new l.c(o.H3.TARGET,t,n,this.isDraped,this.domain),new l.c(o.H3.REFERENCE,e,t,this.isDraped,this.domain),new c.l(this.previousVertex,t,n,this.isDraped,this.domain)]}}!function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"}(i||(i={})),function(e){e[e.None=0]="None",e[e.LastVertex=1]="LastVertex",e[e.FirstVertex=2]="FirstVertex",e[e.ExistingEdge=3]="ExistingEdge"}(r||(r={}))},59380:(e,t,n)=>{n.d(t,{R:()=>p});var i=n(19555),r=n(20664),s=n(9392),o=n(75543),a=n(23862),l=n(99791),c=n(70330),u=n(30003),d=n(23543),h=n(56572);class p extends u.C{constructor(e){let{targetPoint:t,point1:n,point2:c,isDraped:u}=e;super(t,new o.ej((0,a._7)((0,r.m)((0,s.vt)(),n,c,.5)),.5*(0,i.Io)((0,a.Xz)(n),(0,a.Xz)(c))),u,l.n.SELF),this._p1=n,this._p2=c}get hints(){return[new d.c(c.H3.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new d.c(c.H3.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new h.l(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}},30003:(e,t,n)=>{n.d(t,{C:()=>i});class i{constructor(e,t,n,i){this.targetPoint=e,this.constraint=t,this.isDraped=n,this.domain=i}}},30484:(e,t,n)=>{n.d(t,{v:()=>o});var i=n(20664),r=n(99791),s=n(64753);class o extends s.m{constructor(e,t){super(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.n.ALL),this.intersectionPoint=e}equals(e){return e instanceof o&&(0,i.p)(this.intersectionPoint,e.intersectionPoint)}}},23543:(e,t,n)=>{n.d(t,{c:()=>o});n(81806),n(76460);var i=n(20664),r=n(99791),s=n(64753);class o extends s.m{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.n.ALL,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];super(i,s),this.type=e,this.lineStart=t,this.lineEnd=n,this.fadeLeft=o,this.fadeRight=a}equals(e){return e instanceof o&&this.type===e.type&&(0,i.p)(this.lineStart,e.lineStart)&&(0,i.p)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return(0,i.j)(this.lineStart,this.lineEnd)}}},20578:(e,t,n)=>{n.d(t,{r:()=>o});n(81806),n(76460);var i=n(20664),r=n(99791),s=n(64753);class o extends s.m{constructor(e,t,n){super(n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.n.ALL),this.lineStart=e,this.lineEnd=t}equals(e){return e instanceof o&&(0,i.p)(this.lineStart,e.lineStart)&&(0,i.p)(this.lineEnd,e.lineEnd)}}},56572:(e,t,n)=>{n.d(t,{l:()=>o});n(81806),n(76460);var i=n(20664),r=n(99791),s=n(64753);class o extends s.m{constructor(e,t,n,i){super(i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.n.ALL),this.previousVertex=e,this.centerVertex=t,this.nextVertex=n}equals(e){return e instanceof o&&(0,i.p)(this.previousVertex,e.previousVertex)&&(0,i.p)(this.centerVertex,e.centerVertex)&&(0,i.p)(this.nextVertex,e.nextVertex)}}},64753:(e,t,n)=>{n.d(t,{m:()=>i});class i{constructor(e,t){this.isDraped=e,this.domain=t}}},70330:(e,t,n)=>{n.d(t,{BY:()=>T,H3:()=>_,HN:()=>S,Mo:()=>g,Tu:()=>w,io:()=>f,is:()=>m,nf:()=>E,pM:()=>v,xX:()=>y});var i=n(68134),r=n(41289),s=n(34154),o=n(18288),a=n(20664),l=n(18117),c=n(68295),u=n(57308),d=n(82307),h=n(23862),p=n(2515);const f=Symbol("grid-placement-graphic");function v(e,t){const n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function g(e,t){return Math.sqrt(v(e,t))}function y(e,t){t.sort(((t,n)=>(0,a.s)(t.targetPoint,e)-(0,a.s)(n.targetPoint,e)))}var _;function E(e,t,n){let{point:i,distance:a,returnEdge:u,vertexMode:d,coordinateHelper:{spatialReference:h},filter:p}=e;return n=null!=n?n.clone():new c.A({where:"1=1"}),p&&(n.geometry=p.geometry,n.distance=p.distance,n.spatialRelationship=p.spatialRelationship,n.where=(0,s.m)(n.where,p.where),n.timeExtent=(0,o.pJ)(n.timeExtent,p.timeExtent),n.objectIds=function(e,t){return e||t?t?e?Array.from((0,r.E$)(new Set(e),new Set(t))):t:e:null}(n.objectIds,p.objectIds)),{point:(0,l.T)(i[0],i[1],i[2],h.toJSON()),mode:t,distance:a,returnEdge:u,vertexMode:d,query:n.toJSON()}}function m(e,t,n){return{left:(0,h.Lp)(e.leftVertex.pos,t,n),right:(0,h.Lp)(e.rightVertex.pos,t,n)}}function S(e){return e.createQuery()}!function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"}(_||(_={}));const b=Symbol("snapping-toggle");function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const n=(0,i.wB)((()=>({view:e.view,snappingOptions:e.snappingOptions})),(n=>{let{view:i,snappingOptions:r}=n;if(e.removeHandles(b),!i||!r)return;const s=u.o.TOOL,o=[i.on("key-down",(e=>{e.key!==d.fn.toggle||e.repeat||(r.enabledToggled=!0,t())}),s),i.on("key-up",(e=>{e.key===d.fn.toggle&&(r.enabledToggled=!1,t())}),s),i.on("pointer-move",(e=>{const n=e.native.ctrlKey;r.enabledToggled!==n&&(r.enabledToggled=n,t())}),s)];e.addHandles(o,b)}),i.pc);e.addHandles(n)}function w(e){var t;return(0,p.r)(e)&&"utilityNetworks"in e&&!(null===(t=e.utilityNetworks)||void 0===t||!t.length)}},17072:(e,t,n)=>{n.d(t,{j:()=>a});var i=n(76931),r=n(9392),s=n(18117),o=n(4244);function a(e,t,n,r){return"2d"===r.type?(l.x=e[0],l.y=e[1],l.spatialReference=t,r.toScreen(l)):((0,o.X)(e,t,n,r,c),r.state.camera.projectToScreen(c,u),(0,i.tc)(u[0],u[1]))}const l=(0,s.T)(0,0,0,null),c=(0,r.vt)(),u=(0,i.gs)()},74050:(e,t,n)=>{n.d(t,{Dh:()=>l,IB:()=>u,Vv:()=>i,fg:()=>a,jI:()=>c});n(15941);var i,r=n(19555),s=n(72745);function o(e,t){return e[0]*t[1]-e[1]*t[0]}function a(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;return(0,r.Re)(h,i,n),(0,r.Re)(f,t,s),function(e,t,n){const i=(0,r.Om)(n,t)/(0,r.m3)(n);(0,r.hs)(e,n,i)}(v,f,h),(0,r.WQ)(e,s,v)}function l(e,t,n,i){(0,r.Re)(h,t,n);const s=i/(0,r.Bw)(h);return(0,r.Ln)(e,n,h,s)}function c(e,t){const n=e.start,s=e.end,a=t.start,l=t.end,c=(0,r.Re)(h,s,n),u=(0,r.Re)(p,l,a),g=o(c,u);if(Math.abs(g)<=d)return[];const y=(0,r.Re)(f,n,a),_=o(u,y)/g,E=o(c,y)/g;if(_>=0){if(E>=0||t.type===i.LINE)return[(0,r.Ln)(v,n,c,_)]}else if(e.type===i.LINE&&(E>=0||t.type===i.LINE))return[(0,r.Ln)(v,n,c,_)];return[]}function u(e,t,n){const s=[],o=(0,r.Re)(h,e.end,e.start),a=(0,r.Re)(p,e.start,t),l=(0,r.m3)(o),c=2*(0,r.Om)(o,a),u=c*c-4*l*((0,r.m3)(a)-n*n);if(0===u){const t=-c/(2*l);(e.type===i.LINE||t>=0)&&s.push((0,r.Ln)(v,e.start,o,t))}else if(u>0){const t=Math.sqrt(u),n=(-c+t)/(2*l);(e.type===i.LINE||n>=0)&&s.push((0,r.Ln)(v,e.start,o,n));const a=(-c-t)/(2*l);(e.type===i.LINE||a>=0)&&s.push((0,r.Ln)(f,e.start,o,a))}return s}!function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"}(i||(i={}));const d=1e-6,h=(0,s.vt)(),p=(0,s.vt)(),f=(0,s.vt)(),v=(0,s.vt)()},79337:(e,t,n)=>{n.d(t,{Bn:()=>h,F2:()=>A,HG:()=>w,IB:()=>E,K4:()=>m,Mc:()=>p,Nm:()=>y,SO:()=>S,UL:()=>L,VT:()=>f,Yv:()=>_,Zj:()=>N,b_:()=>v,pJ:()=>M,r2:()=>g,t1:()=>b});var i=n(15941),r=n(19555),s=n(72745),o=n(20664),a=n(9392),l=n(53494),c=n(13927),u=n(94966),d=n(74050);function h(e,t,n){let{start:i,end:o,type:a}=e;const l=[],c=(0,r.Re)(x,o,i),u=(0,r.Re)(R,i,t),d=(0,r.m3)(c),h=2*(0,r.Om)(c,u),p=h*h-4*d*((0,r.m3)(u)-n*n);if(0===p){const e=-h/(2*d);(a===M.PLANE||e>=0)&&l.push((0,r.Ln)((0,s.vt)(),i,c,e))}else if(p>0){const e=Math.sqrt(p),t=(-h+e)/(2*d);(a===M.PLANE||t>=0)&&l.push((0,r.Ln)((0,s.vt)(),i,c,t));const n=(-h-e)/(2*d);(a===M.PLANE||n>=0)&&l.push((0,r.Ln)((0,s.vt)(),i,c,n))}return l}function p(e,t){const n=e.start,i=e.end,s=(0,r.Re)(x,i,n),c=(0,o.i)(C,-s[1],s[0],0),u=t.start,h=t.end,p=(0,o.a)(O,h,u),f=(0,o.f)(p,c),v=(0,o.i)(Z,n[0],n[1],0),g=(0,o.a)(D,v,u),y=(0,o.f)(g,c),_=(0,l.FD)();if(Math.abs(f)<_)return Math.abs(y),[];const E=(0,o.b)(z,u,p,y/f);if(t.type===d.Vv.RAY){const e=(0,o.a)(H,E,u);if((0,o.f)(e,p)<-_)return[]}if(e.type===M.HALF_PLANE){const e=(0,r.jb)(R,E,n);if((0,r.Om)(e,s)<-_)return[]}return[(0,a.o8)(E)]}function f(e,t){return function(e,t){let{start:n,end:i,type:r}=e;const s=(0,o.a)(I,t,n),c=(0,o.a)(C,i,n),u=(0,o.e)(O,c,s),h=(0,o.z)(u)/(0,o.z)(c),p=(0,l.FD)();if(h<p)switch(r){case d.Vv.LINE:return[(0,a.o8)(t)];case d.Vv.RAY:return(0,o.f)(c,s)<-p?[]:[(0,a.o8)(t)]}return[]}(T(j,t[2],e),t)}function v(e,t){return S(T(j,0,e),T(V,0,t)).map((e=>{let[t,n]=e;return(0,s.fA)(t,n)}))}function g(e,t,n){return _(e,T(j,e[2],t),n)}function y(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,a.vt)();const s=(0,r.Re)(x,e,t),o=(0,r.Bw)(s);return(0,r.Ln)(i,t,s,0===o?1:n/o),i[2]=e[2],i}function _(e,t){let{start:n,end:i,type:r}=t,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.vt)();const l=(0,o.a)(I,e,n),c=(0,o.a)(C,i,n),u=(0,o.f)(l,c)/(0,o.f)(c,c);return(0,o.b)(s,n,c,r===d.Vv.RAY?Math.max(u,0):u)}const E=(()=>{const e=(0,a.vt)(),t=(0,a.vt)(),n=(0,a.vt)();return(i,l)=>{let{start:h,end:p}=i,{center:f,radius:v,normal:g,slicePlane:y}=l;const _=(0,c.O_)(f,g,F);if(N((0,c.Io)(_,h),0)&&N((0,c.Io)(_,p),0)){(0,u.VV)(g,e,t);const i=(i,s)=>((0,o.d)(n,s,f),(0,r.hZ)(i,(0,o.f)(n,e),(0,o.f)(n,t)),i),l=(0,d.IB)({start:i(x,h),end:i(R,p),type:d.Vv.LINE},s.uY,v),c=[];for(const[n,r]of l){const i=(0,o.c)((0,a.vt)(),f);(0,o.b)(i,i,e,n),(0,o.b)(i,i,t,r),y&&!A(y,i)||c.push(i)}return c}const E=(0,a.vt)();return(0,c.U5)(_,h,p,E)?!N((0,o.j)(E,f),v)||y&&!A(y,E)?[]:[E]:[]}})();function m(e,t,n){let{start:i,end:s,type:l}=e;const c=[],u=(0,o.d)(I,s,i),h=(0,r.Re)(R,i,t),p=(0,r.m3)(u),f=2*(0,r.Om)(u,h),v=f*f-4*p*((0,r.m3)(h)-n*n);if(0===v){const e=-f/(2*p);(l===d.Vv.LINE||e>=0)&&c.push((0,o.b)((0,a.vt)(),i,u,e))}else if(v>0){const e=Math.sqrt(v),t=(-f+e)/(2*p);(l===d.Vv.LINE||t>=0)&&c.push((0,o.b)((0,a.vt)(),i,u,t));const n=(-f-e)/(2*p);(l===d.Vv.LINE||n>=0)&&c.push((0,o.b)((0,a.vt)(),i,u,n))}return c}function S(e,t){const n=e.start,i=e.end,r=t.start,s=t.end,c=(0,o.a)(I,i,n),u=(0,o.a)(C,s,r),h=(0,o.a)(O,r,n),p=(0,o.e)(Z,c,u);if(!N((0,o.f)(h,p),0))return[];const f=(0,o.z)(p);if(N(f,0))return[];const v=(0,o.e)(D,h,u),g=(0,o.f)(v,p)/f,y=(0,o.b)(z,n,c,g);if(e.type===d.Vv.RAY){const e=(0,o.a)(H,y,n);if((0,o.f)(c,e)<-(0,l.FD)())return[]}if(t.type===d.Vv.RAY){const e=(0,o.a)(H,y,r);if((0,o.f)(u,e)<-(0,l.FD)())return[]}return[(0,a.o8)(y)]}function b(e,t,n,i){const[o,a]=e,[l,c]=n,u=l-o,d=c-a,h=u*u+d*d,p=Math.sqrt(h);if(p>t+i)return[];if(p<Math.abs(t-i))return[];if(N(p,0)&&N(t,i))return[];const f=(t*t-i*i+h)/(2*p),v=Math.sqrt(t*t-f*f),g=v*d/p,y=v*u/p,[_,E]=(0,r.Cc)(x,e,n,f/p);return N(g,y)?[(0,s.fA)(_,E)]:[(0,s.fA)(_+g,E-y),(0,s.fA)(_-g,E+y)]}function T(e,t,n){let{start:i,end:r,type:s}=n;return(0,o.i)(e.start,i[0],i[1],t),(0,o.i)(e.end,r[0],r[1],t),e.type=P[s],e}function w(e,t){return N(e[2],t[2])}function N(e,t){return(0,i.Sp)(Math.abs(e-t),0,(0,l.FD)())}function L(e,t){return t.filter((t=>A(e,t)))}function A(e,t){return(0,c.Tj)(e,t)}var M;!function(e){e[e.PLANE=0]="PLANE",e[e.HALF_PLANE=1]="HALF_PLANE"}(M||(M={}));const P={[M.PLANE]:d.Vv.LINE,[M.HALF_PLANE]:d.Vv.RAY},x=(0,s.vt)(),R=(0,s.vt)(),I=(0,a.vt)(),C=(0,a.vt)(),O=(0,a.vt)(),Z=(0,a.vt)(),D=(0,a.vt)(),z=(0,a.vt)(),H=(0,a.vt)(),F=(0,c.vt)(),j={start:(0,a.vt)(),end:(0,a.vt)(),type:d.Vv.LINE},V={start:(0,a.vt)(),end:(0,a.vt)(),type:d.Vv.LINE}},2515:(e,t,n)=>{n.d(t,{r:()=>s});var i=n(19898);class r extends i.R{constructor(e,t){super(e,t,"webmap")}}function s(e){return null!=e&&"object"==typeof e&&"declaredClass"in e&&"esri.WebMap"===e.declaredClass}new r(2,32)}}]);
//# sourceMappingURL=4407.17964e2d.chunk.js.map