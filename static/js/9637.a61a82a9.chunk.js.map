{"version":3,"file":"static/js/9637.a61a82a9.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/maybeUpdating.js","../node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SGraphicsMap.js","../node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/support/TemporalSceneLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst n=\"updating\";function t(n){return\"updating\"===n?null:n}function u(n){return\"updating\"===n}export{u as isUpdating,t as unwrapUpdating,n as updating};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{WorkerHandle as e}from\"../../../core/workers/WorkerHandle.js\";class r extends e{constructor(e){super(\"SceneLayerWorker\",\"dracoDecompressPointCloudData\",{dracoDecompressPointCloudData:e=>[e.geometryBuffer]},e,{hasInitialize:!0})}}export{r as I3SPointsWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Evented.js\";import\"../../../../core/has.js\";import{findInMap as t,someMap as s}from\"../../../../core/MapUtils.js\";class i extends e{constructor(e,t){super(),this._updateAndCompare=e,this._notifyUpdated=t,this._nodes=new Map,this._graphics=new Map,this._duplicates=new Map}clear(){if(this._graphics.size>0){const e=this.toArray();this._graphics.clear(),this.emit(\"change\",{added:[],removed:e})}this._nodes.clear()}get length(){return this._graphics.size}get(e){return this._graphics.get(e)}getNode(e){return this._nodes.get(e)}hasNode(e){return this._nodes.has(e)}nodes(){return this._nodes.values()}addNode(e,t){this._nodes.set(e,t);const s=t.graphics;if(0===s.length)return;const i=new Set;for(let o=0;o<s.length;o++){const t=s[o],n=t.objectId,h=this._graphics.get(n);if(h){i.add(n),t!==h&&(s[o]=h);const r=this._duplicates.get(n);r?r.push(e):this._duplicates.set(n,[h.nodeIndex,e])}else t.nodeIndex=e,this._graphics.set(n,t)}i.size&&this._updateForeignGraphics(t);const n=i.size>0?s.filter((e=>!i.has(e.objectId))):s;n.length>0&&this.emit(\"change\",{added:n,removed:[]})}removeNode(e){const t=this._nodes.get(e);if(!t)return;this._nodes.delete(e);const s=new Set,i=[];for(const n of t.graphics){const t=n.objectId,o=this._graphics.get(t);if(!o)continue;const h=this._duplicates.get(t);if(h){const i=h.indexOf(e);if(-1===i)continue;if(h.splice(i,1),o.nodeIndex===e){let e=this.getNode(h[0]);for(let t=1;t<h.length;t++){const s=this.getNode(h[t]);(null==e||null!=s&&s.node.level>e.node.level)&&(e=s)}null!=e&&s.add(e)}1===h.length&&this._duplicates.delete(t)}else this._graphics.delete(t),i.push(n)}i.length>0&&this.emit(\"change\",{added:[],removed:i}),s.forEach((e=>this._updateForeignGraphics(e)))}_updateForeignGraphics(e){const t=[],s=e.node.index,i=e.node.level;let n=0;for(;n<e.graphics.length;){const o=e.graphics[n].nodeIndex;if(o===s){n++;continue}let h=1;for(;n+h<e.graphics.length&&e.graphics[n+h].nodeIndex===o;)h++;const r=this.getNode(o);if(null!=r&&r.node.level>i)n+=h;else{for(let i=n;i<n+h;i++){const n=e.graphics[i];n.nodeIndex=s,this._updateAndCompare(n,e,i)&&t.push(n)}n+=h}}t.length>0&&this._notifyUpdated(t)}toArray(){return Array.from(this._graphics.values())}find(e){return t(this._graphics,e)}some(e){return s(this._graphics,e)}forEach(e){this._graphics.forEach((t=>e(t)))}forEachNode(e){this._nodes.forEach(((t,s)=>e(t,s)))}get nodeCount(){return this._nodes.size}_checkInvariants(){const e=new Map;this._nodes.forEach(((t,s)=>{t.graphics.forEach((t=>{e.set(t.objectId,1+(e.get(t.objectId)??0)),this._duplicates.get(t.objectId)}))})),e.forEach(((e,t)=>{const s=this._graphics.get(t);if(!s)return;if(!this._nodes.get(s.nodeIndex))return;const i=this._duplicates.get(t);i&&i.forEach((e=>{this._nodes.get(e)}))}))}}export{i as I3SGraphicsMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{binaryIndexOf as t}from\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{destroyMaybe as i}from\"../../../core/maybe.js\";import{initial as s,watch as o}from\"../../../core/reactiveUtils.js\";import{estimateSize as a}from\"../../../core/typedArrayUtil.js\";import{generateUID as n}from\"../../../core/uid.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{i as u}from\"../../../chunks/vec32.js\";import{ZEROS as h,create as p}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{projectBuffer as c}from\"../../../geometry/projection/projectBuffer.js\";import{projectVectorToVector as g}from\"../../../geometry/projection/projectVectorToVector.js\";import{extentContainsCoords3D as m,extentContainsCoords2D as y}from\"../../../geometry/support/contains.js\";import{newDoubleArray as f,doubleArrayFrom as _}from\"../../../geometry/support/DoubleArray.js\";import{getGeometryZScaler as b}from\"../../../geometry/support/zscale.js\";import{fallbackObjectIDAttribute as v}from\"../../../layers/LayerConstants.js\";import{estimateSize as x}from\"../../../layers/graphics/dehydratedFeatures.js\";import{makeDehydratedPoint as I}from\"../../../layers/graphics/dehydratedPoint.js\";import{hydrateGraphic as E}from\"../../../layers/graphics/hydratedFeatures.js\";import w from\"../../../layers/graphics/controllers/I3SOnDemandController.js\";import N from\"../../../layers/support/FeatureFilter.js\";import j from\"../../../rest/support/Query.js\";import{isBasemapLayer as O}from\"../../../support/basemapUtils.js\";import{I3SPointsWorkerHandle as C}from\"./I3SPointsWorkerHandle.js\";import{LayerView3D as D}from\"./LayerView3D.js\";import{Graphics3DFeatureProcessor as F}from\"./graphics/Graphics3DFeatureProcessor.js\";import{QueryEngine as S}from\"./graphics/QueryEngine.js\";import{createInteractiveEditSession as G,normalizeEditResultsEvent as A,processAttributeEdits as P}from\"./i3s/featureEditing.js\";import{I3SGraphicsMap as L}from\"./i3s/I3SGraphicsMap.js\";import{I3SOverrides as V}from\"./i3s/I3SOverrides.js\";import{checkRecyclable as R,checkSpatialReferences as M,containsDraco as H,whenGraphicAttributes as Q,getCachedAttributeValue as q}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as U}from\"./support/DefinitionExpressionSceneLayerView.js\";import{defineFieldProperties as T}from\"./support/fieldProperties.js\";import{LayerViewPerformanceInfo as B}from\"./support/LayerViewPerformanceInfo.js\";import{PopupSceneLayerView as k}from\"./support/PopupSceneLayerView.js\";import{SceneLayerViewRequiredFields as z}from\"./support/SceneLayerViewRequiredFields.js\";import{TemporalSceneLayerView as W}from\"./support/TemporalSceneLayerView.js\";import{debugFlags as Z}from\"../support/debugFlags.js\";import{compute as K}from\"../support/orientedBoundingBox.js\";import{updatingProgress as Y}from\"../support/updatingProperties.js\";import{Vertices as $}from\"../webgl-engine/lib/Attribute.js\";import{UpdatePolicy as J}from\"../webgl-engine/lib/UpdatePolicy.js\";import X from\"../../layers/SceneLayerView.js\";import{hasPopupTemplate as ee}from\"../../layers/support/popupUtils.js\";import{defaultHighlightName as te}from\"../../support/HighlightDefaults.js\";import{TaskPriority as re}from\"../../support/Scheduler.js\";const ie=T();class se{constructor(e,t,r,i){this.graphics=e,this.featureIds=t,this.attributeInfo=r,this.node=i}}let oe=class extends(W(U(k(D(X))))){constructor(){super(...arguments),this.type=\"scene-layer-graphics-3d\",this._queryEngine=null,this._memCache=null,this._interactiveEditingSessions=new Map,this._pendingEditsQueue=Promise.resolve(),this.loadedGraphics=new L(((e,t,r)=>de(e,t,r)),(e=>this.processor.graphicsCore.recreateGraphics(e))),this.holeFilling=\"always\",this.progressiveLoadFactor=1,this.supportsHeightUnitConversion=!0,this._coordinatesOutsideExtentErrors=0,this._maxCoordinatesOutsideExtentErrors=20}tryRecycleWith(e,t){return e.url===this.layer.url&&this._i3sOverrides.isEmpty?e.load(t).then((()=>{R(this.layer,e,this._i3sOverrides),this.layer=e,this._i3sOverrides.destroy();const t=this.view.resourceController?.memoryController;this._i3sOverrides=new V({view:this.view,layer:e,memoryController:t}),i(this._queryEngine),this._setupQueryEngine(),this.processor.resetObjectStates()})):null}initialize(){this.addResolvingPromise(this.layer.indexInfo);const e=this.view.resourceController?.memoryController;this._i3sOverrides=new V({view:this.view,layer:this.layer,memoryController:e}),M(this.layer,this.view.spatialReference,this.view.viewingMode),this._fieldsHelper=new z({layerView:this}),this._updatingHandles.add((()=>this.layer.rangeInfos),(e=>this._rangeInfosChanged(e)),s),this._updatingHandles.add((()=>this.layer.renderer),((e,t)=>this._rendererChange(e,t))),this._updatingHandles.add((()=>[this.parsedDefinitionExpression,this._excludeObjectIdsSorted]),(()=>this._filterChange())),this.addHandles(o((()=>Z.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;import(\"./support/I3STreeDebugger.js\").then((({I3STreeDebugger:t})=>{!this._treeDebugger&&Z.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||!this._treeDebugger||Z.I3S_TREE_SHOW_TILES||(this._treeDebugger.destroy(),this._treeDebugger=null)}),s)),this._set(\"processor\",new F({owner:this,preferredUpdatePolicy:J.ASYNC,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,setUidToIdOnAdd:!1,dataExtent:this.layer.fullExtent,updateClippingExtent:e=>this._updateClippingExtent(e)})),this.processor.elevationAlignment?.events.on(\"invalidate-elevation\",(({extent:e,spatialReference:t})=>this._controller.updateElevationChanged(e,t))),this.supportsHeightUnitConversion&&(this._verticalScale=b(\"point\",this.layer.spatialReference,this.view.spatialReference)),this.addResolvingPromise(this.processor.when()),this._memCache=this.view.resourceController.memoryController.newCache(`psl-${this.uid}`),this._controller=new w({layerView:this}),H(this.layer.geometryDefinitions)&&(this._worker=new C((e=>this.view.resourceController.immediate.schedule(e)))),this.addHandles(this.layer.on(\"apply-edits\",(e=>this._updatingHandles.addPromise(e.result)))),this.addHandles(this.layer.on(\"edits\",(e=>{const t=this._pendingEditsQueue.then((()=>this._handleEdits(e))).then();this._pendingEditsQueue=t,this._updatingHandles.addPromise(t)}))),this.when((()=>{this._setupQueryEngine(),this._updatingHandles.add((()=>this.maximumNumberOfFeatures),(e=>this._controller.featureTarget=e),s),this._updatingHandles.add((()=>this.suspended),(e=>{e&&this._removeAllNodeData()}))}))}destroy(){this._treeDebugger=i(this._treeDebugger),this._i3sOverrides=i(this._i3sOverrides),this._set(\"processor\",i(this.processor)),this._controller=i(this._controller),this._queryEngine=i(this._queryEngine),this._worker=i(this._worker),this._memCache=i(this._memCache),this.loadedGraphics.clear(),this._fieldsHelper=i(this._fieldsHelper)}get i3slayer(){return this.layer}get updatingProgressValue(){return this._controller?.updatingProgress??1}get requiredFields(){return this._fieldsHelper?.requiredFields??[]}get maximumNumberOfFeatures(){const e=this.processor?.graphicsCore?.displayFeatureLimit;return e?.maximumNumberOfFeatures??0}set maximumNumberOfFeatures(e){null!=e?(this._override(\"maximumNumberOfFeatures\",e),this._controller.fixedFeatureTarget=!0):(this._clearOverride(\"maximumNumberOfFeatures\"),this._controller.fixedFeatureTarget=!1)}get maximumNumberOfFeaturesExceeded(){return!this.suspended&&(!!this._controller?.useMaximumNumberOfFeatures&&!this._controller.leavesReached)}get _excludeObjectIdsSorted(){const e=this.layer.excludeObjectIds;return e.length?e.toArray().sort(((e,t)=>e-t)):null}get lodFactor(){return\"Labels\"===this.layer.semantic?1:this.view.qualitySettings.sceneService.point.lodFactor}get hasM(){return!1}get hasZ(){return!0}get contentVisible(){return!this.suspended&&!!this._controller?.rootNodeVisible}get legendEnabled(){return this.contentVisible&&!0===this.i3slayer?.legendEnabled}async whenGraphicAttributes(e,t){return Q(this.layer,e,this._getObjectIdField(),t,(()=>[...this.loadedGraphics.nodes()]))}getHit(e){if(!this.loadedGraphics)return null;const t=E(this.loadedGraphics.find((t=>t.uid===e)),this.layer),r=this._getObjectIdField();return t?.attributes?.[r]?(t.layer=this.layer,t.sourceLayer=this.layer,{type:\"graphic\",graphic:t,layer:t.layer}):null}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor.computeAttachmentOrigin(e,t)}isUpdating(){return!!(this._controller?.updating||this.processor?.updating||this._fieldsHelper?.updating||this.layerFilterUpdating)}highlight(e,t){return this.processor.highlight(e,this.layer.objectIdField,t??te)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}createInteractiveEditSession(e){return G(this._attributeEditingContext,e)}async _decompressBinaryPointData(e,t){const r={geometryBuffer:e.geometryBuffer};null==this._worker&&(this._worker=new C((e=>this.view.resourceController.immediate.schedule(e))));const i=await this._worker.invoke(r,t);if(null==i)throw new Error(\"Failed to decompress Draco point data\");return{positionData:i.positions,featureIds:i.featureIds}}async addNode(e,t,i){if(!le(t)&&!ne(t))throw new Error;if(this.loadedGraphics.hasNode(e.index))return void r.getLogger(this).error(\"I3S node \"+e.id+\" already added\");const s=null!=this.layer.fullExtent?he(this.layer.fullExtent.clone(),.5):null,{featureIds:o,pointPositions:a}=le(t)?await this._extractBinaryPointPositions(e,t,i):this._extractLegacyPointPositions(t),n=new Array;this._validatePositions(e,o,a,s,n);const l=this._controller.crsVertex,d=this.view.spatialReference;c(a,l,0,a,d,0,o.length);const u=le(t)?e.level:0,h=this._createGraphics(o,a,e.index,u),p=new se(h,o,t.attributeDataInfo,e);if(await this._i3sOverrides.applyAttributeOverrides(p.featureIds,t.attributeDataInfo,i),e.numFeatures=p.graphics.length,this._updateNodeMemory(e),ue(p),n.length>0&&(this._computeObb(e,n,l),this._controller.updateVisibility(e.index)),!this._controller.isGeometryVisible(e))return void this._cacheNodeData(p);if(null!=this._verticalScale)for(const r of p.graphics)this._verticalScale(r.geometry);const g=this.view._stage.renderView.olidRenderHelper;if(g){const e=O(this.view.map,this.layer.uid);for(let t=0;t<p.featureIds.length;t++){const r=p.featureIds[t];g.setUidToObjectAndLayerId(r,p.graphics[t].uid,this.layer.id,this.layer.uid,this.layer.popupEnabled&&!e&&ee(this.layer,this.view.popup?.defaultPopupTemplateEnabled),p.node.resources.attributes,t)}}this.loadedGraphics.addNode(e.index,p),this._controller.updateLoadStatus(e.index,!0),this._filterNode(p),this._treeDebugger&&this._treeDebugger.update()}_computeObb(e,t,r){const i=this._controller.crsIndex,s=i.isGeographic?this.view.renderSpatialReference:i;c(t,r,0,t,s,0),e.serviceObbInIndexSR=K(new $(t,3)),i.isGeographic&&(g(e.serviceObbInIndexSR.center,s,ce,i),e.serviceObbInIndexSR.center=ce)}isNodeLoaded(e){return this.loadedGraphics.hasNode(e)}isNodeReloading(){return!1}updateNodeState(){}async _extractBinaryPointPositions(e,t,r){const i=await this._decompressBinaryPointData(t,r),s=i.positionData,o=3,a=s.length/o,n=f(3*a),l=null!=e.serviceObbInIndexSR?e.serviceObbInIndexSR.center:h,d=Math.abs(l[2])*2**-20;for(let u=0;u<a;u++){const e=u*o;n[e]=s[e]+l[0],n[e+1]=s[e+1]+l[1],n[e+2]=s[e+2]+l[2],Math.abs(n[e+2])<d&&(n[e+2]=0)}return{featureIds:i.featureIds?_(i.featureIds):[],pointPositions:n}}_extractLegacyPointPositions(e){const t=e.pointData.length,r=f(3*t),i=new Array;for(let s=0;s<t;s++){const t=e.pointData[s],o=t.featureDataPosition,a=o.length,n=t.geometries?.[0]??pe[a],l=t.featureIds[0];if(\"Embedded\"!==n.type||\"points\"!==n.params.type||a<2||a>3)continue;const d=n.params.vertexAttributes?.position??[0,0,0],u=3*i.length;r[u]=o[0]+d[0],r[u+1]=o[1]+d[1],r[u+2]=3===a?o[2]+d[2]:NaN,i.push(l)}return{featureIds:i,pointPositions:r}}_validatePositions(e,t,i,s,o){if(null==s&&e.serviceObbInIndexSR)return;const a=t.length,n=3;for(let l=0;l<a;l++){const t=l*n;u(ce,i[t],i[t+1],i[t+2]);const a=!Number.isNaN(i[2]);null==s||(a?m(s,ce):y(s,ce))||(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&r.getLogger(this).error(\"Service Error: Coordinates outside of layer extent\"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&r.getLogger(this).error(\"Maximum number of errors reached. Further errors are ignored.\"),this._coordinatesOutsideExtentErrors++),e.serviceObbInIndexSR||o.push(ce[0],ce[1],ce[2])}}_createGraphics(e,t,r,i){const s=e.length,o=3,a=this._getObjectIdField(),l=this.processor.graphicsCore,d=new Array,u=this.view.spatialReference;for(let h=0;h<s;h++){const s=e[h],p={};null!=s&&(p[a]=s);const c=s??n(),g=h*o,m=isNaN(t[g+2])?void 0:t[g+2],y=I(t[g],t[g+1],m,u),f=this.loadedGraphics.get(c);if(null!=f)(null==f.level||f.level<i)&&(ge.property=\"geometry\",ge.graphic=f,ge.oldValue=f.geometry,ge.newValue=y,f.geometry=y,f.level=i,l.graphicUpdateHandler(ge)),d.push(f);else{const e=n();d.push({objectId:c,uid:e,geometry:y,attributes:p,visible:!0,nodeIndex:r,level:i})}}return d}_updateNodeMemory(e){e.memory=4096+(null!=e.numFeatures?e.numFeatures*this.processor.graphicsCore.usedMemoryPerGraphic:0)}_cacheNodeData(e){const t=e.graphics.reduce(((e,t)=>x(t)+e),a(e.featureIds)+1024);this._memCache.put(this._getMemCacheKey(e.node),e,t)}_getMemCacheKey(e){return`${e.index}`}_removeAllNodeData(){this.loadedGraphics.forEachNode(((e,t)=>{if(e){const t=e.node;this._updateNodeMemory(t),this._cacheNodeData(e)}this._controller.updateLoadStatus(t,!1)})),this._treeDebugger&&this._treeDebugger.update(),this.loadedGraphics.clear()}removeNode(e){const t=this._removeNodeStageData(e);t&&(this._updateNodeMemory(t.node),this._cacheNodeData(t))}_removeNodeStageData(e){const t=this.loadedGraphics.getNode(e);return null==t?null:(this._controller.updateLoadStatus(e,!1),this.loadedGraphics.removeNode(e),this._treeDebugger&&this._treeDebugger.update(),t)}async loadCachedNodeData(e){return this._memCache?.pop(this._getMemCacheKey(e))}async addCachedNodeData(e,t,i,s){this.loadedGraphics.hasNode(e.index)?r.getLogger(this).error(\"I3S node \"+e.id+\" already added\"):(await this._i3sOverrides.applyAttributeOverrides(t.featureIds,i,s),t.attributeInfo=i,this.loadedGraphics.addNode(e.index,t),this._controller.updateLoadStatus(e.index,!0),this._updateNodeMemory(e),ue(t),this._filterNode(t),this._treeDebugger&&this._treeDebugger.update())}getLoadedNodeIds(){const e=[];return this.loadedGraphics.forEachNode((t=>e.push(t.node.id))),e.sort()}getVisibleNodes(){const e=new Array;return this.loadedGraphics.forEachNode((t=>e.push(t.node))),e}getLoadedNodeIndices(e){this.loadedGraphics.forEachNode(((t,r)=>e.push(r)))}getLoadedAttributes(e){const t=this.loadedGraphics.getNode(e);if(null!=t?.attributeInfo)return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this.loadedGraphics.getNode(e);if(null!=t?.attributeInfo)return t.attributeInfo.attributeData}_setAttributeData(e,t){const r=this.loadedGraphics.getNode(e);null!=r?.attributeInfo&&(r.attributeInfo.attributeData=t,this._attributeValuesChanged(r))}async updateAttributes(e,t,r){const i=this.loadedGraphics.getNode(e);null!=i&&(await this._i3sOverrides.applyAttributeOverrides(i.featureIds,t,r),i.attributeInfo=t,this._attributeValuesChanged(i))}_attributeValuesChanged(e){ue(e),this._filterNode(e);const{processor:t}=this,{graphicsCore:r}=t;if(r.labelsEnabled){const t=e.node.index,i=new Array;e.graphics.forEach((e=>e.nodeIndex===t&&i.push(e.uid))),r.updateLabelingInfo(i)}t.refreshFilter()}_updateClippingExtent(e){return this._controller&&this._controller.updateClippingArea(e),!1}_getObjectIdField(){return this.layer.objectIdField||v}_getGlobalIdField(){return this.layer.associatedLayer?.globalIdField}async _rendererChange(e,t){const{layer:{fieldsIndex:r}}=this,i=new Set;let s,o;e?(await e.collectRequiredFields(i,r),s=Array.from(i).sort()):s=[],i.clear(),t?(await t.collectRequiredFields(i,r),o=Array.from(i).sort()):o=[],s.length===o.length&&s.every(((e,t)=>s[t]===o[t]))||this._reloadAllNodes()}_rangeInfosChanged(e){null!=e&&e.length>0&&r.getLogger(this).warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\")}_filterChange(){this.loadedGraphics.forEachNode((e=>this._filterNode(e)))}_reloadAllNodes(){this._removeAllNodeData(),this._controller&&this._controller.restartNodeLoading()}_filterNode(e){const r=this.parsedDefinitionExpression,i=this._excludeObjectIdsSorted,s=this._getObjectIdField();for(const o of e.graphics){const e=o.visible,a=!r||this._evaluateClause(r,o),n=null==i||t(i,o.attributes[s])<0;o.visible=a&&n,e!==o.visible&&(ge.graphic=o,ge.property=\"visible\",ge.oldValue=e,ge.newValue=o.visible,this.processor.graphicsCore.graphicUpdateHandler(ge))}}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new j(e)}queryFeatures(e,t){return this._queryEngine.executeQuery(this._ensureQuery(e),t?.signal)}queryObjectIds(e,t){return this._queryEngine.executeQueryForIds(this._ensureQuery(e),t?.signal)}queryFeatureCount(e,t){return this._queryEngine.executeQueryForCount(this._ensureQuery(e),t?.signal)}queryExtent(e,t){return this._queryEngine.executeQueryForExtent(this._ensureQuery(e),t?.signal)}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():j.from(e))}_setupQueryEngine(){const e=()=>this.processor.featureStore;this._queryEngine=new S({context:{spatialReference:this.view.spatialReference,layer:this.layer,scheduler:this.view.resourceController.scheduler,get featureStore(){return e()},hasZ:this.hasZ,hasM:this.hasM},priority:re.FEATURE_QUERY_ENGINE})}get usedMemory(){return this.processor?.graphicsCore?.usedMemory??0}get unloadedMemory(){return.8*((this._controller?.unloadedMemoryEstimate??0)+(this.processor?.graphicsCore?.unprocessedMemoryEstimate??0))}get ignoresMemoryFactor(){return this._controller&&this._controller.fixedFeatureTarget}async _handleEdits(e){const t=this._attributeEditingContext,r=await A(t,e);P(t,r)}get _attributeEditingContext(){const e=this._getObjectIdField(),t=this._getGlobalIdField();return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:e,globalIdField:t,forEachNode:e=>this.loadedGraphics.forEachNode((t=>e(t.node,t.featureIds))),attributeStorageInfo:this.i3slayer.attributeStorageInfo??[],i3sOverrides:this._i3sOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(t,r,i)=>{this._setAttributeData(t,r);const s=this.loadedGraphics.getNode(t);if(null!=i){const t=this.loadedGraphics.get(i.attributes[e]);null!=t&&this.processor.graphicsCore.recreateGraphics([t])}else null!=s&&this.processor.graphicsCore.recreateGraphics(s.graphics)},clearMemCache:()=>{}}}get performanceInfo(){return new B(this.usedMemory,this.loadedGraphics.length,-1,this.maximumNumberOfFeatures,this.loadedGraphics.nodeCount,this.processor.graphicsCore.performanceInfo)}get test(){}};e([l()],oe.prototype,\"processor\",void 0),e([l({type:N})],oe.prototype,\"filter\",void 0),e([l()],oe.prototype,\"loadedGraphics\",void 0),e([l()],oe.prototype,\"i3slayer\",null),e([l()],oe.prototype,\"_controller\",void 0),e([l()],oe.prototype,\"updating\",void 0),e([l()],oe.prototype,\"suspended\",void 0),e([l()],oe.prototype,\"holeFilling\",void 0),e([l(Y)],oe.prototype,\"updatingProgress\",void 0),e([l()],oe.prototype,\"updatingProgressValue\",null),e([l(ie.requiredFields)],oe.prototype,\"requiredFields\",null),e([l(ie.availableFields)],oe.prototype,\"availableFields\",void 0),e([l()],oe.prototype,\"_fieldsHelper\",void 0),e([l({type:Number})],oe.prototype,\"maximumNumberOfFeatures\",null),e([l({readOnly:!0})],oe.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([l()],oe.prototype,\"_excludeObjectIdsSorted\",null),e([l({readOnly:!0})],oe.prototype,\"lodFactor\",null),e([l({readOnly:!0})],oe.prototype,\"hasM\",null),e([l({readOnly:!0})],oe.prototype,\"hasZ\",null),e([l()],oe.prototype,\"contentVisible\",null),e([l({readOnly:!0})],oe.prototype,\"legendEnabled\",null),oe=e([d(\"esri.views.3d.layers.SceneLayerGraphicsView3D\")],oe);const ae=oe;function ne(e){return\"pointData\"in e}function le(e){return\"geometryBuffer\"in e&&null!==e.geometryBuffer}function de(e,t,r){const i=t.attributeInfo;if(null==i?.loadedAttributes||null==i.attributeData)return!1;let s=!1;for(const{name:o}of i.loadedAttributes)if(i.attributeData[o]){const t=q(i.attributeData[o],r);t!==e.attributes[o]&&(e.attributes[o]=t,s=!0)}return s}function ue(e){const t=e.attributeInfo,r=e.node.index;if(null!=t?.loadedAttributes&&null!=t.attributeData)for(let i=0;i<e.graphics.length;i++){const s=e.graphics[i];if(s.nodeIndex===r){s.attributes||(s.attributes={});for(const{name:e}of t.loadedAttributes)t.attributeData[e]&&(s.attributes[e]=q(t.attributeData[e],i))}}}function he(e,t){return e.xmin-=t,e.ymin-=t,e.xmax+=t,e.ymax+=t,null!=e.zmin&&null!=e.zmax&&(e.zmin-=t,e.zmax+=t),null!=e.mmin&&null!=e.mmax&&(e.mmin-=t,e.mmax+=t),e}const pe={2:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0]}}},3:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0,0]}}}},ce=p(),ge={graphic:null,property:null,oldValue:null,newValue:null};export{ae as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Logger.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=t=>{let p=class extends t{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&e.getLogger(this).error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&e.getLogger(this).error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer?.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,{fieldsIndex:this.i3slayer.fieldsIndex});if(!r.isStandardized)return e.getLogger(this).error(\"definitionExpression is using non standard function\"),null;const i=[],s=r.fieldNames;return n(s,this.i3slayer.fields,{missingFields:i}),i.length>0?(e.getLogger(this).error(`definitionExpression references unknown fields: ${i.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return e.getLogger(this).error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{t as DefinitionExpressionSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getTimeOperator as i}from\"../../../../layers/graphics/data/timeSupport.js\";import s from\"../../../../layers/support/FeatureFilter.js\";import{combineTimeExtent as n}from\"../../../../layers/support/timeSupport.js\";import{filterInPlace as o,getCachedAttributeValue as l}from\"../i3s/I3SUtil.js\";const u=i=>{let o=class extends i{get timeExtent(){return n(this.i3slayer,this.view?.timeExtent,this._get(\"timeExtent\"))}get mergedFilter(){const{filter:t,timeExtent:e}=this;if(null==e)return t;const r=t?.clone()??new s;return null!=e&&(r.timeExtent=r.timeExtent?.intersection(e)??e),r}getTimeFilterDependencies(){const{timeInfo:t}=this.i3slayer;if(null==t)return[];const{startField:e,endField:r}=t;return[e,r]}addTimeFilter(t,e){if(null==e)return;const{timeInfo:r}=this.i3slayer;if(null==r)return;const{startField:i,endField:s,useTime:n}=r;if(!n||null==i&&null==s)return;const o=r.toJSON(),l=e.toJSON();t.push(((t,e)=>a(t,e,o,l)))}};return t([e({readOnly:!0})],o.prototype,\"timeExtent\",null),t([e()],o.prototype,\"mergedFilter\",null),o=t([r(\"esri.views.3d.layers.support.TemporalSceneLayerView\")],o),o};function a(t,e,r,s){const n=e.attributeInfo?.attributeData;if(null==n)return;const{startTimeField:l,endTimeField:u}=r;if(!!(null!=l&&null==n[l]||null!=u&&null==n[u]))return;const a=i(r,s,new m(n));if(null==a)return;const{featureIds:p}=e;o(t,p,a)}class m{constructor(t){this.attributeData=t}getAttribute(t,e){return l(this.attributeData[e],t)}getAttributeAsTimestamp(t,e){const r=this.getAttribute(t,e);return\"string\"==typeof r?new Date(r).getTime():\"number\"==typeof r||null==r?r:null}}export{u as TemporalSceneLayerView};\n"],"names":["n","t","u","r","e","constructor","super","dracoDecompressPointCloudData","geometryBuffer","hasInitialize","i","this","_updateAndCompare","_notifyUpdated","_nodes","Map","_graphics","_duplicates","clear","size","toArray","emit","added","removed","length","get","getNode","hasNode","has","nodes","values","addNode","set","s","graphics","Set","o","objectId","h","add","push","nodeIndex","_updateForeignGraphics","filter","removeNode","delete","indexOf","splice","node","level","forEach","index","Array","from","find","some","forEachNode","nodeCount","_checkInvariants","_e$get","ie","T","se","featureIds","attributeInfo","oe","W","U","k","D","X","arguments","type","_queryEngine","_memCache","_interactiveEditingSessions","_pendingEditsQueue","Promise","resolve","loadedGraphics","L","loadedAttributes","attributeData","name","q","attributes","de","processor","graphicsCore","recreateGraphics","holeFilling","progressiveLoadFactor","supportsHeightUnitConversion","_coordinatesOutsideExtentErrors","_maxCoordinatesOutsideExtentErrors","tryRecycleWith","url","layer","_i3sOverrides","isEmpty","load","then","_this$view$resourceCo","R","destroy","view","resourceController","memoryController","V","_setupQueryEngine","resetObjectStates","initialize","_this$view$resourceCo2","_this$processor$eleva","addResolvingPromise","indexInfo","M","spatialReference","viewingMode","_fieldsHelper","z","layerView","_updatingHandles","rangeInfos","_rangeInfosChanged","renderer","_rendererChange","parsedDefinitionExpression","_excludeObjectIdsSorted","_filterChange","addHandles","Z","I3S_TREE_SHOW_TILES","_treeDebugger","_controller","crsIndex","_ref","I3STreeDebugger","lv","nodeSR","_set","F","owner","preferredUpdatePolicy","J","ASYNC","scaleVisibilityEnabled","filterVisibilityEnabled","timeExtentEnabled","frustumVisibilityEnabled","elevationAlignmentEnabled","elevationFeatureExpressionEnabled","setUidToIdOnAdd","dataExtent","fullExtent","updateClippingExtent","_updateClippingExtent","elevationAlignment","events","on","_ref2","extent","updateElevationChanged","_verticalScale","b","when","newCache","concat","uid","w","H","geometryDefinitions","_worker","C","immediate","schedule","addPromise","result","_handleEdits","maximumNumberOfFeatures","featureTarget","suspended","_removeAllNodeData","i3slayer","updatingProgressValue","_this$_controller$upd","_this$_controller","updatingProgress","requiredFields","_this$_fieldsHelper$r","_this$_fieldsHelper","_this$processor","_e$maximumNumberOfFea","displayFeatureLimit","_override","fixedFeatureTarget","_clearOverride","maximumNumberOfFeaturesExceeded","_this$_controller2","useMaximumNumberOfFeatures","leavesReached","excludeObjectIds","sort","lodFactor","semantic","qualitySettings","sceneService","point","hasM","hasZ","contentVisible","_this$_controller3","rootNodeVisible","legendEnabled","_this$i3slayer","whenGraphicAttributes","Q","_getObjectIdField","getHit","_t$attributes","E","sourceLayer","graphic","whenGraphicBounds","computeAttachmentOrigin","isUpdating","_this$_controller4","_this$processor2","_this$_fieldsHelper2","updating","layerFilterUpdating","highlight","objectIdField","te","updatePolicy","effectiveUpdatePolicy","createInteractiveEditSession","G","_attributeEditingContext","_decompressBinaryPointData","invoke","Error","positionData","positions","le","ne","getLogger","error","id","xmin","ymin","xmax","ymax","zmin","zmax","mmin","mmax","he","clone","pointPositions","a","_extractBinaryPointPositions","_extractLegacyPointPositions","_validatePositions","l","crsVertex","d","c","_createGraphics","p","attributeDataInfo","applyAttributeOverrides","numFeatures","_updateNodeMemory","ue","_computeObb","updateVisibility","isGeometryVisible","_cacheNodeData","geometry","g","_stage","renderView","olidRenderHelper","O","map","_this$view$popup","setUidToObjectAndLayerId","popupEnabled","ee","popup","defaultPopupTemplateEnabled","resources","updateLoadStatus","_filterNode","update","isGeographic","renderSpatialReference","serviceObbInIndexSR","K","$","center","ce","isNodeLoaded","isNodeReloading","updateNodeState","f","Math","abs","_","pointData","_t$geometries$","_t$geometries","_n$params$vertexAttri","_n$params$vertexAttri2","featureDataPosition","geometries","pe","params","vertexAttributes","position","NaN","Number","isNaN","m","y","I","ge","property","oldValue","newValue","graphicUpdateHandler","visible","memory","usedMemoryPerGraphic","reduce","x","put","_getMemCacheKey","_removeNodeStageData","loadCachedNodeData","_this$_memCache","pop","addCachedNodeData","getLoadedNodeIds","getVisibleNodes","getLoadedNodeIndices","getLoadedAttributes","getAttributeData","_setAttributeData","_attributeValuesChanged","updateAttributes","labelsEnabled","updateLabelingInfo","refreshFilter","updateClippingArea","v","_getGlobalIdField","_this$layer$associate","associatedLayer","globalIdField","fieldsIndex","collectRequiredFields","every","_reloadAllNodes","warn","restartNodeLoading","_evaluateClause","createQuery","outFields","returnGeometry","outSpatialReference","j","queryFeatures","executeQuery","_ensureQuery","signal","queryObjectIds","executeQueryForIds","queryFeatureCount","executeQueryForCount","queryExtent","executeQueryForExtent","_addDefinitionExpressionToQuery","featureStore","S","context","scheduler","priority","re","FEATURE_QUERY_ENGINE","usedMemory","_this$processor$graph","_this$processor3","unloadedMemory","_this$_controller$unl","_this$_controller5","_this$processor$graph2","_this$processor4","unloadedMemoryEstimate","unprocessedMemoryEstimate","ignoresMemoryFactor","A","P","_this$i3slayer$attrib","sessions","attributeStorageInfo","i3sOverrides","setAttributeData","clearMemCache","performanceInfo","B","test","prototype","N","Y","availableFields","readOnly","ae","_definitionExpressionErrors","_maxDefinitionExpressionErrors","logError","definitionExpression","create","isStandardized","fieldNames","fields","missingFields","join","definitionExpressionFields","testFeature","where","timeExtent","_this$view","_get","mergedFilter","_t$clone","_r$timeExtent$interse","_r$timeExtent","intersection","getTimeFilterDependencies","timeInfo","startField","endField","addTimeFilter","useTime","toJSON","_e$attributeInfo","startTimeField","endTimeField","getAttribute","getAttributeAsTimestamp","Date","getTime"],"sourceRoot":""}