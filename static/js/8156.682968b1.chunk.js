"use strict";(self.webpackChunksc_viaduct=self.webpackChunksc_viaduct||[]).push([[8156],{98156:(t,e,n)=>{n.d(e,{getTimeSliderSettingsFromWebDocument:()=>f,YU:()=>p,h3:()=>v});var i=n(18690),l=(n(63241),n(53084)),u=(n(76460),n(18288)),r=n(59187),o=n(2515),s=n(72027);function a(t){return void 0!==t.timeInfo}async function d(t,e){var n,l;return null!==(n=null===(l=t.widgets)||void 0===l||null===(l=l.timeSlider)||void 0===l?void 0:l.fullTimeExtent)&&void 0!==n?n:async function(t,e){if(0===t.length)return r.A.allTime;await Promise.all(t.map((t=>t.load({signal:e}))));const n=t.filter(a),l=t.filter((t=>!a(t)&&null!=t.visibilityTimeExtent));if(0===n.length&&0===l.length)return r.A.allTime;const u=[],o=[];for(const i of n){var s;"feature"!==(null===i||void 0===i?void 0:i.type)&&"map-image"!==(null===i||void 0===i?void 0:i.type)||null===(s=i.timeInfo)||void 0===s||!s.hasLiveData?o.push(i):u.push(i)}const d=t=>null==t||t.isAllTime,m=[...o.map((t=>{var e,n;const i=null===(e=t.timeInfo)||void 0===e?void 0:e.fullTimeExtent,{visibilityTimeExtent:l}=t;return null!==(n=null===i||void 0===i?void 0:i.intersection(l))&&void 0!==n?n:l})),...l.map((t=>t.visibilityTimeExtent))];if(m.some(d))return r.A.allTime;const c=u.map((async t=>{var n,i,l,u;const r=null!==(n=null===(i=await t.fetchRecomputedExtents({signal:e}))||void 0===i?void 0:i.timeExtent)&&void 0!==n?n:null===(l=t.timeInfo)||void 0===l?void 0:l.fullTimeExtent,{visibilityTimeExtent:o}=t;return null!==(u=null===r||void 0===r?void 0:r.intersection(o))&&void 0!==u?u:o})),f=(await Promise.allSettled(c)).map((t=>"fulfilled"===t.status?t.value:null));if(f.some(d))return r.A.allTime;const v=[...f,...m].filter(i.Ru);return 0===v.length?r.A.allTime:v.reduce(((t,e)=>t.union(e)))}(t.allLayers,e)}function m(t){const{numStops:e,stopInterval:n,stops:i}=t;return i?{dates:(0,l.o8)(i)}:n?{interval:n.clone()}:{count:null!==e&&void 0!==e?e:5}}function c(t,e){var n;const i=t.currentTimeExtent;if(!i)return null;const{start:l,end:u}=i,o=null!==(n=null!==l&&void 0!==l?l:u)&&void 0!==n?n:null;switch(e){case"time-window":return new r.A({start:l,end:u});case"cumulative-from-start":return new r.A({start:null,end:o});case"cumulative-from-end":return new r.A({start:o,end:null});case"instant":return new r.A({start:o,end:o})}}async function f(t,e){var n,i;if(!(0,o.r)(t)&&!function(t){return null!=t&&"object"==typeof t&&s.X in t}(t))return null;await t.load({signal:e});const l=null===t||void 0===t||null===(n=t.widgets)||void 0===n?void 0:n.timeSlider;if(!l)return null;const u=await d(t,e),r=l.loop,a=function(t){var e;const n=null!==(e=t.numThumbs)&&void 0!==e?e:2,i=t.currentTimeExtent;if(i){const{start:t,end:e}=i;return null!=t&&null!=e&&t.getTime()===e.getTime()?"instant":2===n?"time-window":null==t||0===t.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===n?"time-window":"cumulative-from-start"}(l);return{fullTimeExtent:u,loop:r,mode:a,playRate:null!==(i=l.stopDelay)&&void 0!==i?i:2e3,stops:m(l),timeExtent:c(l,a)}}function v(t){if(!t)return t;const{start:e,end:n}=t;return new r.A({start:null!=e?(0,u.S1)(e,-e.getTimezoneOffset(),"minutes"):e,end:null!=n?(0,u.S1)(n,-n.getTimezoneOffset(),"minutes"):n})}function p(t){if(!t)return t;const{start:e,end:n}=t;return new r.A({start:null!=e?(0,u.S1)(e,e.getTimezoneOffset(),"minutes"):e,end:null!=n?(0,u.S1)(n,n.getTimezoneOffset(),"minutes"):n})}},2515:(t,e,n)=>{n.d(e,{r:()=>u});var i=n(19898);class l extends i.R{constructor(t,e){super(t,e,"webmap")}}function u(t){return null!=t&&"object"==typeof t&&"declaredClass"in t&&"esri.WebMap"===t.declaredClass}new l(2,32)}}]);
//# sourceMappingURL=8156.682968b1.chunk.js.map