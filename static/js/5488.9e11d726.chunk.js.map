{"version":3,"file":"static/js/5488.9e11d726.chunk.js","mappings":"oRAI65B,SAASA,EAAEC,GAAG,MAAMC,EAAE,IAAIC,EAAAA,GAAED,EAAEE,QAAQC,EAAAA,EAAEJ,GAAG,MAAMK,OAAON,EAAEO,SAASC,GAAGN,EAAEF,EAAES,SAASC,IAAI,IAAIC,EAAAA,EAAE,aAAa,CAACV,EAACW,KAAA,IAAEC,OAAOC,GAAEF,EAAA,OAAGG,EAAAA,EAAAA,IAAEC,EAAEF,EAAEG,WAAWhB,EAAEiB,OAAO,IAAG,IAAIP,EAAAA,EAAE,QAAQ,CAACI,EAACI,KAAA,IAAEN,OAAOZ,GAAEkB,EAAA,OAAGlB,EAAEmB,gBAAgB,IAAG,IAAIC,EAAAA,EAAE,aAAa,CAACN,EAACO,KAAA,IAAET,OAAOZ,GAAEqB,EAAA,OAAGP,EAAEQ,UAAUtB,EAAEuB,UAAU,IAAG,IAAIC,EAAAA,EAAE,cAAc,CAACV,EAACW,KAAA,IAAEb,OAAOZ,GAAEyB,EAAA,OAAGZ,EAAAA,EAAAA,IAAEa,EAAE,EAAE1B,EAAE2B,aAAa,GAAG,EAAE3B,EAAE2B,aAAa,GAAG,KAAI1B,EAAE2B,WAAWnB,IAAIoB,EAAAA,EAAEC,MAAM,QAAQ7B,EAAE2B,WAAWnB,IAAIoB,EAAAA,EAAEE,IAAI,QAAQ/B,EAAEgC,YAAY/B,EAAE2B,WAAWnB,IAAIoB,EAAAA,EAAEI,SAAS,QAAQhC,EAAE2B,WAAWnB,IAAIoB,EAAAA,EAAEK,OAAO,SAASjC,EAAE2B,WAAWnB,IAAIoB,EAAAA,EAAEM,QAAQ,QAAQlC,EAAEmC,SAAS3B,IAAI,KAAK,QAAQR,EAAEmC,SAAS3B,IAAI,aAAa,QAAQR,EAAEmC,SAAS3B,IAAI,WAAW,QAAQR,EAAEmC,SAAS3B,IAAI,qBAAqB,QAAQR,EAAEmC,SAAS3B,IAAI,mBAAmB,QAAQR,EAAEmC,SAAS3B,IAAI,iBAAiB,QAAQ,MAAM4B,GAAGrC,EAAEgC,UAAU,OAAOjC,EAAEuC,KAAK7B,KAAI8B,EAAAA,EAAAA,GAACC,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,q0DAQnrDC,EAAAA,EAAAA,IAAEL,GAAEE,EAAAA,EAAAA,GAACI,IAAAA,GAAAF,EAAAA,EAAAA,GAAA,uCACLC,EAAAA,EAAAA,IAAEL,GAAEE,EAAAA,EAAAA,GAACK,IAAAA,GAAAH,EAAAA,EAAAA,GAAA,sCAsCNlC,EAAEC,SAASC,IAAI,IAAIW,EAAAA,EAAE,uBAAuB,CAACN,EAAEd,IAAIA,EAAEY,OAAOiC,uBAAuBtC,EAAEuC,KAAKrC,KAAI8B,EAAAA,EAAAA,GAACQ,IAAAA,GAAAN,EAAAA,EAAAA,GAAA,2rBAYhGlC,EAAE+B,KAAK7B,KAAI8B,EAAAA,EAAAA,GAACS,IAAAA,GAAAP,EAAAA,EAAAA,GAAA,+qBAsBwDxC,CAAC,CAAC,MAAMyB,GAAEzB,EAAAA,EAAAA,MAAIc,GAAEf,EAAAA,EAAAA,MAAIO,EAAE0C,OAAOC,OAAOD,OAAOE,eAAe,CAACC,UAAU,KAAKC,MAAMtD,GAAGuD,OAAOC,YAAY,CAACC,MAAM,W,kSCjF+qC,MAAMC,GAAE3C,EAAAA,EAAAA,IAAE,GAAG,SAAS4C,EAAE5C,GAAG,MAAMU,EAAE,IAAImC,EAAAA,GAAEnC,EAAErB,QAAQ0B,EAAAA,GAAGL,EAAErB,QAAQyD,EAAAA,EAAE9C,GAAG,MAAMd,EAAEwB,EAAElB,SAAS,GAAGQ,EAAE+C,0BAA0B/C,EAAEgD,sBAAsB,GAAG9D,EAAEQ,SAASC,IAAI,IAAIsD,EAAAA,EAAE,oBAAoB,CAACvC,EAAExB,IAAIc,EAAEgD,sBAAsB,EAAE9D,EAAEY,OAAOoD,yBAAyBxC,EAAEyC,sBAAsB,EAAEjE,EAAEY,OAAOoD,yBAAyBxC,EAAE0C,yBAAyBjD,WAAWjB,EAAE8C,KAAKrC,KAAI0D,EAAAA,EAAAA,GAAC3B,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,iMAK5sD3B,EAAEkB,UAAU,CAAC,MAAMlB,EAAEA,CAACA,EAAEU,EAAExB,KAAI0C,EAAAA,EAAAA,GAAE5B,EAAEU,EAAEyC,qBAAqBjE,EAAEY,OAAOI,YAAYQ,EAAEA,CAACV,EAAEU,KAAIkB,EAAAA,EAAAA,GAAE5B,EAAE,CAAC,EAAE,EAAE,GAAGU,EAAEZ,OAAOI,YAAYhB,EAAEQ,SAASC,IAAI,IAAI2D,EAAAA,EAAE,wBAAwB,CAACpE,EAAEC,KAAKa,EAAEuD,EAAErE,EAAEC,GAAGuB,EAAE8C,EAAErE,IAAGmB,EAAAA,EAAAA,GAAEkD,EAAEA,EAAED,IAAGjE,EAAAA,EAAAA,GAAEmE,EAAED,GAAGC,EAAE,IAAG1D,EAAAA,EAAAA,GAAEyD,GAAGC,KAAK,IAAIC,EAAAA,EAAE,gBAAgB,CAAC1D,EAAEd,IAAIwB,EAAE6C,EAAErE,KAAK,IAAI+D,EAAAA,EAAE,8BAA8B,CAACjD,EAAEU,IAAI,EAAEiD,KAAKC,IAAI,GAAEzE,EAAAA,EAAAA,GAAEuB,EAAEZ,OAAO+D,IAAI7D,EAAEmD,sBAAsBzC,EAAEZ,OAAOgE,sBAAqB/D,EAAAA,EAAAA,GAAEC,EAAEmD,yBAAyBjE,EAAE8C,KAAKrC,KAAI0D,EAAAA,EAAAA,GAACxB,IAAAA,GAAAF,EAAAA,EAAAA,GAAA,ivBAcza,MAAMzC,EAAE8C,KAAKrC,KAAI0D,EAAAA,EAAAA,GAACvB,IAAAA,GAAAH,EAAAA,EAAAA,GAAA,2HAEjB,GAAG3B,EAAE+D,uBAAuB7E,EAAEQ,SAASC,IAAI,IAAIsD,EAAAA,EAAE,oBAAoB,CAACjD,EAAEU,IAAI,EAAEA,EAAEZ,OAAOoD,yBAAyBlD,EAAEgE,wBAAwB9E,EAAE8C,KAAKrC,KAAI0D,EAAAA,EAAAA,GAACpB,IAAAA,GAAAN,EAAAA,EAAAA,GAAA,2MAKrJ3B,EAAEiE,wBAAwB/E,EAAEQ,SAASC,IAAI,IAAIsD,EAAAA,EAAE,uBAAuB,CAACjD,EAAEU,IAAIA,EAAEZ,OAAOiC,uBAAuB7C,EAAE8C,KAAKrC,KAAI0D,EAAAA,EAAAA,GAACnB,IAAAA,GAAAP,EAAAA,EAAAA,GAAA,uMAGxH3B,EAAE+C,0BAA0B/C,EAAEiE,wBAAwB/E,EAAE8C,KAAKrC,KAAI0D,EAAAA,EAAAA,GAACa,IAAAA,GAAAvC,EAAAA,EAAAA,GAAA,0LAKpEzC,EAAEsC,KAAK7B,KAAI0D,EAAAA,EAAAA,GAACc,IAAAA,GAAAxC,EAAAA,EAAAA,GAAA,uPAQU3B,EAAEgD,sBAAsB,CAAC9D,EAAEQ,SAASC,IAAI,IAAIyE,EAAAA,EAAE,eAAepE,GAAGqE,EAAErE,KAAK,IAAIsD,EAAAA,EAAE,eAAe,CAACtD,EAAEU,IAAI4D,EAAEtE,EAAEmD,qBAAqBnD,EAAEuE,mBAAmBC,kBAAkBxE,EAAEmD,qBAAqBI,GAAG7C,EAAEZ,OAAOI,eAAe,MAAMQ,EAAEV,EAAEkB,WAAUmC,EAAAA,EAAAA,GAACoB,IAAAA,GAAA9C,EAAAA,EAAAA,GAAA,sCAAgC0B,EAAAA,EAAAA,GAACqB,IAAAA,GAAA/C,EAAAA,EAAAA,GAAA,uBAAkBzC,EAAEsC,KAAK7B,KAAI0D,EAAAA,EAAAA,GAACsB,IAAAA,GAAAhD,EAAAA,EAAAA,GAAA,6ZAGhNjB,GAE7C,CAAC,OAAOV,EAAE+D,uBAAuB7E,EAAEQ,SAASC,IAAI,IAAIyE,EAAAA,EAAE,eAAepE,GAAGqE,EAAErE,KAAK,IAAIsD,EAAAA,EAAE,uBAAuB,CAACtD,EAAEU,IAaN,SAAWV,EAAEU,GAAG,OAAOkB,EAAAA,EAAAA,IAAEgD,EAAAA,EAAAA,GAAEC,GAAG7E,EAAE8E,oBAAoBpE,EAAEZ,OAAOI,YAAY2E,EAAE,IAAG1F,EAAAA,EAAAA,GAAEa,EAAE8E,oBAAoB9E,EAAEgE,qBAAqBa,CAAC,CAbpHE,CAAE/E,EAAEU,MAAMxB,EAAEsC,KAAK7B,KAAI0D,EAAAA,EAAAA,GAAC2B,IAAAA,GAAArD,EAAAA,EAAAA,GAAA,qYAGnI3B,EAAE+C,2BAA2B7D,EAAEQ,SAASC,IAAI,IAAIyE,EAAAA,EAAE,eAAepE,GAAGqE,EAAErE,KAAK,IAAIsD,EAAAA,EAAE,qBAAqB,CAACtD,EAAEU,IAUyH,SAAWV,EAAEU,GAAG,MAAMxB,GAAE+F,EAAAA,EAAAA,IAAEjF,EAAEoD,yBAAyB,GAAGG,GAAGjD,EAAEN,EAAEuE,mBAAmBC,kBAAkBtF,EAAEgG,GAAGnF,GAAET,EAAAA,EAAAA,GAAEkE,EAAExD,EAAEoD,yBAAyB+B,QAAQhG,GAAEC,EAAAA,EAAAA,GAAEmE,EAAEjD,EAAEP,GAAG,OAAOT,EAAAA,EAAAA,GAAEH,EAAEA,GAAGmF,EAAEtE,EAAEoD,yBAAyBjD,OAAOhB,EAAEuB,EAAEZ,OAAOI,WAAW,CAV1VkF,CAAEpF,EAAEU,KAAK,IAAIgD,EAAAA,EAAE,qBAAqB,CAAC1D,EAAEU,IAUoT,SAAWV,EAAEU,GAAG,MAAMxB,GAAEuC,EAAAA,EAAAA,GAAE8B,EAAEvD,EAAEoD,yBAAyBjD,QAAQ,OAAOH,EAAEuE,mBAAmBc,YAAYnG,EAAE,IAAG0C,EAAAA,EAAAA,GAAE1C,EAAEA,EAAEwB,EAAEZ,OAAOI,WAAW,CAVtboF,CAAEtF,EAAEU,KAAK,IAAIgD,EAAAA,EAAE,mBAAmB,CAAC1D,EAAEU,IAUkZ,SAAWV,EAAEU,GAAG,MAAMxB,GAAEU,EAAAA,EAAAA,GAAE2D,EAAEvD,EAAEoD,yBAAyBjD,OAAOH,EAAEoD,yBAAyB+B,QAAQ,OAAOnF,EAAEuE,mBAAmBc,YAAYnG,EAAE,IAAG0C,EAAAA,EAAAA,GAAE1C,EAAEA,EAAEwB,EAAEZ,OAAOI,WAAW,CAVtjBqF,CAAEvF,EAAEU,MAAMxB,EAAEsC,KAAK7B,KAAI0D,EAAAA,EAAAA,GAACmC,IAAAA,GAAA7D,EAAAA,EAAAA,GAAA,2YAK9R3B,EAAEiE,wBAAwB/E,EAAEQ,SAASC,IAAI,IAAIyE,EAAAA,EAAE,eAAepE,GAAGqE,EAAErE,KAAK,IAAI0D,EAAAA,EAAE,uBAAuB,CAAC1D,EAAEU,KAAIkB,EAAAA,EAAAA,GAAE2B,EAAEvD,EAAEyF,eAAe/E,EAAEZ,OAAOI,cAAc,IAAIwD,EAAAA,EAAE,qBAAqB,CAAC1D,EAAEU,KAAIkB,EAAAA,EAAAA,GAAE2B,EAAEvD,EAAE0F,aAAahF,EAAEZ,OAAOI,cAAc,IAAIwD,EAAAA,EAAE,2BAA2B,CAAC1D,EAAEU,MAAKe,EAAAA,EAAAA,GAAEgC,EAAEzD,EAAE2F,sBAAsBR,QAAQ1B,EAAE,GAAG,GAAEnE,EAAAA,EAAAA,GAAEiE,GAAE3C,EAAAA,EAAAA,GAAE6C,EAAEA,EAAE/C,EAAEZ,OAAOI,gBAAgB,IAAI+C,EAAAA,EAAE,wBAAwBjD,GAAGA,EAAE4F,wBAAwB1G,EAAEsC,KAAK7B,KAAI0D,EAAAA,EAAAA,GAACwC,IAAAA,GAAAlE,EAAAA,EAAAA,GAAA,mdAKlazC,EAAEsC,KAAK7B,KAAI0D,EAAAA,EAAAA,GAACyC,IAAAA,GAAAnE,EAAAA,EAAAA,GAAA,sEAAiEjB,CAAC,CAAC,SAAS2D,EAAEnF,GAAG,OAAOwB,EAAAA,EAAAA,IAAEqF,EAAEpC,KAAKqC,IAAI9G,EAAE+G,aAAatC,KAAKqC,IAAIrC,KAAKC,IAAI,EAAE1E,EAAE+G,aAAYjG,EAAAA,EAAAA,IAAE,KAAK,CAAspB,SAASsE,EAAEtE,EAAEU,EAAExB,GAAG,OAAO0C,EAAAA,EAAAA,GAAEsE,EAAElG,EAAEd,IAAGuC,EAAAA,EAAAA,GAAEgC,EAAE/C,GAAG+C,EAAE,GAAG,GAAE7C,EAAAA,EAAAA,GAAE6C,EAAEA,EAAEvE,IAAGiH,EAAAA,EAAAA,IAAED,EAAEzC,EAAE2C,EAAE,CAAC,MAAML,GAAE7G,EAAAA,EAAAA,MAAIqE,GAAEhC,EAAAA,EAAAA,MAAIkC,GAAEhE,EAAAA,EAAAA,MAAIyF,GAAE3D,EAAAA,EAAAA,MAAIiC,GAAEjC,EAAAA,EAAAA,MAAI2E,GAAE3E,EAAAA,EAAAA,MAAI6E,GAAEnH,EAAAA,EAAAA,MAAI4F,GAAE5E,EAAAA,EAAAA,KAAIoG,EAAElE,OAAOC,OAAOD,OAAOE,eAAe,CAACC,UAAU,KAAKC,MAAMK,EAAE0D,mBAAmB3D,GAAGH,OAAOC,YAAY,CAACC,MAAM,W,8TC5DnhB,MAAMpD,UAAUH,EAAAA,EAAEoH,WAAAA,GAAcC,SAASC,WAAWC,KAAKC,YAAWlF,EAAAA,EAAAA,IAAE,EAAE,EAAE,GAAGiF,KAAKE,WAAW,EAAEF,KAAKG,WAAUpF,EAAAA,EAAAA,IAAE,EAAE,GAAG,GAAGiF,KAAKlG,UAAU,EAAEkG,KAAKI,YAAY,EAAEJ,KAAKK,YAAY,IAAIL,KAAKM,yBAAyB,EAAEN,KAAKT,aAAYjG,EAAAA,EAAAA,IAAE,GAAG0G,KAAK5B,qBAAoB5F,EAAAA,EAAAA,MAAIwH,KAAK1C,qBAAoB9E,EAAAA,EAAAA,MAAIwH,KAAKtD,0BAAyB1C,EAAAA,EAAAA,MAAIgG,KAAKf,uBAAsBjF,EAAAA,EAAAA,MAAIgG,KAAKd,qBAAqB,EAAEc,KAAKvD,sBAAqBjE,EAAAA,EAAAA,MAAIwH,KAAKjB,gBAAevG,EAAAA,EAAAA,MAAIwH,KAAKhB,cAAaxG,EAAAA,EAAAA,KAAG,EAAE,MAAM+F,UAAUrD,EAAAA,EAAE2E,WAAAA,CAAYvG,EAAEyB,EAAEvC,GAAGsH,MAAMxG,EAAEyB,EAAE,IAAI1B,EAAAA,EAAEO,EAAAA,GAAG,IAAI,kCAA6CpB,EAAE,E,0BCA3oB,MAAMI,UAAUS,EAAEwG,WAAAA,GAAcC,SAASC,WAAWC,KAAKvG,QAAOH,EAAAA,EAAAA,KAAG,EAAE,MAAMZ,UAAUqC,EAAAA,EAAE8E,WAAAA,CAAYvG,EAAEyB,EAAE1B,GAAGyG,MAAMxG,EAAEyB,EAAE,IAAItC,EAAAA,EAAEuB,EAAAA,GAAG,IAAI,kCAAgDX,EAAEO,EAAE,EAAE,MAAMA,EAAE,IAAI2G,IAAI,CAAC,CAAC/H,EAAAA,EAAE8B,MAAM,GAAG,CAAC9B,EAAAA,EAAE+B,IAAI,GAAG,CAAC/B,EAAAA,EAAEmC,QAAQ,GAAG,CAACnC,EAAAA,EAAEiC,SAAS,GAAG,CAACjC,EAAAA,EAAEkC,OAAO,K,qCCAqC,MAAMyD,EAAE0B,WAAAA,CAAYvG,GAAG0G,KAAKQ,oBAAoBlH,EAAE0G,KAAKS,SAAS,KAAKT,KAAKU,SAAQjI,EAAAA,EAAAA,MAAIuH,KAAKW,QAAO,EAAGX,KAAKY,OAAO,EAAEZ,KAAKa,KAAK,IAAI,CAAC,YAAIC,CAASxH,GAAG,MAAMd,GAAEuC,EAAAA,EAAAA,IAAE,EAAEzB,EAAEyH,QAAQ,IAAItI,EAAE,EAAE,IAAI,MAAMsC,KAAKzB,EAAEd,EAAEC,KAAKsC,EAAE,GAAGvC,EAAEC,KAAKsC,EAAE,GAAGvC,EAAEC,KAAKsC,EAAE,GAAGiF,KAAKgB,QAAQ,CAACxI,EAAE,CAAC,WAAIwI,CAAQxI,GAAG,GAAGwH,KAAKS,SAASjI,EAAEwH,KAAKS,SAASM,OAAO,EAAE,CAAC,MAAMvI,EAAEwH,KAAKS,SAAS,GAAGhI,EAAE,EAAEwE,KAAKgE,MAAMzI,EAAEuI,OAAO,EAAE,IAAGzH,EAAAA,EAAAA,GAAE0G,KAAKU,QAAQlI,EAAEC,GAAGD,EAAEC,EAAE,GAAGD,EAAEC,EAAE,GAAG,MAAMa,EAAAA,EAAAA,GAAE0G,KAAKU,QAAQ,EAAE,EAAE,GAAGV,KAAKW,QAAO,CAAE,CAAC,UAAIlH,GAAS,OAAOuG,KAAKU,OAAO,CAACQ,IAAAA,CAAK5H,GAAG,MAAMd,EAAEwH,KAAKmB,WAAW7H,GAAG,MAAMd,IAAIc,EAAE8H,QAAQ5I,GAAGc,EAAE+H,WAAW3I,EAAAA,GAAE4I,UAAU,EAAEtB,KAAKY,QAAQ,CAACW,OAAAA,GAAU,MAAMvB,KAAKa,MAAMb,KAAKa,KAAKU,SAAS,CAAC,WAAIC,GAAU,OAAOxB,KAAKQ,oBAAoBiB,cAAczH,EAAAA,GAAE0H,OAAOhE,EAAE3E,CAAC,CAACoI,UAAAA,CAAW7H,GAAE,IAAAqI,EAAC,OAAO,MAAM3B,KAAKS,SAAS,MAAe,QAATkB,EAAA3B,KAAKa,YAAI,IAAAc,IAAT3B,KAAKa,KAAOb,KAAK4B,WAAWtI,EAAE0G,KAAKS,WAAUT,KAAK6B,kBAAkB7B,KAAKa,KAAKb,KAAKS,UAAUT,KAAKa,KAAK,CAACe,UAAAA,CAAWtI,EAAEd,GAAG,MAAMC,EAAEuH,KAAK8B,kBAAkBtJ,GAAG,OAAOwH,KAAKW,QAAO,EAAG,IAAIlB,EAAAA,EAAEnG,EAAEM,EAAE,IAAI2G,IAAI,CAAC,CAAC,QAAOlH,EAAAA,EAAAA,GAAE2G,KAAKwB,YAAY,IAAIjB,IAAI,CAAC,CAAC,OAAOrF,EAAAA,EAAE6G,aAAazI,EAAEiF,EAAAA,GAAEyD,YAAYvJ,MAAM,CAACoJ,iBAAAA,CAAkBvI,EAAEd,GAAE,IAAAyJ,EAAC,IAAIjC,KAAKW,OAAO,OAAO,MAAMlI,EAAEuH,KAAK8B,kBAAkBtJ,GAA8B,QAA3ByJ,EAAA3I,EAAE4I,cAAcC,IAAI,eAAO,IAAAF,GAA3BA,EAA6BG,QAAQ3J,GAAGuH,KAAKW,QAAO,CAAE,CAACmB,iBAAAA,CAAkBrJ,GAAG,MAAMsC,EAAEtC,EAAE4J,QAAQ,CAAC/I,EAAEd,IAAIc,EAAEJ,EAAEV,IAAI,GAAGwH,KAAKY,OAAO7F,EAAE,MAAMf,EAAEgG,KAAKwB,QAAQc,aAAavH,GAAG1B,EAAE2G,KAAKU,QAAQ,IAAI7F,EAAE,EAAEjB,EAAE,EAAE,MAAM6F,EAAE,YAAYzF,EAAEgG,KAAKuC,cAAcC,KAAKxC,KAAKhG,QAAG,EAAO,IAAI,MAAMpB,KAAKH,EAAE,CAAC,IAAI,IAAIA,EAAE,EAAEA,EAAEG,EAAEmI,OAAOtI,GAAG,EAAE,CAAC,MAAMsC,GAAEzB,EAAAA,EAAAA,GAAEf,EAAEK,EAAEH,GAAGG,EAAEH,EAAE,GAAGG,EAAEH,EAAE,IAAI,IAAIA,EAAEmB,EAAEoG,KAAKQ,oBAAoBiC,YAAY1H,GAAGiF,KAAKQ,oBAAoB7B,YAAY5D,EAAEnB,GAAG,MAAMsB,EAAEL,EAAE,EAAEpC,EAAG,OAADgH,QAAC,IAADA,GAAAA,EAAIhH,EAAEyC,EAAEtC,EAAEmC,GAAG,MAAMrC,GAAEF,EAAAA,EAAAA,GAAED,EAAEwC,EAAE1B,GAAG,GAAGZ,EAAEG,EAAEmI,OAAO,EAAE,CAAC,IAAI,IAAIzH,EAAE,EAAEA,EAAE,EAAEA,IAAIU,EAAE0I,MAAMC,OAAOzH,EAAE5B,EAAEZ,GAAGsB,EAAE4I,QAAQC,UAAU3H,EAAE,GAAG,GAAGlB,EAAE4I,QAAQC,UAAU3H,EAAE,EAAE,GAAG,GAAGlB,EAAE4I,QAAQC,UAAU3H,EAAE,EAAE,EAAE,GAAGlB,EAAE4I,QAAQC,UAAU3H,EAAE,EAAE,GAAG,GAAGlB,EAAE4I,QAAQC,UAAU3H,EAAE,EAAE,EAAE,GAAGlB,EAAE4I,QAAQC,UAAU3H,EAAE,EAAE,EAAE,EAAE,CAAC,GAAGzC,EAAE,EAAE,IAAI,IAAIa,GAAG,EAAEA,EAAE,EAAEA,IAAIU,EAAE8I,IAAIH,OAAOzH,EAAE5B,EAAEZ,EAAE,CAACmC,GAAG3B,EAAEN,EAAE,CAAC,OAAOoB,EAAE+I,MAAM,CAACR,aAAAA,CAAcjJ,EAAEd,EAAEC,EAAEsC,EAAEf,GAAG,MAAMX,EAAE2G,KAAKQ,oBAAoB1C,kBAAkB9D,EAAEE,GAAG,GAAG1B,EAAEuC,EAAEgG,OAAO,EAAE,IAAI,IAAIlG,EAAE,EAAEA,EAAE,EAAEA,IAAIvB,EAAE0J,QAAQL,OAAOlK,EAAEoC,EAAExB,GAAG,GAAGb,EAAE,EAAE,IAAI,IAAIqC,GAAG,EAAEA,EAAE,EAAEA,IAAIvB,EAAE2J,MAAMN,OAAOlK,EAAEoC,EAAExB,EAAE,EAAE,SAASH,EAAEI,GAAG,OAAU,GAAGA,EAAEyH,OAAO,EAAE,GAAjB,CAAoB,CAAC,MAAM7G,GAAEzB,EAAAA,EAAAA,MAAIF,GAAEE,EAAAA,EAAAA,MAAIiF,GAAE7C,EAAAA,EAAAA,MAAIqI,MAAMtK,EAAAA,EAAE0B,OAAO4I,MAAMtK,EAAAA,EAAE2B,KAAK4I,MAAMvK,EAAAA,EAAE+B,SAASuI,MAAMtK,EAAAA,EAAE6B,UAAUyI,MAAMtK,EAAAA,EAAE8B,QAAQ3B,GAAE8B,EAAAA,EAAAA,MAAIqI,MAAMtK,EAAAA,EAAE0B,OAAO4I,MAAMtK,EAAAA,EAAE2B,KAAK4I,MAAMvK,EAAAA,EAAE+B,S,cCA5vF,MAAMrB,UAAUb,EAAAA,EAAEoH,WAAAA,GAAcC,SAASC,WAAWC,KAAKoD,wBAAuB,EAAGpD,KAAKxF,WAAU,CAAE,GAAEnB,EAAAA,EAAAA,GAAE,EAACb,EAAAA,EAAAA,MAAKc,EAAE+J,UAAU,8BAAyB,IAAQhK,EAAAA,EAAAA,GAAE,EAACb,EAAAA,EAAAA,MAAKc,EAAE+J,UAAU,iBAAY,GCA9H,MAAMzJ,UAAUpB,EAAEqH,WAAAA,GAAcC,SAASC,WAAWC,KAAK1D,uBAAsB,EAAG0D,KAAK3C,sBAAqB,EAAG2C,KAAK3D,0BAAyB,EAAG2D,KAAKzC,uBAAsB,CAAE,GAAEjE,EAAAA,EAAAA,GAAE,EAACU,EAAAA,EAAAA,MAAKJ,EAAEyJ,UAAU,6BAAwB,IAAQ/J,EAAAA,EAAAA,GAAE,EAACU,EAAAA,EAAAA,MAAKJ,EAAEyJ,UAAU,4BAAuB,IAAQ/J,EAAAA,EAAAA,GAAE,EAACU,EAAAA,EAAAA,MAAKJ,EAAEyJ,UAAU,gCAA2B,IAAQ/J,EAAAA,EAAAA,GAAE,EAACU,EAAAA,EAAAA,MAAKJ,EAAEyJ,UAAU,6BAAwB,G,qCCAohC,IAAI1G,EAAE,cAAc5D,EAAAA,EAAE8G,WAAAA,CAAYvG,GAAGwG,MAAMxG,GAAG0G,KAAKsD,SAAS/K,EAAAA,GAAEgL,WAAWvD,KAAKwD,SAAS,CAACC,SAAS,CAAClL,EAAAA,GAAEgL,WAAW,YAAYvD,KAAK0D,sBAAqB,EAAG1D,KAAK2D,eAAe,IAAIC,EAAE5D,KAAK6D,4BAA4B,IAAIjF,EAAEoB,KAAK8D,wBAAuB,EAAG9D,KAAK+D,uBAAsB,EAAG/D,KAAKgE,2BAA0B,EAAGhE,KAAKiE,wBAAuB,EAAGjE,KAAKkE,yBAAwB,EAAGlE,KAAKmE,2BAA0B,EAAGnE,KAAKoE,gBAAgB,IAAI1G,EAAE,MAAMlF,EAAEc,EAAE+K,KAAKC,OAAOC,WAAWC,WAAWxK,EAAE,IAAI4E,EAAE5E,EAAEoJ,uBAAuB9J,EAAE8J,uBAAuB5K,EAAEiM,WAAW5J,EAAEb,EAAE,CAAC0K,UAAAA,GAAa1E,KAAKoE,gBAAgBvG,mBAAmBmC,KAAKqE,KAAKxG,mBAAmBmC,KAAK6D,4BAA4BrJ,UAAUwF,KAAKqE,KAAKM,MAAMlD,cAAchC,EAAAA,GAAEiC,OAAO1B,KAAK6D,4BAA4BT,uBAAuBpD,KAAKoD,uBAAuBpD,KAAK4E,YAAYH,WAAW5J,EAAEmF,KAAK6D,6BAA6B7D,KAAK6E,MAAM,IAAI1G,EAAAA,EAAE6B,KAAK4E,YAAYjH,EAAAA,EAAEmH,mBAAmB,CAACC,OAAAA,GAAU/E,KAAKgF,wBAAuBxM,EAAAA,EAAAA,IAAEwH,KAAKgF,wBAAwBhF,KAAK6E,MAAM,IAAI,CAAC,eAAID,GAAc,OAAO5E,KAAKqE,KAAKC,OAAOC,WAAWC,UAAU,CAAC,yBAAIlI,GAAwB,OAAO0D,KAAK8D,sBAAsB,CAAC,yBAAIxH,CAAsBhD,GAAG0G,KAAK8D,yBAAyBxK,IAAI0G,KAAK8D,uBAAuBxK,EAAE0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQ,CAAC,wBAAIzI,GAAuB,OAAOuD,KAAKoE,gBAAgB3H,oBAAoB,CAAC,wBAAIA,CAAqBnD,IAAGM,EAAAA,EAAAA,GAAEoG,KAAKoE,gBAAgB3H,qBAAqBnD,GAAG0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,OAAO,CAAC,wBAAI7H,GAAuB,OAAO2C,KAAK+D,qBAAqB,CAAC,wBAAI1G,CAAqB/D,GAAGA,IAAI0G,KAAK+D,wBAAwB/D,KAAK+D,sBAAsBzK,EAAE0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQ,CAAC,uBAAI5H,GAAsB,OAAO0C,KAAKoE,gBAAgB9G,mBAAmB,CAAC,uBAAIA,CAAoBhE,IAAGM,EAAAA,EAAAA,GAAEoG,KAAKoE,gBAAgB9G,oBAAoBhE,GAAG0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,OAAO,CAAC,uBAAI9G,GAAsB,OAAO4B,KAAKoE,gBAAgBhG,mBAAmB,CAAC,uBAAIA,CAAoB9E,IAAGM,EAAAA,EAAAA,GAAEoG,KAAKoE,gBAAgBhG,oBAAoB9E,GAAG0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,OAAO,CAAC,4BAAI7I,GAA2B,OAAO2D,KAAKgE,yBAAyB,CAAC,4BAAI3H,CAAyB/C,GAAGA,IAAI0G,KAAKgE,4BAA4BhE,KAAKgE,0BAA0B1K,EAAE0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQ,CAAC,4BAAIxI,GAA2B,OAAOsD,KAAKoE,gBAAgB1H,wBAAwB,CAAC,4BAAIA,CAAyBpD,IAAGJ,EAAAA,EAAAA,GAAEI,EAAE0G,KAAKoE,gBAAgB1H,0BAA0BsD,KAAKiF,cAAc9I,EAAAA,GAAE+I,OAAO,CAAC,yBAAI3H,GAAwB,OAAOyC,KAAKiE,sBAAsB,CAAC,yBAAI1G,CAAsBjE,GAAGA,IAAI0G,KAAKiE,yBAAyBjE,KAAKiE,uBAAuB3K,EAAE0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQ,CAAC,yBAAIjG,GAAwB,OAAOe,KAAKoE,gBAAgBnF,qBAAqB,CAAC,yBAAIA,CAAsB3F,IAAGJ,EAAAA,EAAAA,GAAEI,EAAE0G,KAAKoE,gBAAgBnF,uBAAuBe,KAAKiF,cAAc9I,EAAAA,GAAE+I,OAAO,CAAC,wBAAIhG,GAAuB,OAAOc,KAAKoE,gBAAgBlF,oBAAoB,CAAC,wBAAIA,CAAqB5F,GAAGA,IAAI0G,KAAKoE,gBAAgBlF,uBAAuBc,KAAKoE,gBAAgBlF,qBAAqB5F,EAAE0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQ,CAAC,0BAAIC,GAAyB,OAAOnF,KAAKkE,uBAAuB,CAAC,0BAAIiB,CAAuB7L,GAAGA,IAAI0G,KAAKkE,0BAA0BlE,KAAKkE,wBAAwB5K,EAAE0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQ,CAAC,4BAAIE,GAA2B,OAAOpF,KAAKmE,yBAAyB,CAAC,4BAAIiB,CAAyB9L,GAAGA,IAAI0G,KAAKmE,4BAA4BnE,KAAKmE,0BAA0B7K,EAAE,MAAM0G,KAAKgF,wBAAwBhF,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQ,CAAC,6BAAIG,CAA0B/L,GAAG,MAAM0G,KAAKgF,yBAAyBhF,KAAKgF,uBAAuB,IAAI5I,EAAE4D,KAAKoE,gBAAgBvG,qBAAqBmC,KAAKgF,uBAAuBlE,SAASxH,EAAE0G,KAAKoF,0BAA0BpF,KAAKiF,cAAc9I,EAAAA,GAAE+I,OAAO,CAAC,4BAAII,CAAyBhM,GAAG,MAAM0G,KAAKgF,yBAAyBhF,KAAKgF,uBAAuB,IAAI5I,EAAE4D,KAAKoE,gBAAgBvG,qBAAqBmC,KAAKgF,uBAAuBhE,QAAQ1H,EAAE0G,KAAKoF,0BAA0BpF,KAAKiF,cAAc9I,EAAAA,GAAE+I,OAAO,CAACK,aAAAA,CAAcjM,IAAG+F,EAAAA,EAAAA,IAAEW,KAAKoE,gBAAgB9K,IAAI0G,KAAKiF,cAAc9I,EAAAA,GAAE+I,OAAO,CAACT,UAAAA,GAAazE,KAAKwF,oBAAoBC,SAAS,CAACC,MAAAA,CAAOpM,GAAG,MAAMd,EAAEc,EAAEqM,MAAMxM,IAAA,IAAEyM,KAAKtM,GAAEH,EAAA,OAAGG,IAAIf,EAAAA,GAAEgL,UAAU,IAAG,IAAIvD,KAAK6F,eAAeC,aAAa,MAAM9F,KAAK6E,MAAM,OAAOrM,EAAE,MAAMwB,EAAEgG,KAAK+F,iBAAiBhL,EAAEzB,EAAEqM,MAAMjM,IAAA,IAAEkM,KAAKtM,GAAEI,EAAA,MAAG,YAAYJ,CAAC,IAAG0G,KAAKoE,gBAAgB4B,QAAS,OAADjL,QAAC,IAADA,OAAC,EAADA,EAAGkL,aAAa,MAAMrM,EAAEA,MAAMoG,KAAK1D,uBAAuB0D,KAAK3C,sBAAsB2C,KAAKtD,0BAA0BsD,KAAKzC,wBAAwByC,KAAKkG,iBAAiBlG,KAAKoF,0BAA0BpF,KAAKmG,aAAa,EAAE,IAAInG,KAAKoD,uBAAuB,OAAOpJ,EAAEoM,gBAAgB5N,EAAE6N,KAAKzM,IAAIpB,EAAEwH,KAAKoE,gBAAgBkC,OAAO9N,EAAEyN,aAAa,MAAMxN,EAAEuH,KAAKuG,SAASC,QAAQhO,EAAE6N,IAAII,MAAMjO,EAAE6N,IAAIK,OAAO,eAAe,OAAO1M,EAAEoM,gBAAgB3N,EAAE4N,KAAKrM,EAAE2M,cAAc,EAAE,EAAE,EAAE,GAAG3M,EAAE4M,MAAM/J,EAAAA,GAAEgK,MAAMhK,EAAAA,GAAEiK,OAAOlN,IAAII,EAAE+M,cAAcvO,EAAEyN,cAAcjG,KAAK6E,MAAMmC,MAAMhN,EAAEvB,EAAED,EAAEwH,KAAK6F,iBAAiB7F,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQzM,EAAEgN,UAAUjN,CAAC,CAACgN,iBAAAA,GAAoB,OAAOxF,KAAK2D,eAAerH,sBAAsB0D,KAAK1D,sBAAsB0D,KAAK2D,eAAetH,yBAAyB2D,KAAK3D,yBAAyB2D,KAAK2D,eAAetG,qBAAqB2C,KAAK3C,qBAAqB2C,KAAK2D,eAAepG,sBAAsByC,KAAKzC,sBAAsByC,KAAK2D,eAAeP,uBAAuBpD,KAAKoD,uBAAuBpD,KAAK2D,eAAenJ,UAAUwF,KAAKqE,KAAKM,MAAMlD,cAAchC,EAAAA,GAAEiC,OAAO1B,KAAK4E,YAAY4B,QAAQxJ,EAAEgD,KAAK2D,eAAe,CAACuC,cAAAA,GAAiB,IAAIlG,KAAKiH,wBAAwB,OAAO,MAAM3N,EAAE0G,KAAKwF,oBAAoB,GAAGlM,EAAE4N,SAAS,CAAC,MAAM1O,EAAEwH,KAAK+F,iBAAiBvN,EAAE2O,cAAc7N,EAAE0G,KAAK6F,eAAe7F,KAAKoE,iBAAiB5L,EAAE4O,OAAOlG,MAAM,MAAMlB,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQ5L,EAAEmM,SAAS,CAACU,WAAAA,GAAc,GAAG,MAAMnG,KAAKgF,uBAAuB,OAAO,MAAM1L,EAAE0G,KAAK4E,YAAY4B,QAAQ3L,EAAEmF,KAAK6D,6BAA6B,GAAGvK,EAAE4N,SAAS,CAAC,MAAM1O,EAAEwH,KAAK+F,iBAAiB/F,KAAKoE,gBAAgB3K,OAAOuG,KAAKgF,uBAAuBvL,OAAOjB,EAAE2O,cAAc7N,EAAE0G,KAAK6F,eAAe7F,KAAKoE,iBAAiBpE,KAAKgF,uBAAuB9D,KAAK1I,EAAE,MAAMwH,KAAKiF,cAAc9I,EAAAA,GAAE+I,QAAQ5L,EAAEmM,SAAS,CAACwB,qBAAAA,GAAwB,IAAIjH,KAAKiE,uBAAuB,OAAM,EAAG,MAAM3K,EAAE0G,KAAK6F,eAAezM,OAAOZ,EAAEwH,KAAKoE,gBAAgB,GAAGpE,KAAKkE,wBAAwB,CAAC,IAAGhJ,EAAAA,EAAAA,KAAEhB,EAAAA,EAAAA,IAAE1B,EAAEyG,sBAAsBxF,OAAOjB,EAAEyG,sBAAsBR,QAAQvC,GAAGA,EAAEmL,IAAIC,OAAOC,YAAW7O,EAAAA,EAAAA,IAAEY,EAAEkO,QAAQtL,GAAG,OAAM,GAAG7C,EAAAA,EAAAA,IAAE6C,EAAE1D,EAAEuG,iBAAgBR,EAAAA,EAAAA,IAAErC,EAAE1D,EAAEwG,aAAa,MAAMpF,EAAAA,EAAAA,GAAEpB,EAAEuG,eAAevG,EAAEyG,sBAAsBxF,SAAQhB,EAAAA,EAAAA,GAAED,EAAEwG,aAAaxG,EAAEyG,sBAAsBxF,OAAOjB,EAAEyG,sBAAsBR,QAAQ,OAAM,CAAE,CAAC,QAAIgJ,GAAO,IAAGnO,EAAAA,EAAAA,GAAE,EAACU,EAAAA,EAAAA,IAAE,CAAC0N,eAAc,KAAM/K,EAAE0G,UAAU,8BAAyB,IAAQ/J,EAAAA,EAAAA,GAAE,EAACU,EAAAA,EAAAA,IAAE,CAAC0N,eAAc,KAAM/K,EAAE0G,UAAU,oBAAe,IAAQ/J,EAAAA,EAAAA,GAAE,EAACU,EAAAA,EAAAA,OAAK2C,EAAE0G,UAAU,gBAAW,IAAQ/J,EAAAA,EAAAA,GAAE,EAACU,EAAAA,EAAAA,OAAK2C,EAAE0G,UAAU,gBAAW,GAAQ1G,GAAErD,EAAAA,EAAAA,GAAE,EAACyB,EAAAA,EAAAA,GAAE,oEAAoE4B,GAAG,MAAMT,GAAEtD,EAAAA,EAAAA,MCA1uP,MAAMF,UAAUwC,EAAAA,EAAE2E,WAAAA,CAAYvG,GAAGwG,MAAMxG,GAAG0G,KAAK2H,aAAa/O,EAAAA,EAAEoH,KAAK4H,OAAO,CAAC,EAAE5H,KAAK6H,uBAAsBrP,EAAAA,EAAAA,MAAIwH,KAAK8D,wBAAuB,EAAG9D,KAAK8H,iBAAgBlO,EAAAA,EAAAA,MAAIoG,KAAKiE,wBAAuB,EAAGjE,KAAKkE,yBAAwB,EAAGlE,KAAK+H,0BAA0B,KAAK/H,KAAKgI,0BAA0B,KAAKhI,KAAKiI,mBAAmB,KAAKjI,KAAKkI,gBAAgB5O,EAAE,CAAC,YAAI6O,GAAW,CAACC,eAAAA,GAAkBpI,KAAKqI,iBAAiB,CAACC,gBAAAA,GAAmBtI,KAAKuI,kBAAkB,CAACC,gBAAAA,GAAmBxI,KAAKyI,gBAAgBzI,KAAK0I,sBAAsB1I,KAAK2I,sBAAsB3I,KAAK4I,yBAAyB5I,KAAK6I,yBAAyB7I,KAAK8I,oBAAoB,CAAC,eAAIvJ,GAAc,OAAOS,KAAK2H,YAAY,CAAC,eAAIpI,CAAYjG,GAAG0G,KAAK2H,eAAerO,IAAI0G,KAAK2H,aAAarO,EAAE0G,KAAK+I,mBAAmB,CAAC,SAAIC,GAAQ,OAAOhJ,KAAK4H,MAAM,CAAC,SAAIoB,CAAM1P,GAAG0G,KAAK4H,OAAOtO,EAAE0G,KAAKiJ,YAAY,CAAC,wBAAIxM,GAAuB,OAAOuD,KAAK8D,uBAAuB9D,KAAK6H,sBAAsB,IAAI,CAAC,wBAAIpL,CAAqBjE,GAAG,MAAMA,IAAGc,EAAAA,EAAAA,GAAE0G,KAAK6H,sBAAsBrP,GAAGwH,KAAK8D,wBAAuB,GAAI9D,KAAK8D,wBAAuB,EAAG9D,KAAKyI,gBAAgBzI,KAAK0I,qBAAqB,CAAC,+BAAIQ,CAA4B5P,GAAG,GAAG,MAAMA,EAAE,YAAY0G,KAAKmJ,eAAe,MAAM,MAAM3Q,EAAEwH,KAAKqE,KAAKxG,mBAAmBC,kBAAkBxE,EAAE6E,GAAG6B,KAAKmJ,gBAAepO,EAAAA,EAAAA,IAAEzB,EAAEd,GAAGwH,KAAKmF,wBAAuB,CAAE,CAAC,kBAAIgE,GAAiB,OAAOnJ,KAAKiE,uBAAuBjE,KAAK8H,gBAAgB,IAAI,CAAC,kBAAIqB,CAAe7P,GAAG,MAAMA,IAAGb,EAAAA,EAAAA,GAAEa,EAAE0G,KAAK8H,iBAAiB9H,KAAKiE,wBAAuB,GAAIjE,KAAKiE,wBAAuB,EAAGjE,KAAK2I,sBAAsB3I,KAAKyI,eAAe,CAAC,0BAAItD,GAAyB,OAAOnF,KAAKkE,uBAAuB,CAAC,0BAAIiB,CAAuB7L,GAAG0G,KAAKkE,wBAAwB5K,EAAE0G,KAAKoJ,6BAA6B,CAAC,4BAAI1M,GAA2B,OAAOsD,KAAK+H,yBAAyB,CAAC,4BAAIrL,CAAyBpD,GAAG0G,KAAK+H,0BAA0B,MAAMzO,GAAEb,EAAAA,EAAAA,GAAEa,GAAG,KAAK0G,KAAK6I,yBAAyB7I,KAAKyI,eAAe,CAAC,qBAAIY,GAAoB,OAAOrJ,KAAKgI,yBAAyB,CAAC,qBAAIqB,CAAkB/P,GAAG0G,KAAKgI,0BAA0B1O,EAAE0G,KAAK4I,yBAAyB5I,KAAK6I,yBAAyB7I,KAAK8I,qBAAqB9I,KAAKyI,eAAe,CAAC,qBAAIa,GAAoB,OAAOtJ,KAAKiI,kBAAkB,CAAC,qBAAIqB,CAAkBhQ,GAAG0G,KAAKiI,mBAAmB,MAAM3O,EAAE,CAACG,QAAOO,EAAAA,EAAAA,IAAEV,EAAEG,QAAQ8P,OAAOjQ,EAAEiQ,QAAOvP,EAAAA,EAAAA,IAAEV,EAAEiQ,QAAQ,MAAM,KAAKvJ,KAAK8I,qBAAqB9I,KAAKyI,eAAe,CAACA,aAAAA,GAAgBzI,KAAKwJ,UAAUxJ,KAAKyJ,UAAUzJ,KAAKiE,wBAAwBjE,KAAK8D,wBAAwB,MAAM9D,KAAKiI,oBAAoB,MAAMjI,KAAKgI,2BAA2BhI,KAAKqI,kBAAkBrI,KAAKuI,kBAAkB,CAACF,eAAAA,GAAkB,MAAMrI,KAAK0J,YAAY1J,KAAK0J,UAAU,IAAInL,EAAE,CAAC8F,KAAKrE,KAAKqE,KAAKjB,wBAAuB,EAAGuG,aAAa3J,KAAK2J,eAAe3J,KAAKiJ,aAAajJ,KAAK0I,sBAAsB1I,KAAK2I,sBAAsB3I,KAAKoJ,8BAA8BpJ,KAAK4I,yBAAyB5I,KAAK6I,yBAAyB7I,KAAK8I,qBAAqB9I,KAAK+I,mBAAmB,CAACE,UAAAA,GAAa,MAAMjJ,KAAK0J,YAAY1J,KAAK0J,UAAUnE,cAAcvF,KAAK4H,QAAQ,MAAM5H,KAAK4H,OAAO1I,uBAAuBc,KAAK0J,UAAUxK,qBAAqBc,KAAK4H,OAAO1I,sBAAsB,CAAC6J,gBAAAA,GAAmB,MAAM/I,KAAK0J,WAAW1J,KAAK0J,UAAUnE,cAAc,CAAChG,YAAYS,KAAK2H,cAAc,CAACe,mBAAAA,GAAsB,MAAM1I,KAAK0J,YAAY1J,KAAK0J,UAAUpN,sBAAsB0D,KAAK8D,wBAAwB9D,KAAKyJ,QAAQzJ,KAAK8D,yBAAyB9D,KAAK0J,UAAUjN,qBAAqBuD,KAAK6H,uBAAuB,CAACc,mBAAAA,GAAsB,MAAM3I,KAAK0J,YAAY1J,KAAK0J,UAAUnM,sBAAsByC,KAAKiE,wBAAwBjE,KAAKyJ,QAAQzJ,KAAKiE,yBAAyBjE,KAAK0J,UAAUzK,sBAAsBe,KAAK8H,iBAAiB,CAACsB,2BAAAA,GAA8B,MAAMpJ,KAAK0J,YAAY1J,KAAK0J,UAAUvE,uBAAuBnF,KAAKkE,wBAAwB,CAAC0E,sBAAAA,GAAyB,MAAM5I,KAAK0J,YAAY1J,KAAK0J,UAAUtE,yBAAyB,MAAMpF,KAAKgI,2BAA2BhI,KAAKyJ,QAAQ,MAAMzJ,KAAKgI,4BAA4BhI,KAAK0J,UAAUpE,yBAAyBtF,KAAKgI,2BAA2B,CAACa,sBAAAA,GAAyB,MAAM7I,KAAK0J,YAAY1J,KAAK0J,UAAUrN,yBAAyB,MAAM2D,KAAK+H,2BAA2B/H,KAAKyJ,QAAQ,MAAMzJ,KAAK+H,4BAA4B/H,KAAK0J,UAAUhN,yBAAyBsD,KAAK+H,2BAA2B,CAACe,kBAAAA,GAAqB,GAAG,MAAM9I,KAAK0J,UAAU,OAAO,MAAMpQ,EAAE0G,KAAKiI,mBAAmBzP,EAAE,MAAMc,EAAE0G,KAAK0J,UAAUrM,qBAAqB7E,GAAG,MAAMc,EAAEiQ,QAAQvJ,KAAKyJ,QAAQjR,IAAIwH,KAAK0J,UAAUtL,oBAAoB9E,EAAEG,OAAO,MAAMH,EAAEiQ,SAASvJ,KAAK0J,UAAUpM,oBAAoBhE,EAAEiQ,QAAQ,CAAChB,gBAAAA,GAAmB,MAAMvI,KAAK0J,WAAW1J,KAAKqE,KAAKC,SAAStE,KAAK0J,UAAU3E,UAAU/E,KAAK0J,UAAU,KAAK,EAAE,MAAMvL,GAAE3F,EAAAA,EAAAA,K,sNCAv1H,MAAM+D,UAAUgC,EAAAA,EAAEsB,WAAAA,CAAYvG,GAAGwG,MAAMxG,GAAG0G,KAAK4J,UAAU,KAAK5J,KAAK6J,SAAS,KAAK7J,KAAK8J,UAAU,KAAK9J,KAAK+J,MAAM,EAAE/J,KAAKgK,QAAO3Q,EAAAA,EAAAA,IAAE,EAAE,EAAE,EAAE,GAAG2G,KAAKiK,uBAAsB,EAAGjK,KAAKkK,WAAW,SAASlK,KAAKmK,aAAa,EAAEnK,KAAKoK,eAAc/Q,EAAAA,EAAAA,IAAE,EAAE,EAAE,EAAE,GAAG2G,KAAKqK,eAAe,KAAKrK,KAAKkI,gBAAgB5O,EAAE,CAAC,YAAIgR,GAAW,OAAOtK,KAAK8J,SAAS,CAAC,YAAIQ,CAAShR,GAAG0G,KAAK8J,UAAUxQ,EAAE0G,KAAKuK,kBAAkB,CAAC,QAAIC,GAAO,OAAOxK,KAAK+J,KAAK,CAAC,QAAIS,CAAKlR,GAAG,GAAGA,IAAI0G,KAAK+J,MAAM,CAAC,MAAMvR,EAAEwH,KAAKyK,sBAAsBzK,KAAK+J,MAAMzQ,EAAEd,EAAEwH,KAAKyK,sBAAsBzK,KAAK0K,WAAW1K,KAAK2K,sBAAsB,CAAC,CAAC,SAAIC,GAAQ,OAAO5K,KAAKgK,MAAM,CAAC,SAAIY,CAAMtR,IAAGb,EAAAA,EAAAA,GAAEa,EAAE0G,KAAKgK,WAAUjP,EAAAA,EAAAA,GAAEiF,KAAKgK,OAAO1Q,GAAG0G,KAAK6K,kBAAkB,CAAC,wBAAIC,GAAuB,OAAO9K,KAAKiK,qBAAqB,CAAC,wBAAIa,CAAqBxR,GAAG0G,KAAKiK,wBAAwB3Q,IAAI0G,KAAKiK,sBAAsB3Q,EAAE0G,KAAK6K,kBAAkB,CAAC,aAAIE,GAAY,OAAO/K,KAAKkK,UAAU,CAAC,aAAIa,CAAUzR,GAAG0G,KAAKkK,aAAa5Q,IAAI0G,KAAKkK,WAAW5Q,EAAE0G,KAAK0K,WAAW,CAAC,eAAIM,GAAc,OAAOhL,KAAKmK,YAAY,CAAC,eAAIa,CAAY1R,GAAGA,IAAI0G,KAAKmK,eAAenK,KAAKmK,aAAa7Q,EAAE0G,KAAK6K,kBAAkB,CAAC,gBAAII,GAAe,OAAOjL,KAAKoK,aAAa,CAAC,gBAAIa,CAAa3R,IAAGb,EAAAA,EAAAA,GAAEa,EAAE0G,KAAKoK,kBAAiBrP,EAAAA,EAAAA,GAAEiF,KAAKoK,cAAc9Q,GAAG0G,KAAK6K,kBAAkB,CAAC,iBAAIK,GAAgB,OAAOlL,KAAKqK,cAAc,CAAC,iBAAIa,CAAc5R,GAAG0G,KAAKqK,eAAe/Q,EAAE0G,KAAKuK,kBAAkB,CAACM,eAAAA,GAAiB,IAAAM,EAAe,QAAdA,EAAAnL,KAAK4J,iBAAS,IAAAuB,GAAdA,EAAgB5F,cAAcvF,KAAKoL,oBAAoB,CAACT,oBAAAA,GAAuB,MAAMrR,EAAE0G,KAAKqL,OAAO,GAAG,MAAM/R,EAAE,OAAO,MAAMd,EAAEc,EAAEgS,WAAW,GAAG,GAAG,MAAM9S,EAAE,OAAO,MAAMwB,EAAExB,EAAE+S,oBAAoB1Q,EAAAA,EAAE2Q,MAAMC,KAAKhT,EAAEuH,KAAK0L,cAAc1R,EAAE,GAAGvB,EAAEuB,EAAE,GAAGvB,EAAEa,EAAEqS,+BAA+BrS,EAAEgS,WAAW,GAAGzQ,EAAAA,EAAE2Q,KAAK,CAAC,uBAAIJ,GAAqB,IAAAQ,EAAC,MAAM,CAAChB,MAAM5K,KAAKgK,OAAO6B,8BAA6B,EAAGC,sCAAqC3N,EAAAA,EAAAA,IAAE6B,KAAKkK,YAAY6B,yBAAyBrO,EAAEsO,eAAc,EAAGf,aAAajL,KAAKoK,cAAcY,YAAYhL,KAAKmK,aAAa8B,UAAuB,QAAdL,EAAC5L,KAAK6J,gBAAQ,IAAA+B,OAAA,EAAbA,EAAeM,GAAGC,eAAc,EAAGC,oBAAoB,EAAEC,kBAAiB,EAAGC,cAAa,EAAGxB,qBAAqB9K,KAAK8K,qBAAqBnB,aAAa3J,KAAK2J,aAAa,CAAC,iBAAI+B,GAAgB,OAAO1L,KAAK+J,MAAM1P,CAAC,CAACkS,uBAAAA,GAA0BvM,KAAK6J,UAASnR,EAAAA,EAAAA,IAAEsH,KAAKkK,WAAWlK,KAAKyK,uBAAuBzK,KAAK4J,UAAU,IAAI1L,EAAAA,EAAE8B,KAAKoL,oBAAoBpL,KAAKqE,KAAKM,MAAMlD,cAAchC,EAAAA,GAAEiC,QAAQ,MAAMpI,EAAE0G,KAAKqE,KAAKC,OAAOtE,KAAK6J,SAAS2C,KAAKlT,EAAEiL,WAAWwB,kBAAkBzM,EAAEL,IAAI+G,KAAK6J,SAAS,CAAC4C,wBAAAA,GAA8BzM,KAAK6J,WAAU7J,KAAKqE,KAAKC,OAAOoI,OAAO1M,KAAK6J,UAAU7J,KAAK6J,SAAStI,UAAUvB,KAAK6J,SAAS,MAAK7J,KAAK4J,UAAU,IAAI,CAAC+C,gBAAAA,CAAiBrT,GAAG,MAAMd,EAAEwH,KAAK4M,wBAAwB,MAAMpU,GAAGc,EAAEuT,YAAYrU,EAAE,CAACsU,uBAAAA,CAAwBxT,GAAG0G,KAAK4J,WAAWtQ,EAAE0G,KAAK4J,UAAU,CAAC,yBAAIa,GAAwB,OAAOnR,EAAAA,EAAAA,IAAE,EAAE0G,KAAK0L,cAAc,GAAG,IAAI,CAACqB,kBAAAA,CAAmBzT,GAAE,IAAA0T,EAAC,MAAMxU,EAAa,QAAZwU,EAAChN,KAAKqL,cAAM,IAAA2B,OAAA,EAAXA,EAAa1B,WAAW,GAAG,IAAI9S,EAAE,OAAM,EAAG,MAAMwB,EAAExB,EAAE4B,WAAW+H,IAAItH,EAAAA,EAAEoS,UAAUxB,KAAK,OAAO7R,EAAAA,EAAAA,GAAEI,EAAEgG,KAAKqE,KAAKxG,mBAAmBqP,iBAAiB7O,EAAE2B,KAAKqE,KAAK6I,mBAAkBhS,EAAAA,EAAAA,IAAE5B,EAAE+E,IAAG,CAAE,CAACuO,qBAAAA,GAAwB,MAAMtC,SAAShR,EAAEsQ,UAAU5P,GAAGgG,KAAK,GAAG,MAAM1G,GAAG,MAAMU,EAAE,OAAO,KAAK,MAAM6D,mBAAmBpF,EAAE0U,kBAAkBpS,GAAGiF,KAAKqE,KAAKhL,GAAEd,EAAAA,EAAAA,IAAEe,EAAEyB,EAAEb,EAAAA,EAAEkT,kBAAkBpN,KAAKkL,eAAezS,GAAGyC,GAAE1C,EAAAA,EAAAA,GAAEI,EAAAA,GAAEuJ,MAAM7I,EAAE4E,EAAE5E,EAAE+E,EAAEhF,GAAGoG,EAAE7G,EAAAA,GAAEuJ,OAAMvI,EAAAA,EAAAA,GAAEsB,EAAE5B,EAAE4T,iBAAiBzN,EAAEhH,EAAEyU,kBAAkB,MAAM3O,EAAEyB,KAAK0L,cAAc,OAAOxS,EAAAA,EAAAA,IAAEc,EAAE,KAAKyF,EAAE,KAAK,KAAK,CAAClB,EAAEA,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,MAAMlE,EAAEtB,EAAAA,GAAE2E,EAAE,CAACrD,EAAE,EAAEA,EAAE,EAAE,EAAEA,EAAE,EAAE,EAAEA,EAAE,GAAGgE,GAAErE,EAAAA,EAAAA,K,+HCAnlI,SAASJ,EAAEA,EAAEM,GAAG,MAAMF,EAAEJ,EAAEd,SAASkB,EAAErB,QAAQU,EAAAA,GAAGO,EAAEjB,QAAQW,EAAAA,IAAGU,EAAEhB,SAASC,IAAI,IAAIT,EAAAA,EAAE,eAAea,GAAGA,EAAEgH,cAAc,IAAInF,EAAAA,EAAE,aAAa7B,GAAGA,EAAE8G,YAAY,IAAI3H,EAAAA,EAAE,aAAa,CAACa,EAAEC,IAAID,EAAES,UAAUR,EAAEF,OAAOW,aAAa,IAAIvB,EAAAA,EAAE,eAAea,GAAGA,EAAE+G,cAAc,IAAIlF,EAAAA,EAAE,cAAc7B,GAAGA,EAAE4G,aAAa,IAAIzH,EAAAA,EAAE,cAAc,CAACa,EAAEC,IAAID,EAAE6G,WAAW5G,EAAEF,OAAOW,aAAa,IAAInB,EAAAA,EAAE,YAAY,CAACS,EAAEC,KAAC,IAAA+T,EAAA,OAAU,QAAVA,EAAG/T,EAAEgU,aAAK,IAAAD,OAAA,EAAPA,EAASE,UAAU,IAAG,IAAI3U,EAAAA,EAAE,aAAaS,GAAGA,EAAE2M,WAAWhM,EAAEsB,KAAKrC,KAAIR,EAAAA,EAAAA,GAACuC,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,mNAMl0BjB,EAAEsB,KAAKrC,KAAIR,EAAAA,EAAAA,GAAC0C,IAAAA,GAAAF,EAAAA,EAAAA,GAAA,8FAEZjB,EAAEsB,KAAKrC,KAAIR,EAAAA,EAAAA,GAAC2C,IAAAA,GAAAH,EAAAA,EAAAA,GAAA,2VAUZjB,EAAEsB,KAAKrC,KAAIR,EAAAA,EAAAA,GAAC8C,IAAAA,GAAAN,EAAAA,EAAAA,GAAA,q0BAqBZf,EAAEkJ,wBAAwBpJ,EAAEhB,SAASC,IAAI,IAAIL,EAAAA,EAAE,cAAc,CAACS,EAAEC,IAAID,EAAEiN,SAAS,IAAI9N,EAAAA,EAAE,4BAA4Ba,GAAG,MAAMA,EAAEiH,yBAAyBjH,EAAEiH,yBAAyB,KAAKtG,EAAEsB,KAAKrC,KAAIR,EAAAA,EAAAA,GAAC+C,IAAAA,GAAAP,EAAAA,EAAAA,GAAA,iVAOhMjB,EAAEsB,KAAKrC,KAAIR,EAAAA,EAAAA,GAAC+E,IAAAA,GAAAvC,EAAAA,EAAAA,GAAA,0EAEd,C","sources":["../node_modules/@arcgis/core/chunks/LaserlinePath.glsl.js","../node_modules/@arcgis/core/chunks/Laserlines.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechniqueConfiguration.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechniqueConfiguration.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserLineRenderer.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LaserlineVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/PointVisualElement.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{translate as e}from\"../core/libs/gl-matrix-2/math/mat4.js\";import{create as t}from\"../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as o}from\"../core/libs/gl-matrix-2/math/vec2.js\";import{create as r}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{Laserline as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js\";import{Float2PassUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{FloatPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as s,If as l}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Matrix4PassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";import{ShaderBuilder as c}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as v}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function m(t){const r=new c;r.include(a,t);const{vertex:m,fragment:g}=r;m.uniforms.add(new d(\"modelView\",((t,{camera:o})=>e(w,o.viewMatrix,t.origin))),new d(\"proj\",((e,{camera:t})=>t.projectionMatrix)),new n(\"glowWidth\",((e,{camera:t})=>e.glowWidth*t.pixelRatio)),new i(\"pixelToNDC\",((e,{camera:t})=>o(p,2/t.fullViewport[2],2/t.fullViewport[3])))),r.attributes.add(v.START,\"vec3\"),r.attributes.add(v.END,\"vec3\"),t.spherical&&(r.attributes.add(v.START_UP,\"vec3\"),r.attributes.add(v.END_UP,\"vec3\")),r.attributes.add(v.EXTRUDE,\"vec2\"),r.varyings.add(\"uv\",\"vec2\"),r.varyings.add(\"vViewStart\",\"vec3\"),r.varyings.add(\"vViewEnd\",\"vec3\"),r.varyings.add(\"vViewSegmentNormal\",\"vec3\"),r.varyings.add(\"vViewStartNormal\",\"vec3\"),r.varyings.add(\"vViewEndNormal\",\"vec3\");const f=!t.spherical;return m.main.add(s`\n    vec3 pos = mix(start, end, extrude.x);\n\n    vec4 viewPos = modelView * vec4(pos, 1);\n    vec4 projPos = proj * viewPos;\n    vec2 ndcPos = projPos.xy / projPos.w;\n\n    // in planar we hardcode the up vectors to be Z-up */\n    ${l(f,s`vec3 startUp = vec3(0, 0, 1);`)}\n    ${l(f,s`vec3 endUp = vec3(0, 0, 1);`)}\n\n    // up vector corresponding to the location of the vertex, selecting either startUp or endUp */\n    vec3 up = extrude.y * mix(startUp, endUp, extrude.x);\n    vec3 viewUp = (modelView * vec4(up, 0)).xyz;\n\n    vec4 projPosUp = proj * vec4(viewPos.xyz + viewUp, 1);\n    vec2 projUp = normalize(projPosUp.xy / projPosUp.w - ndcPos);\n\n    // extrude ndcPos along projUp to the edge of the screen\n    vec2 lxy = abs(sign(projUp) - ndcPos);\n    ndcPos += length(lxy) * projUp;\n\n    vViewStart = (modelView * vec4(start, 1)).xyz;\n    vViewEnd = (modelView * vec4(end, 1)).xyz;\n\n    vec3 viewStartEndDir = vViewEnd - vViewStart;\n\n    vec3 viewStartUp = (modelView * vec4(startUp, 0)).xyz;\n\n    // the normal of the plane that aligns with the segment and the up vector\n    vViewSegmentNormal = normalize(cross(viewStartUp, viewStartEndDir));\n\n    // the normal orthogonal to the segment normal and the start up vector\n    vViewStartNormal = -normalize(cross(vViewSegmentNormal, viewStartUp));\n\n    // the normal orthogonal to the segment normal and the end up vector\n    vec3 viewEndUp = (modelView * vec4(endUp, 0)).xyz;\n    vViewEndNormal = normalize(cross(vViewSegmentNormal, viewEndUp));\n\n    // Add enough padding in the X screen space direction for \"glow\"\n    float xPaddingPixels = sign(dot(vViewSegmentNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;\n    ndcPos.x += xPaddingPixels * pixelToNDC.x;\n\n    // uv is used to read back depth to reconstruct the position at the fragment\n    uv = ndcPos * 0.5 + 0.5;\n\n    gl_Position = vec4(ndcPos, 0, 1);\n  `),g.uniforms.add(new n(\"perScreenPixelRatio\",((e,t)=>t.camera.perScreenPixelRatio))),g.code.add(s`float planeDistance(vec3 planeNormal, vec3 planeOrigin, vec3 pos) {\nreturn dot(planeNormal, pos - planeOrigin);\n}\nfloat segmentDistancePixels(vec3 segmentNormal, vec3 startNormal, vec3 endNormal, vec3 pos, vec3 start, vec3 end) {\nfloat distSegmentPlane = planeDistance(segmentNormal, start, pos);\nfloat distStartPlane = planeDistance(startNormal, start, pos);\nfloat distEndPlane = planeDistance(endNormal, end, pos);\nfloat dist = max(max(distStartPlane, distEndPlane), abs(distSegmentPlane));\nfloat width = fwidth(distSegmentPlane);\nfloat maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;\nfloat pixelDist = dist / min(width, maxPixelDistance);\nreturn abs(pixelDist);\n}`),g.main.add(s`fragColor = vec4(0.0);\nvec3 dEndStart = vViewEnd - vViewStart;\nif (dot(dEndStart, dEndStart) < 1e-5) {\nreturn;\n}\nvec3 pos;\nvec3 normal;\nfloat angleCutoffAdjust;\nfloat depthDiscontinuityAlpha;\nif (!laserlineReconstructFromDepth(pos, normal, angleCutoffAdjust, depthDiscontinuityAlpha)) {\nreturn;\n}\nfloat distance = segmentDistancePixels(\nvViewSegmentNormal,\nvViewStartNormal,\nvViewEndNormal,\npos,\nvViewStart,\nvViewEnd\n);\nvec4 color = laserlineProfile(distance);\nfloat alpha = (1.0 - smoothstep(0.995 - angleCutoffAdjust, 0.999 - angleCutoffAdjust, abs(dot(normal, vViewSegmentNormal))));\nfragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);`),r}const p=r(),w=t(),g=Object.freeze(Object.defineProperty({__proto__:null,build:m},Symbol.toStringTag,{value:\"Module\"}));export{g as L,m as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../core/mathUtils.js\";import{set as i}from\"../core/libs/gl-matrix-2/math/vec2.js\";import{create as t}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{d as n,n as a,l as o,j as r,t as l,c as s,e as c,g as d}from\"./vec32.js\";import{create as f}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{t as p}from\"./vec42.js\";import{create as g}from\"../core/libs/gl-matrix-2/factories/vec4f64.js\";import{pointAt as h}from\"../geometry/support/lineSegment.js\";import{create as m,fromPositionAndNormal as u}from\"../geometry/support/plane.js\";import{a as x,c as w}from\"./sphere.js\";import{Laserline as P}from\"../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js\";import{ScreenSpacePass as v}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{Float2PassUniform as b}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float3PassUniform as D}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as M}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as S}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as C}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as L}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";const A=e(6);function j(e){const i=new L;i.include(v),i.include(P,e);const t=i.fragment;if(e.lineVerticalPlaneEnabled||e.heightManifoldEnabled)if(t.uniforms.add(new S(\"maxPixelDistance\",((i,t)=>e.heightManifoldEnabled?2*t.camera.computeScreenPixelSizeAt(i.heightManifoldTarget):2*t.camera.computeScreenPixelSizeAt(i.lineVerticalPlaneSegment.origin)))),t.code.add(C`float planeDistancePixels(vec4 plane, vec3 pos) {\nfloat dist = dot(plane.xyz, pos) + plane.w;\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}`),e.spherical){const e=(e,i,t)=>l(e,i.heightManifoldTarget,t.camera.viewMatrix),i=(e,i)=>l(e,[0,0,0],i.camera.viewMatrix);t.uniforms.add(new M(\"heightManifoldOrigin\",((t,r)=>(e(R,t,r),i(F,r),n(F,F,R),a(G,F),G[3]=o(F),G))),new D(\"globalOrigin\",((e,t)=>i(R,t))),new S(\"cosSphericalAngleThreshold\",((e,i)=>1-Math.max(2,r(i.camera.eye,e.heightManifoldTarget)*i.camera.perRenderPixelRatio)/o(e.heightManifoldTarget)))),t.code.add(C`float globeDistancePixels(float posInGlobalOriginLength) {\nfloat dist = abs(posInGlobalOriginLength - heightManifoldOrigin.w);\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}\nfloat heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {\nvec3 posInGlobalOriginNorm = normalize(globalOrigin - pos);\nfloat cosAngle = dot(posInGlobalOriginNorm, heightManifoldOrigin.xyz);\nvec3 posInGlobalOrigin = globalOrigin - pos;\nfloat posInGlobalOriginLength = length(posInGlobalOrigin);\nfloat sphericalDistance = globeDistancePixels(posInGlobalOriginLength);\nfloat planarDistance = planeDistancePixels(heightPlane, pos);\nreturn cosAngle < cosSphericalAngleThreshold ? sphericalDistance : planarDistance;\n}`)}else t.code.add(C`float heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {\nreturn planeDistancePixels(heightPlane, pos);\n}`);if(e.pointDistanceEnabled&&(t.uniforms.add(new S(\"maxPixelDistance\",((e,i)=>2*i.camera.computeScreenPixelSizeAt(e.pointDistanceTarget)))),t.code.add(C`float sphereDistancePixels(vec4 sphere, vec3 pos) {\nfloat dist = distance(sphere.xyz, pos) - sphere.w;\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}`)),e.intersectsLineEnabled&&(t.uniforms.add(new S(\"perScreenPixelRatio\",((e,i)=>i.camera.perScreenPixelRatio))),t.code.add(C`float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {\nfloat dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);\nreturn abs(dist) - radius;\n}`)),(e.lineVerticalPlaneEnabled||e.intersectsLineEnabled)&&t.code.add(C`bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {\nvec3 dir = end - start;\nfloat t2 = dot(dir, pos - start);\nfloat l2 = dot(dir, dir);\nreturn t2 >= 0.0 && t2 <= l2;\n}`),t.main.add(C`vec3 pos;\nvec3 normal;\nfloat angleCutoffAdjust;\nfloat depthDiscontinuityAlpha;\nif (!laserlineReconstructFromDepth(pos, normal, angleCutoffAdjust, depthDiscontinuityAlpha)) {\nfragColor = vec4(0.0);\nreturn;\n}\nvec4 color = vec4(0.0);`),e.heightManifoldEnabled){t.uniforms.add(new b(\"angleCutoff\",(e=>V(e))),new M(\"heightPlane\",((e,i)=>I(e.heightManifoldTarget,e.renderCoordsHelper.worldUpAtPosition(e.heightManifoldTarget,R),i.camera.viewMatrix))));const i=e.spherical?C`normalize(globalOrigin - pos)`:C`heightPlane.xyz`;t.main.add(C`\n      vec2 angleCutoffAdjusted = angleCutoff - angleCutoffAdjust;\n      // Fade out laserlines on flat surfaces\n      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoffAdjusted.x, angleCutoffAdjusted.y, abs(dot(normal, ${i})));\n      vec4 heightManifoldColor = laserlineProfile(heightManifoldDistancePixels(heightPlane, pos));\n      color = max(color, heightManifoldColor * heightManifoldAlpha);`)}return e.pointDistanceEnabled&&(t.uniforms.add(new b(\"angleCutoff\",(e=>V(e))),new M(\"pointDistanceSphere\",((e,i)=>y(e,i)))),t.main.add(C`float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);\nvec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);\nfloat pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));\ncolor = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);`)),e.lineVerticalPlaneEnabled&&(t.uniforms.add(new b(\"angleCutoff\",(e=>V(e))),new M(\"lineVerticalPlane\",((e,i)=>O(e,i))),new D(\"lineVerticalStart\",((e,i)=>E(e,i))),new D(\"lineVerticalEnd\",((e,i)=>z(e,i)))),t.main.add(C`if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {\nfloat lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);\nvec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);\nfloat lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));\ncolor = max(color, lineVerticalColor * lineVerticalAlpha);\n}`)),e.intersectsLineEnabled&&(t.uniforms.add(new b(\"angleCutoff\",(e=>V(e))),new D(\"intersectsLineStart\",((e,i)=>l(R,e.lineStartWorld,i.camera.viewMatrix))),new D(\"intersectsLineEnd\",((e,i)=>l(R,e.lineEndWorld,i.camera.viewMatrix))),new D(\"intersectsLineDirection\",((e,i)=>(s(G,e.intersectsLineSegment.vector),G[3]=0,a(R,p(G,G,i.camera.viewMatrix))))),new S(\"intersectsLineRadius\",(e=>e.intersectsLineRadius))),t.main.add(C`if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {\nfloat intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);\nvec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);\nfloat intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));\ncolor = max(color, intersectsLineColor * intersectsLineAlpha);\n}`)),t.main.add(C`fragColor = laserlineOutput(color * depthDiscontinuityAlpha);`),i}function V(t){return i(T,Math.cos(t.angleCutoff),Math.cos(Math.max(0,t.angleCutoff-e(2))))}function y(e,i){return l(x(_),e.pointDistanceOrigin,i.camera.viewMatrix),_[3]=r(e.pointDistanceOrigin,e.pointDistanceTarget),_}function O(e,i){const t=h(e.lineVerticalPlaneSegment,.5,R),n=e.renderCoordsHelper.worldUpAtPosition(t,U),o=a(F,e.lineVerticalPlaneSegment.vector),r=c(R,n,o);return a(r,r),I(e.lineVerticalPlaneSegment.origin,r,i.camera.viewMatrix)}function E(e,i){const t=s(R,e.lineVerticalPlaneSegment.origin);return e.renderCoordsHelper.setAltitude(t,0),l(t,t,i.camera.viewMatrix)}function z(e,i){const t=d(R,e.lineVerticalPlaneSegment.origin,e.lineVerticalPlaneSegment.vector);return e.renderCoordsHelper.setAltitude(t,0),l(t,t,i.camera.viewMatrix)}function I(e,i,t){return l(W,e,t),s(G,i),G[3]=0,p(G,G,t),u(W,G,H)}const T=t(),R=f(),G=g(),U=f(),F=f(),W=f(),H=m(),_=w(),N=Object.freeze(Object.defineProperty({__proto__:null,build:j,defaultAngleCutoff:A},Symbol.toStringTag,{value:\"Module\"}));export{N as L,j as b,A as d};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../../../../../core/mathUtils.js\";import{fromValues as s,create as t}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as i}from\"../../../../../geometry/support/lineSegment.js\";import{NoParameters as r}from\"../../core/shaderModules/interfaces.js\";import{ReloadableShaderModule as o}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as l}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{L as n}from\"../../../../../chunks/Laserlines.glsl.js\";class a extends r{constructor(){super(...arguments),this.innerColor=s(1,1,1),this.innerWidth=1,this.glowColor=s(1,.5,0),this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=.75,this.globalAlphaContrastBoost=2,this.angleCutoff=e(6),this.pointDistanceOrigin=t(),this.pointDistanceTarget=t(),this.lineVerticalPlaneSegment=i(),this.intersectsLineSegment=i(),this.intersectsLineRadius=3,this.heightManifoldTarget=t(),this.lineStartWorld=t(),this.lineEndWorld=t()}}class h extends l{constructor(e,s,t){super(e,s,new o(n,(()=>import(\"../../shaders/Laserlines.glsl.js\"))),t)}}export{a as LaserlinePassParameters,h as LaserlineTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ReloadableShaderModule as r}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{LaserlinePassParameters as o}from\"./LaserlineTechnique.js\";import{VertexAttribute as t}from\"../../lib/VertexAttribute.js\";import{L as i}from\"../../../../../chunks/LaserlinePath.glsl.js\";class a extends o{constructor(){super(...arguments),this.origin=e()}}class c extends s{constructor(e,s,o){super(e,s,new r(i,(()=>import(\"../../shaders/LaserlinePath.glsl.js\"))),o,n)}}const n=new Map([[t.START,0],[t.END,1],[t.EXTRUDE,2],[t.START_UP,3],[t.END_UP,4]]);export{a as LaserlinePathPassParameters,c as LaserlinePathTechnique,n as vertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{i as e,d as t}from\"../../../../../chunks/vec32.js\";import{create as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{newDoubleArray as s}from\"../../../../../geometry/support/DoubleArray.js\";import{ViewingMode as i}from\"../../../../ViewingMode.js\";import{glLayout as o}from\"../../../support/buffer/glUtil.js\";import{newLayout as f}from\"../../../support/buffer/InterleavedLayout.js\";import{vertexAttributeLocations as n}from\"./LaserlinePathTechnique.js\";import{VertexArrayObject as u}from\"../../lib/VertexArrayObject.js\";import{VertexAttribute as a}from\"../../lib/VertexAttribute.js\";import{BufferObject as l}from\"../../../../webgl/BufferObject.js\";import{PrimitiveType as c,Usage as h}from\"../../../../webgl/enums.js\";class _{constructor(e){this._renderCoordsHelper=e,this._buffers=null,this._origin=r(),this._dirty=!1,this._count=0,this._vao=null}set vertices(e){const t=s(3*e.length);let r=0;for(const s of e)t[r++]=s[0],t[r++]=s[1],t[r++]=s[2];this.buffers=[t]}set buffers(t){if(this._buffers=t,this._buffers.length>0){const t=this._buffers[0],r=3*Math.floor(t.length/3/2);e(this._origin,t[r],t[r+1],t[r+2])}else e(this._origin,0,0,0);this._dirty=!0}get origin(){return this._origin}draw(e){const t=this._ensureVAO(e);null!=t&&(e.bindVAO(t),e.drawArrays(c.TRIANGLES,0,this._count))}dispose(){null!=this._vao&&this._vao.dispose()}get _layout(){return this._renderCoordsHelper.viewingMode===i.Global?b:g}_ensureVAO(e){return null==this._buffers?null:(this._vao??=this._createVAO(e,this._buffers),this._ensureVertexData(this._vao,this._buffers),this._vao)}_createVAO(e,t){const r=this._createDataBuffer(t);return this._dirty=!1,new u(e,n,new Map([[\"data\",o(this._layout)]]),new Map([[\"data\",l.createVertex(e,h.STATIC_DRAW,r)]]))}_ensureVertexData(e,t){if(!this._dirty)return;const r=this._createDataBuffer(t);e.vertexBuffers.get(\"data\")?.setData(r),this._dirty=!1}_createDataBuffer(r){const s=r.reduce(((e,t)=>e+d(t)),0);this._count=s;const i=this._layout.createBuffer(s),o=this._origin;let f=0,n=0;const u=\"startUp\"in i?this._setUpVectors.bind(this,i):void 0;for(const a of r){for(let r=0;r<a.length;r+=3){const s=e(m,a[r],a[r+1],a[r+2]);0===r?n=this._renderCoordsHelper.getAltitude(s):this._renderCoordsHelper.setAltitude(s,n);const l=f+2*r;u?.(r,l,a,s);const c=t(m,s,o);if(r<a.length-3){for(let e=0;e<6;e++)i.start.setVec(l+e,c);i.extrude.setValues(l,0,-1),i.extrude.setValues(l+1,1,-1),i.extrude.setValues(l+2,1,1),i.extrude.setValues(l+3,0,-1),i.extrude.setValues(l+4,1,1),i.extrude.setValues(l+5,0,1)}if(r>0)for(let e=-6;e<0;e++)i.end.setVec(l+e,c)}f+=d(a)}return i.buffer}_setUpVectors(e,t,r,s,i){const o=this._renderCoordsHelper.worldUpAtPosition(i,p);if(t<s.length-3)for(let f=0;f<6;f++)e.startUp.setVec(r+f,o);if(t>0)for(let f=-6;f<0;f++)e.endUp.setVec(r+f,o)}}function d(e){return 3*(2*(e.length/3-1))}const p=r(),m=r(),b=f().vec3f(a.START).vec3f(a.END).vec2f(a.EXTRUDE).vec3f(a.START_UP).vec3f(a.END_UP),g=f().vec3f(a.START).vec3f(a.END).vec2f(a.EXTRUDE);export{_ as LaserlinePathData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../../chunks/tslib.es6.js\";import{ShaderTechniqueConfiguration as r,parameter as t}from\"../../core/shaderTechnique/ShaderTechniqueConfiguration.js\";class e extends r{constructor(){super(...arguments),this.contrastControlEnabled=!1,this.spherical=!1}}o([t()],e.prototype,\"contrastControlEnabled\",void 0),o([t()],e.prototype,\"spherical\",void 0);export{e as LaserlinePathTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{parameter as i}from\"../../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{LaserlinePathTechniqueConfiguration as t}from\"./LaserlinePathTechniqueConfiguration.js\";class n extends t{constructor(){super(...arguments),this.heightManifoldEnabled=!1,this.pointDistanceEnabled=!1,this.lineVerticalPlaneEnabled=!1,this.intersectsLineEnabled=!1}}e([i()],n.prototype,\"heightManifoldEnabled\",void 0),e([i()],n.prototype,\"pointDistanceEnabled\",void 0),e([i()],n.prototype,\"lineVerticalPlaneEnabled\",void 0),e([i()],n.prototype,\"intersectsLineEnabled\",void 0);export{n as LaserlineTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{disposeMaybe as t}from\"../../../../../core/maybe.js\";import{property as i}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{c as n,g as r}from\"../../../../../chunks/vec32.js\";import{create as a,fromRay as l,getStart as o,getEnd as h}from\"../../../../../geometry/support/clipRay.js\";import{intersectClipRay as c}from\"../../../../../geometry/support/frustum.js\";import{copy as d}from\"../../../../../geometry/support/lineSegment.js\";import{wrap as p}from\"../../../../../geometry/support/ray.js\";import{ViewingMode as u}from\"../../../../ViewingMode.js\";import{InternalRenderCategory as m}from\"../../../webgl.js\";import g from\"../../../webgl/RenderNode.js\";import{Blit as _}from\"../blit/Blit.js\";import{LaserlinePathData as P}from\"./LaserlinePathData.js\";import{LaserlinePathPassParameters as b,LaserlinePathTechnique as f}from\"./LaserlinePathTechnique.js\";import{LaserlinePathTechniqueConfiguration as E}from\"./LaserlinePathTechniqueConfiguration.js\";import{LaserlineTechnique as D}from\"./LaserlineTechnique.js\";import{LaserlineTechniqueConfiguration as q}from\"./LaserlineTechniqueConfiguration.js\";import{RenderRequestType as L}from\"../../lib/basicInterfaces.js\";import{updateParameters as T}from\"../../materials/internal/MaterialUtil.js\";import{BlitMode as V}from\"../../shaders/CompositingTechniqueConfiguration.js\";import{FramebufferBit as R}from\"../../../../webgl/enums.js\";let C=class extends g{constructor(e){super(e),this.produces=m.LASERLINES,this.consumes={required:[m.LASERLINES,\"normals\"]},this.requireGeometryDepth=!0,this._configuration=new q,this._pathTechniqueConfiguration=new E,this._heightManifoldEnabled=!1,this._pointDistanceEnabled=!1,this._lineVerticalPlaneEnabled=!1,this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._passParameters=new b;const t=e.view._stage.renderView.techniques,i=new E;i.contrastControlEnabled=e.contrastControlEnabled,t.precompile(f,i)}initialize(){this._passParameters.renderCoordsHelper=this.view.renderCoordsHelper,this._pathTechniqueConfiguration.spherical=this.view.state.viewingMode===u.Global,this._pathTechniqueConfiguration.contrastControlEnabled=this.contrastControlEnabled,this._techniques.precompile(f,this._pathTechniqueConfiguration),this._blit=new _(this._techniques,V.PremultipliedAlpha)}destroy(){this._pathVerticalPlaneData=t(this._pathVerticalPlaneData),this._blit=null}get _techniques(){return this.view._stage.renderView.techniques}get heightManifoldEnabled(){return this._heightManifoldEnabled}set heightManifoldEnabled(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this.requestRender(L.UPDATE))}get heightManifoldTarget(){return this._passParameters.heightManifoldTarget}set heightManifoldTarget(e){n(this._passParameters.heightManifoldTarget,e),this.requestRender(L.UPDATE)}get pointDistanceEnabled(){return this._pointDistanceEnabled}set pointDistanceEnabled(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this.requestRender(L.UPDATE))}get pointDistanceTarget(){return this._passParameters.pointDistanceTarget}set pointDistanceTarget(e){n(this._passParameters.pointDistanceTarget,e),this.requestRender(L.UPDATE)}get pointDistanceOrigin(){return this._passParameters.pointDistanceOrigin}set pointDistanceOrigin(e){n(this._passParameters.pointDistanceOrigin,e),this.requestRender(L.UPDATE)}get lineVerticalPlaneEnabled(){return this._lineVerticalPlaneEnabled}set lineVerticalPlaneEnabled(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this.requestRender(L.UPDATE))}get lineVerticalPlaneSegment(){return this._passParameters.lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){d(e,this._passParameters.lineVerticalPlaneSegment),this.requestRender(L.UPDATE)}get intersectsLineEnabled(){return this._intersectsLineEnabled}set intersectsLineEnabled(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this.requestRender(L.UPDATE))}get intersectsLineSegment(){return this._passParameters.intersectsLineSegment}set intersectsLineSegment(e){d(e,this._passParameters.intersectsLineSegment),this.requestRender(L.UPDATE)}get intersectsLineRadius(){return this._passParameters.intersectsLineRadius}set intersectsLineRadius(e){e!==this._passParameters.intersectsLineRadius&&(this._passParameters.intersectsLineRadius=e,this.requestRender(L.UPDATE))}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this.requestRender(L.UPDATE))}get pathVerticalPlaneEnabled(){return this._pathVerticalPlaneEnabled}set pathVerticalPlaneEnabled(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,null!=this._pathVerticalPlaneData&&this.requestRender(L.UPDATE))}set pathVerticalPlaneVertices(e){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new P(this._passParameters.renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this.requestRender(L.UPDATE)}set pathVerticalPlaneBuffers(e){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new P(this._passParameters.renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this.requestRender(L.UPDATE)}setParameters(e){T(this._passParameters,e)&&this.requestRender(L.UPDATE)}precompile(){this._acquireTechnique().release()}render(e){const t=e.find((({name:e})=>e===m.LASERLINES));if(!this.bindParameters.decorations||null==this._blit)return t;const i=this.renderingContext,s=e.find((({name:e})=>\"normals\"===e));this._passParameters.normals=s?.getTexture();const n=()=>{(this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled)&&this._renderUnified(),this.pathVerticalPlaneEnabled&&this._renderPath()};if(!this.contrastControlEnabled)return i.bindFramebuffer(t.fbo),n(),t;this._passParameters.colors=t.getTexture();const r=this.fboCache.acquire(t.fbo.width,t.fbo.height,\"laser lines\");return i.bindFramebuffer(r.fbo),i.setClearColor(0,0,0,0),i.clear(R.COLOR|R.DEPTH),n(),i.unbindTexture(t.getTexture()),this._blit.blend(i,r,t,this.bindParameters)||this.requestRender(L.UPDATE),r.release(),t}_acquireTechnique(){return this._configuration.heightManifoldEnabled=this.heightManifoldEnabled,this._configuration.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._configuration.pointDistanceEnabled=this.pointDistanceEnabled,this._configuration.intersectsLineEnabled=this.intersectsLineEnabled,this._configuration.contrastControlEnabled=this.contrastControlEnabled,this._configuration.spherical=this.view.state.viewingMode===u.Global,this._techniques.acquire(D,this._configuration)}_renderUnified(){if(!this._updatePassParameters())return;const e=this._acquireTechnique();if(e.compiled){const t=this.renderingContext;t.bindTechnique(e,this.bindParameters,this._passParameters),t.screen.draw()}else this.requestRender(L.UPDATE);e.release()}_renderPath(){if(null==this._pathVerticalPlaneData)return;const e=this._techniques.acquire(f,this._pathTechniqueConfiguration);if(e.compiled){const t=this.renderingContext;this._passParameters.origin=this._pathVerticalPlaneData.origin,t.bindTechnique(e,this.bindParameters,this._passParameters),this._pathVerticalPlaneData.draw(t)}else this.requestRender(L.UPDATE);e.release()}_updatePassParameters(){if(!this._intersectsLineEnabled)return!0;const e=this.bindParameters.camera,t=this._passParameters;if(this._intersectsLineInfinite){if(l(p(t.intersectsLineSegment.origin,t.intersectsLineSegment.vector),j),j.c0=-Number.MAX_VALUE,!c(e.frustum,j))return!1;o(j,t.lineStartWorld),h(j,t.lineEndWorld)}else n(t.lineStartWorld,t.intersectsLineSegment.origin),r(t.lineEndWorld,t.intersectsLineSegment.origin,t.intersectsLineSegment.vector);return!0}get test(){}};e([i({constructOnly:!0})],C.prototype,\"contrastControlEnabled\",void 0),e([i({constructOnly:!0})],C.prototype,\"isDecoration\",void 0),e([i()],C.prototype,\"produces\",void 0),e([i()],C.prototype,\"consumes\",void 0),C=e([s(\"esri.views.3d.webgl-engine.effects.laserlines.LaserLineRenderer\")],C);const j=a();export{C as LaserLineRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{c as e}from\"../../../../chunks/vec32.js\";import{create as t,clone as i}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as n,fromValues as s,copy as r}from\"../../../../geometry/support/lineSegment.js\";import{VisualElement as l}from\"./VisualElement.js\";import{LaserLineRenderer as h}from\"../../webgl-engine/effects/laserlines/LaserLineRenderer.js\";import{d as a}from\"../../../../chunks/Laserlines.glsl.js\";class c extends l{constructor(e){super(e),this._angleCutoff=a,this._style={},this._heightManifoldTarget=t(),this._heightManifoldEnabled=!1,this._intersectsLine=n(),this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._lineVerticalPlaneSegment=null,this._pathVerticalPlaneBuffers=null,this._pointDistanceLine=null,this.applyProperties(e)}get testData(){}createResources(){this._ensureRenderer()}destroyResources(){this._disposeRenderer()}updateVisibility(){this._syncRenderer(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance()}get angleCutoff(){return this._angleCutoff}set angleCutoff(e){this._angleCutoff!==e&&(this._angleCutoff=e,this._syncAngleCutoff())}get style(){return this._style}set style(e){this._style=e,this._syncStyle()}get heightManifoldTarget(){return this._heightManifoldEnabled?this._heightManifoldTarget:null}set heightManifoldTarget(t){null!=t?(e(this._heightManifoldTarget,t),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this._syncRenderer(),this._syncHeightManifold()}set intersectsWorldUpAtLocation(e){if(null==e)return void(this.intersectsLine=null);const t=this.view.renderCoordsHelper.worldUpAtPosition(e,_);this.intersectsLine=s(e,t),this.intersectsLineInfinite=!0}get intersectsLine(){return this._intersectsLineEnabled?this._intersectsLine:null}set intersectsLine(e){null!=e?(r(e,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this._syncIntersectsLine(),this._syncRenderer()}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){this._intersectsLineInfinite=e,this._syncIntersectsLineInfinite()}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){this._lineVerticalPlaneSegment=null!=e?r(e):null,this._syncLineVerticalPlane(),this._syncRenderer()}get pathVerticalPlane(){return this._pathVerticalPlaneBuffers}set pathVerticalPlane(e){this._pathVerticalPlaneBuffers=e,this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncRenderer()}get pointDistanceLine(){return this._pointDistanceLine}set pointDistanceLine(e){this._pointDistanceLine=null!=e?{origin:i(e.origin),target:e.target?i(e.target):null}:null,this._syncPointDistance(),this._syncRenderer()}_syncRenderer(){this.attached&&this.visible&&(this._intersectsLineEnabled||this._heightManifoldEnabled||null!=this._pointDistanceLine||null!=this._pathVerticalPlaneBuffers)?this._ensureRenderer():this._disposeRenderer()}_ensureRenderer(){null==this._renderer&&(this._renderer=new h({view:this.view,contrastControlEnabled:!0,isDecoration:this.isDecoration}),this._syncStyle(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncIntersectsLineInfinite(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncAngleCutoff())}_syncStyle(){null!=this._renderer&&(this._renderer.setParameters(this._style),null!=this._style.intersectsLineRadius&&(this._renderer.intersectsLineRadius=this._style.intersectsLineRadius))}_syncAngleCutoff(){null!=this._renderer&&this._renderer.setParameters({angleCutoff:this._angleCutoff})}_syncHeightManifold(){null!=this._renderer&&(this._renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this._renderer.heightManifoldTarget=this._heightManifoldTarget))}_syncIntersectsLine(){null!=this._renderer&&(this._renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this._renderer.intersectsLineSegment=this._intersectsLine))}_syncIntersectsLineInfinite(){null!=this._renderer&&(this._renderer.intersectsLineInfinite=this._intersectsLineInfinite)}_syncPathVerticalPlane(){null!=this._renderer&&(this._renderer.pathVerticalPlaneEnabled=null!=this._pathVerticalPlaneBuffers&&this.visible,null!=this._pathVerticalPlaneBuffers&&(this._renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}_syncLineVerticalPlane(){null!=this._renderer&&(this._renderer.lineVerticalPlaneEnabled=null!=this._lineVerticalPlaneSegment&&this.visible,null!=this._lineVerticalPlaneSegment&&(this._renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}_syncPointDistance(){if(null==this._renderer)return;const e=this._pointDistanceLine,t=null!=e;this._renderer.pointDistanceEnabled=t&&null!=e.target&&this.visible,t&&(this._renderer.pointDistanceOrigin=e.origin,null!=e.target&&(this._renderer.pointDistanceTarget=e.target))}_disposeRenderer(){null!=this._renderer&&this.view._stage&&(this._renderer.destroy(),this._renderer=null)}}const _=t();export{c as LaserlineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clamp as e}from\"../../../../core/mathUtils.js\";import{i as t}from\"../../../../chunks/vec32.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{a as r,c as s}from\"../../../../chunks/vec42.js\";import{fromValues as o}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{projectVectorToVector as n}from\"../../../../geometry/projection/projectVectorToVector.js\";import{expandWithBuffer as l}from\"../../../../geometry/support/aaBoundingBox.js\";import{sv3d as a}from\"../../../../geometry/support/vectorStacks.js\";import{ViewingMode as u}from\"../../../ViewingMode.js\";import{Object3DVisualElement as h}from\"./Object3DVisualElement.js\";import{evaluateElevationAlignmentAtPoint as m}from\"../../layers/graphics/elevationAlignmentUtils.js\";import{ElevationContext as p}from\"../../layers/graphics/ElevationContext.js\";import{requiresHalfTexelOffset as _,createTexture as c,defaultSymbolSizeRatio as g}from\"../../support/engineContent/sdfPrimitives.js\";import{createPointGeometry as d}from\"../../webgl-engine/lib/GeometryUtil.js\";import{VertexAttribute as f}from\"../../webgl-engine/lib/VertexAttribute.js\";import{HUDMaterial as x}from\"../../webgl-engine/materials/HUDMaterial.js\";class S extends h{constructor(e){super(e),this._material=null,this._texture=null,this._geometry=null,this._size=3,this._color=o(1,0,1,1),this._pixelSnappingEnabled=!0,this._primitive=\"square\",this._outlineSize=1,this._outlineColor=o(1,1,1,1),this._elevationInfo=null,this.applyProperties(e)}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get size(){return this._size}set size(e){if(e!==this._size){const t=this._preferredTextureSize;this._size=e,t<this._preferredTextureSize?this.recreate():this._updateSizeAttribute()}}get color(){return this._color}set color(e){r(e,this._color)||(s(this._color,e),this._updateMaterial())}get pixelSnappingEnabled(){return this._pixelSnappingEnabled}set pixelSnappingEnabled(e){this._pixelSnappingEnabled!==e&&(this._pixelSnappingEnabled=e,this._updateMaterial())}get primitive(){return this._primitive}set primitive(e){this._primitive!==e&&(this._primitive=e,this.recreate())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){r(e,this._outlineColor)||(s(this._outlineColor,e),this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}_updateMaterial(){this._material?.setParameters(this._materialParameters)}_updateSizeAttribute(){const e=this.object;if(null==e)return;const t=e.geometries[0];if(null==t)return;const i=t.getMutableAttribute(f.SIZE).data,r=this._geometrySize;i[0]=r,i[1]=r,e.geometryVertexAttributeUpdated(e.geometries[0],f.SIZE)}get _materialParameters(){return{color:this._color,textureIsSignedDistanceField:!0,sampleSignedDistanceFieldTexelCenter:_(this._primitive),distanceFieldBoundingBox:b,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:this._texture?.id,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled,isDecoration:this.isDecoration}}get _geometrySize(){return this._size/v}createExternalResources(){this._texture=c(this._primitive,this._preferredTextureSize),this._material=new x(this._materialParameters,this.view.state.viewingMode===u.Global);const e=this.view._stage;this._texture.load(e.renderView.renderingContext),e.add(this._texture)}destroyExternalResources(){if(this._texture){this.view._stage.remove(this._texture),this._texture.dispose(),this._texture=null}this._material=null}createGeometries(e){const t=this._createRenderGeometry();null!=t&&e.addGeometry(t)}forEachExternalMaterial(e){this._material&&e(this._material)}get _preferredTextureSize(){return e(2*this._geometrySize,16,128)}calculateMapBounds(e){const t=this.object?.geometries[0];if(!t)return!1;const i=t.attributes.get(f.POSITION).data;return n(i,this.view.renderCoordsHelper.spatialReference,y,this.view.spatialReference),l(e,y),!0}_createRenderGeometry(){const{geometry:e,_material:i}=this;if(null==e||null==i)return null;const{renderCoordsHelper:r,elevationProvider:s}=this.view,o=m(e,s,p.fromElevationInfo(this.elevationInfo),r),l=t(a.get(),e.x,e.y,o),u=a.get();n(l,e.spatialReference,u,r.spatialReference);const h=this._geometrySize;return d(i,null,u,null,null,[h,h],[0,0,0,1])}}const v=g,b=[v/2,v/2,1-v/2,1-v/2],y=i();export{S as PointVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ReadDepth as o}from\"./output/ReadDepth.glsl.js\";import{CameraSpace as e}from\"./util/CameraSpace.glsl.js\";import{Float3PassUniform as l}from\"../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as t}from\"../shaderModules/FloatPassUniform.js\";import{glsl as r}from\"../shaderModules/interfaces.js\";import{Texture2DPassUniform as a}from\"../shaderModules/Texture2DPassUniform.js\";function n(n,p){const i=n.fragment;i.include(o),n.include(e),i.uniforms.add(new t(\"globalAlpha\",(o=>o.globalAlpha)),new l(\"glowColor\",(o=>o.glowColor)),new t(\"glowWidth\",((o,e)=>o.glowWidth*e.camera.pixelRatio)),new t(\"glowFalloff\",(o=>o.glowFalloff)),new l(\"innerColor\",(o=>o.innerColor)),new t(\"innerWidth\",((o,e)=>o.innerWidth*e.camera.pixelRatio)),new a(\"depthMap\",((o,e)=>e.depth?.attachment)),new a(\"normalMap\",(o=>o.normals))),i.code.add(r`vec4 blendPremultiplied(vec4 source, vec4 dest) {\nfloat oneMinusSourceAlpha = 1.0 - source.a;\nreturn vec4(\nsource.rgb + dest.rgb * oneMinusSourceAlpha,\nsource.a + dest.a * oneMinusSourceAlpha\n);\n}`),i.code.add(r`vec4 premultipliedColor(vec3 rgb, float alpha) {\nreturn vec4(rgb * alpha, alpha);\n}`),i.code.add(r`vec4 laserlineProfile(float dist) {\nif (dist > glowWidth) {\nreturn vec4(0.0);\n}\nfloat innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));\nfloat glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);\nreturn blendPremultiplied(\npremultipliedColor(innerColor, innerAlpha),\npremultipliedColor(glowColor, glowAlpha)\n);\n}`),i.code.add(r`bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float angleCutoffAdjust, out float depthDiscontinuityAlpha) {\nfloat depth = depthFromTexture(depthMap, uv);\nif (depth == 1.0) {\nreturn false;\n}\nfloat linearDepth = linearizeDepth(depth);\npos = reconstructPosition(gl_FragCoord.xy, linearDepth);\nfloat minStep = 6e-8;\nfloat depthStep = clamp(depth + minStep, 0.0, 1.0);\nfloat linearDepthStep = linearizeDepth(depthStep);\nfloat depthError = abs(linearDepthStep - linearDepth);\nif (depthError > 0.2) {\nnormal = texture(normalMap, uv).xyz * 2.0 - 1.0;\nangleCutoffAdjust = 0.004;\n} else {\nnormal = normalize(cross(dFdx(pos), dFdy(pos)));\nangleCutoffAdjust = 0.0;\n}\nfloat ddepth = fwidth(linearDepth);\ndepthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / linearDepth);\nreturn true;\n}`),p.contrastControlEnabled?(i.uniforms.add(new a(\"frameColor\",((o,e)=>o.colors)),new t(\"globalAlphaContrastBoost\",(o=>null!=o.globalAlphaContrastBoost?o.globalAlphaContrastBoost:1))),i.code.add(r`float rgbToLuminance(vec3 color) {\nreturn dot(vec3(0.2126, 0.7152, 0.0722), color);\n}\nvec4 laserlineOutput(vec4 color) {\nfloat backgroundLuminance = rgbToLuminance(texture(frameColor, uv).rgb);\nfloat alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);\nreturn color * alpha;\n}`)):i.code.add(r`vec4 laserlineOutput(vec4 color) {\nreturn color * globalAlpha;\n}`)}export{n as Laserline};\n"],"names":["m","t","r","c","include","a","vertex","fragment","g","uniforms","add","d","_ref","camera","o","e","w","viewMatrix","origin","_ref2","projectionMatrix","n","_ref3","glowWidth","pixelRatio","i","_ref4","p","fullViewport","attributes","v","START","END","spherical","START_UP","END_UP","EXTRUDE","varyings","f","main","s","_templateObject","_taggedTemplateLiteral","l","_templateObject2","_templateObject3","perScreenPixelRatio","code","_templateObject4","_templateObject5","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value","A","j","L","P","lineVerticalPlaneEnabled","heightManifoldEnabled","S","computeScreenPixelSizeAt","heightManifoldTarget","lineVerticalPlaneSegment","C","M","R","F","G","D","Math","max","eye","perRenderPixelRatio","pointDistanceEnabled","pointDistanceTarget","intersectsLineEnabled","_templateObject6","_templateObject7","b","V","I","renderCoordsHelper","worldUpAtPosition","_templateObject8","_templateObject9","_templateObject10","x","_","pointDistanceOrigin","y","_templateObject11","h","U","vector","O","setAltitude","E","z","_templateObject12","lineStartWorld","lineEndWorld","intersectsLineSegment","intersectsLineRadius","_templateObject13","_templateObject14","T","cos","angleCutoff","W","u","H","N","defaultAngleCutoff","constructor","super","arguments","this","innerColor","innerWidth","glowColor","glowFalloff","globalAlpha","globalAlphaContrastBoost","Map","_renderCoordsHelper","_buffers","_origin","_dirty","_count","_vao","vertices","length","buffers","floor","draw","_ensureVAO","bindVAO","drawArrays","TRIANGLES","dispose","_layout","viewingMode","Global","_this$_vao","_createVAO","_ensureVertexData","_createDataBuffer","createVertex","STATIC_DRAW","_e$vertexBuffers$get","vertexBuffers","get","setData","reduce","createBuffer","_setUpVectors","bind","getAltitude","start","setVec","extrude","setValues","end","buffer","startUp","endUp","vec3f","vec2f","contrastControlEnabled","prototype","produces","LASERLINES","consumes","required","requireGeometryDepth","_configuration","q","_pathTechniqueConfiguration","_heightManifoldEnabled","_pointDistanceEnabled","_lineVerticalPlaneEnabled","_intersectsLineEnabled","_intersectsLineInfinite","_pathVerticalPlaneEnabled","_passParameters","view","_stage","renderView","techniques","precompile","initialize","state","_techniques","_blit","PremultipliedAlpha","destroy","_pathVerticalPlaneData","requestRender","UPDATE","intersectsLineInfinite","pathVerticalPlaneEnabled","pathVerticalPlaneVertices","pathVerticalPlaneBuffers","setParameters","_acquireTechnique","release","render","find","name","bindParameters","decorations","renderingContext","normals","getTexture","_renderUnified","_renderPath","bindFramebuffer","fbo","colors","fboCache","acquire","width","height","setClearColor","clear","COLOR","DEPTH","unbindTexture","blend","_updatePassParameters","compiled","bindTechnique","screen","c0","Number","MAX_VALUE","frustum","test","constructOnly","_angleCutoff","_style","_heightManifoldTarget","_intersectsLine","_lineVerticalPlaneSegment","_pathVerticalPlaneBuffers","_pointDistanceLine","applyProperties","testData","createResources","_ensureRenderer","destroyResources","_disposeRenderer","updateVisibility","_syncRenderer","_syncHeightManifold","_syncIntersectsLine","_syncPathVerticalPlane","_syncLineVerticalPlane","_syncPointDistance","_syncAngleCutoff","style","_syncStyle","intersectsWorldUpAtLocation","intersectsLine","_syncIntersectsLineInfinite","pathVerticalPlane","pointDistanceLine","target","attached","visible","_renderer","isDecoration","_material","_texture","_geometry","_size","_color","_pixelSnappingEnabled","_primitive","_outlineSize","_outlineColor","_elevationInfo","geometry","recreateGeometry","size","_preferredTextureSize","recreate","_updateSizeAttribute","color","_updateMaterial","pixelSnappingEnabled","primitive","outlineSize","outlineColor","elevationInfo","_this$_material","_materialParameters","object","geometries","getMutableAttribute","SIZE","data","_geometrySize","geometryVertexAttributeUpdated","_this$_texture","textureIsSignedDistanceField","sampleSignedDistanceFieldTexelCenter","distanceFieldBoundingBox","occlusionTest","textureId","id","polygonOffset","shaderPolygonOffset","drawInSecondSlot","depthEnabled","createExternalResources","load","destroyExternalResources","remove","createGeometries","_createRenderGeometry","addGeometry","forEachExternalMaterial","calculateMapBounds","_this$object","POSITION","spatialReference","elevationProvider","fromElevationInfo","_e$depth","depth","attachment"],"sourceRoot":""}