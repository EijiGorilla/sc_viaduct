{"version":3,"file":"static/js/6662.1fc58b88.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/RouteLayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js","../node_modules/@arcgis/core/views/3d/support/EventedSet.js","../node_modules/@arcgis/core/views/layers/LayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as t}from\"../../../core/promiseUtils.js\";import{whenOnce as r}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as a,rejectLayerError as l}from\"../../../geometry/support/heightModelInfoUtils.js\";const n=n=>{let c=class extends n{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),a(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,o=e.signal;this.addHandles(s((()=>e.abort()))),await r((()=>this.view.defaultsFromMap?.heightModelInfoReady),o),t(o);const i=l(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e?.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),s=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(e.outsideScaleRange=!0),e}};return e([o()],c.prototype,\"view\",void 0),e([o()],c.prototype,\"slicePlaneEnabled\",void 0),c=e([i(\"esri.views.3d.layers.LayerView3D\")],c),c};export{n as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Collection.js\";import r from\"../../../core/CollectionFlattener.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{initial as o,when as i,watch as n}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import l from\"../../../rest/support/DirectionLine.js\";import c from\"../../../rest/support/DirectionPoint.js\";import u from\"../../../rest/support/PointBarrier.js\";import d from\"../../../rest/support/PolygonBarrier.js\";import h from\"../../../rest/support/PolylineBarrier.js\";import m from\"../../../rest/support/RouteInfo.js\";import y from\"../../../rest/support/Stop.js\";import{LayerView3D as f}from\"./LayerView3D.js\";import{GraphicsProcessor as g}from\"./graphics/GraphicsProcessor.js\";import{toViewIfLocal as b}from\"./support/projectExtentUtils.js\";import{EventedSet as j}from\"../support/EventedSet.js\";import{UpdatePolicy as v}from\"../webgl-engine/lib/UpdatePolicy.js\";import w from\"../../layers/LayerView.js\";function _(e){return e instanceof l||e instanceof c||e instanceof u||e instanceof d||e instanceof h||e instanceof m||e instanceof y}let I=class extends(f(w)){constructor(){super(...arguments),this.type=\"route-3d\",this.loadedGraphics=new j,this._byObjectID=new Map,this.slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set(\"processor\",new g({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this._updatingHandles.addOnCollectionChange((()=>this._routeItems),(e=>this._routeItemsChanged(e)),o),this.addResolvingPromise(b(this).then((e=>this.fullExtentInLocalViewSpatialReference=e))),this.addHandles(i((()=>this.view?.basemapTerrain?.ready),(()=>()=>this.notifyChange(\"updating\")),{once:!0}))}destroy(){this._updatingHandles.removeAll(),this._set(\"processor\",s(this.processor)),this._get(\"_routeItems\")?.destroy()}get _routeItems(){return new r({getCollections:()=>[this.layer.pointBarriers,this.layer.polygonBarriers,this.layer.polylineBarriers,this.layer.stops,this.layer.directionLines,this.layer.directionPoints,null!=this.layer.routeInfo?new t([this.layer.routeInfo]):null]})}_routeItemsChanged(e){if(e.removed.length){this.loadedGraphics.removeMany(e.removed.map((e=>{const t=this._byObjectID.get(e);return this._byObjectID.delete(e),t})));for(const t of e.removed)this.removeHandles(t)}if(e.added.length){this.loadedGraphics.addMany(e.added.map((e=>{const t=e.toGraphic();return this._byObjectID.set(e,t),t})));for(const t of e.added)this.addHandles([n((()=>t.geometry),((e,r)=>{this._updateGraphic(t,\"geometry\",e,r)})),n((()=>t.symbol),((e,r)=>{this._updateGraphic(t,\"symbol\",e,r)}))],t)}}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}getSuspendInfo(){const e=super.getSuspendInfo();return e.outsideScaleRange=this.processor?.scaleVisibilitySuspended??!1,e.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,e}async fetchPopupFeatures(e,t){return t?.clientGraphics??[]}getHit(e){return this.processor.getHit(e)}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor?.computeAttachmentOrigin(e,t)}getSymbolLayerSize(e,t){return this.processor.getSymbolLayerSize(e,t)}async queryGraphics(){return new t(this.loadedGraphics.toArray())}maskOccludee(e){return this.processor.maskOccludee(e)}highlight(e){return _(e)&&(e=this._byObjectID.get(e)),this.processor.highlight(e)}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||v.SYNC}canResume(){return super.canResume()&&!this.processor?.scaleVisibilitySuspended}isUpdating(){return!(!this.processor?.updating&&this.view?.basemapTerrain?.ready)}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.processor?.elevationAlignment.updating??!1,visibilityFrustum:!this.processor?.frustumVisibilitySuspended}}_updateGraphic(e,t,r,s){const o=this._byObjectID.get(e);o[t]=r,S.graphic=o,S.property=t,S.oldValue=s,S.newValue=r,this.processor?.graphicsCore.graphicUpdateHandler(S)}};e([a()],I.prototype,\"_routeItems\",null),e([a()],I.prototype,\"loadedGraphics\",void 0),e([a({readOnly:!0})],I.prototype,\"legendEnabled\",null),e([a()],I.prototype,\"layer\",void 0),e([a({readOnly:!0})],I.prototype,\"processor\",void 0),e([a({type:Boolean})],I.prototype,\"slicePlaneEnabled\",void 0),I=e([p(\"esri.views.3d.layers.RouteLayerView3D\")],I);const S={graphic:null,property:null,oldValue:null,newValue:null},O=I;export{O as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{project as e}from\"../../../../geometry/support/webMercatorUtils.js\";import{projectGeometry as r}from\"../../../../portal/support/geometryServiceUtils.js\";function l(l){const t=l.view.spatialReference,o=l.layer.fullExtent,s=null!=o&&o.spatialReference;if(null==o||!s)return Promise.resolve(null);if(s.equals(t))return Promise.resolve(o.clone());const n=e(o,t);return null!=n?Promise.resolve(n):l.view.state.isLocal?r(o,t,l.layer.portalItem).then((e=>!l.destroyed&&e?e:null)).catch((()=>null)):Promise.resolve(null)}export{l as toViewIfLocal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Evented.js\";import{ObservableChangesType as t}from\"../../../core/ObservableChangesType.js\";import{someSet as s}from\"../../../core/SetUtils.js\";class r extends e{constructor(){super(...arguments),this._set=new Set}clear(){if(this._set.size>0){const e=this.toArray();this._set.clear(),this.emit(\"after-changes\",{type:t.REMOVE}),this.emit(\"change\",{added:[],removed:e})}}get length(){return this._set.size}addMany(e){if(0!==e.length){for(const t of e)this._set.add(t);this.emit(\"after-changes\",{type:t.ADD}),this.emit(\"change\",{added:e,removed:[]})}}remove(e){this._set.delete(e)&&(this.emit(\"after-changes\",{type:t.REMOVE}),this.emit(\"change\",{added:[],removed:[e]}))}removeMany(e){const s=[];for(const t of e)this._set.delete(t)&&s.push(t);s.length>0&&(this.emit(\"after-changes\",{type:t.REMOVE}),this.emit(\"change\",{added:[],removed:s}))}toArray(){return[...this._set]}find(e){let t;return s(this._set,(s=>!!e(s)&&(t=s,!0))),t}forEach(e){this._set.forEach((t=>e(t)))}}export{r as EventedSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{IdentifiableMixin as s}from\"../../core/Identifiable.js\";import i from\"../../core/Logger.js\";import{destroyMaybe as o}from\"../../core/maybe.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as p}from\"../../core/support/UpdatingHandles.js\";let d=class extends(s(n(r.EventedMixin(t)))){constructor(e){super(e),this._updatingHandles=new p,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer?.title||\"no title\";i.getLogger(this).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=o(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{},t=this;return t.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),e([a()],d.prototype,\"view\",void 0),d=e([l(\"esri.views.layers.LayerView\")],d);const u=d;export{u as default};\n"],"names":["n","c","constructor","super","arguments","this","slicePlaneEnabled","supportsHeightUnitConversion","postscript","e","a","layer","addResolvingPromise","_validateHeightModelInfo","AbortController","o","signal","addHandles","s","abort","r","_this$view$defaultsFr","view","defaultsFromMap","heightModelInfoReady","t","i","l","heightModelInfo","canResume","effectiveScaleRange","minScale","maxScale","getSuspendInfo","outsideScaleRange","prototype","I","f","w","type","loadedGraphics","j","_byObjectID","Map","fullExtentInLocalViewSpatialReference","initialize","_set","g","owner","scaleVisibilityEnabled","frustumVisibilityEnabled","processor","initializePromise","_updatingHandles","addOnCollectionChange","_routeItems","_routeItemsChanged","b","then","_this$view","basemapTerrain","ready","notifyChange","once","destroy","_this$_get","removeAll","_get","getCollections","pointBarriers","polygonBarriers","polylineBarriers","stops","directionLines","directionPoints","routeInfo","removed","length","removeMany","map","get","delete","removeHandles","added","addMany","toGraphic","set","geometry","_updateGraphic","symbol","legendEnabled","_this$processor","frustumVisibilitySuspended","_this$processor$scale","_this$processor2","_this$processor$frust","_this$processor3","scaleVisibilitySuspended","outsideOfView","fetchPopupFeatures","_t$clientGraphics","clientGraphics","getHit","whenGraphicBounds","computeAttachmentOrigin","_this$processor4","getSymbolLayerSize","queryGraphics","toArray","maskOccludee","highlight","u","d","h","m","y","_","updatePolicy","_this$processor5","graphicsCore","effectiveUpdatePolicy","v","SYNC","_this$processor6","isUpdating","_this$processor7","_this$view2","updating","performanceInfo","_this$processor$eleva","_this$processor8","_this$processor9","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","nodes","core","elevationUpdating","elevationAlignment","visibilityFrustum","_this$processor10","S","graphic","property","oldValue","newValue","graphicUpdateHandler","readOnly","Boolean","p","O","spatialReference","fullExtent","Promise","resolve","equals","clone","state","isLocal","portalItem","destroyed","catch","Set","clear","size","emit","REMOVE","add","ADD","remove","push","find","forEach","EventedMixin","parent","when","name","_this$layer","id","title","getLogger","error","concat","fullOpacity","_this$layer$opacity","_this$layer2","_this$parent$fullOpac","_this$parent","opacity","suspended","suspendInfo","_this$layer3","_this$_updatingHandle","updatingProgress","visible","_this$layer4","_overrideIfSome","_this$layer5","_this$parent2","loaded","_this$parent3","_t$view","viewNotReady","layerNotLoaded","layerInvisible"],"sourceRoot":""}