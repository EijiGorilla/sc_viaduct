"use strict";(self.webpackChunksc_viaduct=self.webpackChunksc_viaduct||[]).push([[4088],{74088:(e,l,t)=>{t.d(l,{previewSymbol2D:()=>B});var i=t(69539),n=t(59784),o=t(50076),a=t(85504),s=t(76931),u=t(87840),c=t(65709),d=t(26291),r=t(27790);const h="picture-fill",m="picture-marker",v="simple-fill",p="simple-line",f="simple-marker",y="text",w="Aa",g=c.CB.size,b=c.CB.maxSize,k=c.CB.maxOutlineSize,z=c.CB.lineWidth,L=225,x=document.createElement("canvas");function C(e,l){const t=x.getContext("2d"),i=[];return l&&(l.weight&&i.push(l.weight),l.size&&i.push(l.size+"px"),l.family&&i.push(l.family)),t.font=i.join(" "),t.measureText(e).width}const M=7.2/2.54,S=72/2.54;function F(e){if(0===e.length)return 0;if(e.length>2){const l=(0,s.PN)(1),t=parseFloat(e);switch(e.slice(-2)){case"px":return t;case"pt":return t*l;case"in":return 72*t*l;case"pc":return 12*t*l;case"mm":return t*M*l;case"cm":return t*S*l}}return parseFloat(e)}function j(e){const l=null===e||void 0===e?void 0:e.size;return{width:null!=l&&"object"==typeof l&&"width"in l?(0,s.Lz)(l.width):null,height:null!=l&&"object"==typeof l&&"height"in l?(0,s.Lz)(l.height):null}}function A(e,l){return e>l?"dark":"light"}async function B(e,l){var t;const{shapeDescriptor:i,size:n,renderOptions:L}=function(e,l){var t,i;const n="number"==typeof(null===l||void 0===l?void 0:l.size)?null===l||void 0===l?void 0:l.size:null,o=null!=n?(0,s.Lz)(n):null,a=null!=(null===l||void 0===l?void 0:l.maxSize)?(0,s.Lz)(l.maxSize):null,d=null!=(null===l||void 0===l?void 0:l.rotation)?l.rotation:"angle"in e?e.angle:null,r=(0,u.eH)(e);let L=(0,u.$4)(e);"dark"!==E(e,245)||(null===l||void 0===l?void 0:l.ignoreWhiteSymbols)||(L={width:.75,...L,color:"#bdc3c7"});const x={shape:null,fill:r,stroke:L,offset:[0,0]};(null===(t=L)||void 0===t?void 0:t.width)&&(L.width=Math.min(L.width,k));const M=(null===(i=L)||void 0===i?void 0:i.width)||0;let S=null!=(null===l||void 0===l?void 0:l.size)&&(null==(null===l||void 0===l?void 0:l.scale)||(null===l||void 0===l?void 0:l.scale)),A=0,B=0,q=!1;switch(e.type){case f:{const t=e.style,{width:i,height:n}=j(l),u=i===n&&null!=i?i:null!=o?o:Math.min((0,s.Lz)(e.size),a||b);switch(A=u,B=u,t){case"circle":x.shape={type:"circle",cx:0,cy:0,r:.5*u},S||(A+=M,B+=M);break;case"cross":x.shape={type:"path",path:[{command:"M",values:[0,.5*B]},{command:"L",values:[A,.5*B]},{command:"M",values:[.5*A,0]},{command:"L",values:[.5*A,B]}]};break;case"diamond":x.shape={type:"path",path:[{command:"M",values:[0,.5*B]},{command:"L",values:[.5*A,0]},{command:"L",values:[A,.5*B]},{command:"L",values:[.5*A,B]},{command:"Z",values:[]}]},S||(A+=M,B+=M);break;case"square":x.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[A,0]},{command:"L",values:[A,B]},{command:"L",values:[0,B]},{command:"Z",values:[]}]},S||(A+=M,B+=M),d&&(q=!0);break;case"triangle":x.shape={type:"path",path:[{command:"M",values:[.5*A,0]},{command:"L",values:[A,B]},{command:"L",values:[0,B]},{command:"Z",values:[]}]},S||(A+=M,B+=M),d&&(q=!0);break;case"x":x.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[A,B]},{command:"M",values:[A,0]},{command:"L",values:[0,B]}]},d&&(q=!0);break;case"path":x.shape={type:"path",path:e.path||""},S||(A+=M,B+=M),d&&(q=!0),S=!0}break}case p:{var D;const{width:e,height:t}=j(l),i=null!=t?t:null!=o?o:M,n=null!=e?e:z;L&&(L.width=i),A=n,B=i;const a=(null===x||void 0===x||null===(D=x.stroke)||void 0===D?void 0:D.cap)||"butt",s="round"===a;S=!0,x.stroke&&(x.stroke.cap="butt"===a?"square":a),x.shape={type:"path",path:[{command:"M",values:[s?i/2:0,B/2]},{command:"L",values:[s?A-i/2:A,B/2]}]};break}case h:case v:{var W;const e="object"==typeof(null===l||void 0===l?void 0:l.symbolConfig)&&!(null===l||void 0===l||null===(W=l.symbolConfig)||void 0===W||!W.isSquareFill),{width:t,height:i}=j(l);A=!e&&t!==i||null==t?null!=o?o:g:t,B=!e&&t!==i||null==i?A:i,S||(A+=M,B+=M),S=!0,x.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[A,0]},{command:"L",values:[A,B]},{command:"L",values:[0,B]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:c.nq.fill[0];break}case m:{const t=Math.min((0,s.Lz)(e.width),a||b),i=Math.min((0,s.Lz)(e.height),a||b),{width:n,height:u}=j(l),c=n===u&&null!=n?n:null!=o?o:Math.max(t,i),r=t/i;A=r<=1?Math.ceil(c*r):c,B=r<=1?c:Math.ceil(c/r),x.shape={type:"image",x:-Math.round(A/2),y:-Math.round(B/2),width:A,height:B,src:e.url||""},d&&(q=!0);break}case y:{const t=e,i=(null===l||void 0===l?void 0:l.overrideText)||t.text||w,n=t.font,{width:u,height:c}=j(l),d=null!=c?c:null!=o?o:Math.min((0,s.Lz)(n.size),a||b),r=C(i,{weight:n.weight,size:d,family:n.family}),h=/[\uE600-\uE6FF]/.test(i);A=null!==u&&void 0!==u?u:h?d:r,B=d;let m=.25*F((n?d:0).toString());h&&(m+=5),x.shape={type:"text",text:i,x:t.xoffset||0,y:t.yoffset||m,align:"middle",alignBaseline:t.verticalAlignment,decoration:n&&n.decoration,rotated:t.rotated,kerning:t.kerning},x.font=n&&{size:d,style:n.style,decoration:n.decoration,weight:n.weight,family:n.family};break}}return{shapeDescriptor:x,size:[A,B],renderOptions:{node:null===l||void 0===l?void 0:l.node,scale:S,opacity:null===l||void 0===l?void 0:l.opacity,rotation:d,useRotationSize:q,effectView:null===l||void 0===l?void 0:l.effectView,ariaLabel:null===l||void 0===l?void 0:l.ariaLabel}}}(e,l);if(!i.shape)throw new o.A("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(e,l){const t=l.fill,i=e.color;if("pattern"===(null===t||void 0===t?void 0:t.type)&&i&&e.type!==h){const e=await(0,u.rc)(t.src,i.toCss(!0));t.src=e,l.fill=t}}(e,i),await async function(e,l,t,i){var n,o,s;if(!("font"in e)||!e.font||"text"!==l.shape.type)return;try{await(0,a.Al)(e.font)}catch{}const{width:u}=j(i),c=/[\uE600-\uE6FF]/.test(l.shape.text);null!=u||c||(t[0]=C(l.shape.text,{weight:null===(n=l.font)||void 0===n?void 0:n.weight,size:null===(o=l.font)||void 0===o?void 0:o.size,family:null===(s=l.font)||void 0===s?void 0:s.family}))}(e,i,n,l);const x=[[i]];if("object"==typeof(null===l||void 0===l?void 0:l.symbolConfig)&&null!==l&&void 0!==l&&null!==(t=l.symbolConfig)&&void 0!==t&&t.applyColorModulation){const e=.6*n[0];x.unshift([{...i,offset:[-e,0],fill:(0,c.QC)(i.fill,-.3)}]),x.push([{...i,offset:[e,0],fill:(0,c.QC)(i.fill,.3)}]),n[0]+=2*e,L.scale=!1}return"text"===e.type&&function(e,l,t,i,n){var o;if(null!=e.haloColor&&null!=e.haloSize){var a;null!==(a=n.masking)&&void 0!==a||(n.masking=t.map((()=>[])));const o=(0,s.Lz)(e.haloSize);i[0]+=o,i[1]+=o,t.unshift([{...l,fill:null,stroke:{color:e.haloColor,width:2*o,join:"round",cap:"round"}}]),n.masking.unshift([{shape:{type:"rect",x:0,y:0,width:i[0]+2*r.y7,height:i[1]+2*r.y7},fill:[255,255,255],stroke:null},{...l,fill:[0,0,0,0],stroke:null}])}null==e.backgroundColor&&null==e.borderLineColor||(i[0]+=2*r.y7,i[1]+=2*r.y7,t.unshift([{shape:{type:"rect",x:0,y:0,width:i[0],height:i[1]},fill:e.backgroundColor,stroke:{color:e.borderLineColor,width:(0,s.Lz)(e.borderLineSize)}}]),null===(o=n.masking)||void 0===o||o.unshift([]))}(e,i,x,n,L),(0,d.fz)(x,n,L)}function E(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;const t=(0,u.eH)(e),o=(0,u.$4)(e),a=!t||"type"in t?null:new i.A(t),s=null!==o&&void 0!==o&&o.color?new i.A(null===o||void 0===o?void 0:o.color):null,c=a?A((0,n.Ws)(a),l):null,d=s?A((0,n.Ws)(s),l):null;return d?c?c===d?c:l>=L?"light":"dark":d:c}}}]);
//# sourceMappingURL=4088.0e269996.chunk.js.map