"use strict";(self.webpackChunksc_viaduct=self.webpackChunksc_viaduct||[]).push([[2208],{42208:(e,i,t)=>{t.r(i),t.d(i,{default:()=>f});var s=t(35143),r=t(50076),n=t(30726),l=t(68134),o=t(46053),a=(t(40565),t(18690),t(81806),t(85842)),d=t(83491),u=t(19321),p=t(183),c=t(43804),h=t(40200),v=t(44513),y=t(91196);let g=class extends((0,d.w)(y.A)){constructor(){super(...arguments),this.type="graphics-3d",this.symbologySnappingSupported=!0,this._slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null,this.ignoresMemoryFactor=!0}initialize(){this._set("processor",new p.K({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.addHandles(this.layer.on("graphic-update",(e=>this.processor.graphicsCore.graphicUpdateHandler(e)))),this.addResolvingPromise((0,h.V)(this).then((e=>this.fullExtentInLocalViewSpatialReference=e))),this.layer.internal?this.notifyChange("updating"):this.addHandles((0,l.z7)((()=>{var e;return null===(e=this.view)||void 0===e||null===(e=e.basemapTerrain)||void 0===e?void 0:e.ready}),(()=>()=>this.notifyChange("updating")),{once:!0}))}destroy(){this._updatingHandles.removeAll(),this._set("processor",(0,n.pR)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){var e;return this.canResume()&&!(null!==(e=this.processor)&&void 0!==e&&e.frustumVisibilitySuspended)}get slicePlaneEnabled(){const e=this.layer.internal;return this._slicePlaneEnabled&&!e}set slicePlaneEnabled(e){this._slicePlaneEnabled=e}getSuspendInfo(){var e,i,t,s;const r=super.getSuspendInfo();return r.outsideScaleRange=null!==(e=null===(i=this.processor)||void 0===i?void 0:i.scaleVisibilitySuspended)&&void 0!==e&&e,r.outsideOfView=null!==(t=null===(s=this.processor)||void 0===s?void 0:s.frustumVisibilitySuspended)&&void 0!==t&&t,r}async fetchPopupFeatures(e,i){var t;return null!==(t=null===i||void 0===i?void 0:i.clientGraphics)&&void 0!==t?t:[]}getHit(e){return this.processor.getHit(e)}whenGraphicBounds(e,i){return this.processor.whenGraphicBounds(e,i)}computeAttachmentOrigin(e,i){var t;return null===(t=this.processor)||void 0===t?void 0:t.computeAttachmentOrigin(e,i)}getSymbolLayerSize(e,i){return this.processor.getSymbolLayerSize(e,i)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(e){return this.processor.maskOccludee(e)}highlight(e){return this.processor.highlight(e)}async elevationAlignPointsInFeatures(e,i){const{processor:t}=this;if(null==(null===t||void 0===t?void 0:t.graphics3DGraphics))throw new r.A("graphicslayerview3d:missing-processor","A Graphics3D processor is needed to resolve graphics elevation.");const{graphics3DGraphics:s}=t;return(0,u.a)(this.view,this.layer,(e=>"number"==typeof e?s.get(e):void 0),e,i)}async queryForSymbologySnapping(e,i){return(0,c.N)(this.processor,e,i)}get updatePolicy(){var e;return(null===(e=this.processor)||void 0===e?void 0:e.graphicsCore.effectiveUpdatePolicy)||v.q.SYNC}canResume(){var e;return super.canResume()&&!(null!==(e=this.processor)&&void 0!==e&&e.scaleVisibilitySuspended)}isUpdating(){var e,i;return this.view&&this.layer&&!((null===(e=this.processor)||void 0===e||!e.updating)&&(this.layer.internal||null!==(i=this.view.basemapTerrain)&&void 0!==i&&i.ready))}get performanceInfo(){var e,i,t;return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:null!==(e=null===(i=this.processor)||void 0===i?void 0:i.elevationAlignment.updating)&&void 0!==e&&e,visibilityFrustum:!(null!==(t=this.processor)&&void 0!==t&&t.frustumVisibilitySuspended)}}get usedMemory(){var e,i;return null!==(e=null===(i=this.processor)||void 0===i||null===(i=i.graphicsCore)||void 0===i?void 0:i.usedMemory)&&void 0!==e?e:0}get unloadedMemory(){var e;return null===(e=this.processor)||void 0===e||null===(e=e.graphicsCore)||void 0===e?void 0:e.unprocessedMemoryEstimate}};(0,s._)([(0,o.MZ)()],g.prototype,"loadedGraphics",null),(0,s._)([(0,o.MZ)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,s._)([(0,o.MZ)()],g.prototype,"layer",void 0),(0,s._)([(0,o.MZ)({readOnly:!0})],g.prototype,"processor",void 0),(0,s._)([(0,o.MZ)()],g.prototype,"_slicePlaneEnabled",void 0),(0,s._)([(0,o.MZ)({type:Boolean})],g.prototype,"slicePlaneEnabled",null),g=(0,s._)([(0,a.$)("esri.views.3d.layers.GraphicsLayerView3D")],g);const f=g},83491:(e,i,t)=>{t.d(i,{w:()=>u});var s=t(35143),r=t(54901),n=t(50346),l=t(68134),o=t(46053),a=(t(40565),t(18690),t(81806),t(85842)),d=t(47700);const u=e=>{let i=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),(0,d.jI)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,i=e.signal;this.addHandles((0,r.hA)((()=>e.abort()))),await(0,l.C_)((()=>{var e;return null===(e=this.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),i),(0,n.Te)(i);const t=(0,d.Hu)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(t)throw t}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!(null!==e&&void 0!==e&&e.minScale)||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),i=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return i&&i.minScale&&i.maxScale&&i.minScale<i.maxScale&&(e.outsideScaleRange=!0),e}};return(0,s._)([(0,o.MZ)()],i.prototype,"view",void 0),(0,s._)([(0,o.MZ)()],i.prototype,"slicePlaneEnabled",void 0),i=(0,s._)([(0,a.$)("esri.views.3d.layers.LayerView3D")],i),i}},19321:(e,i,t)=>{t.d(i,{a:()=>p});t(35238);var s=t(50346),r=t(51294),n=t(18117),l=t(12482),o=t(67425),a=t(49296),d=t(41595),u=t(13312);async function p(e,i,t,n,a){var p;const{elevationProvider:g,renderCoordsHelper:f}=e,{elevationInfo:m}=i,{pointsInFeatures:b,spatialReference:w}=n,S=u.A.fromJSON(w),_=(0,d.MF)(m,!0),I=await(0,d.q6)(_,S,a);(0,s.Te)(a);const R=[],M=new Set,P=new Set;h.spatialReference=S;const E=null!==(p=e.elevationProvider.spatialReference)&&void 0!==p?p:e.spatialReference;for(const{objectId:s,points:d}of b){const e=t(s);if(null==e){for(const e of d){var O;R.push(null!==(O=e.z)&&void 0!==O?O:0)}M.add(s);continue}e.isDraped&&P.add(s);const n=e.graphic.geometry;c.setFromElevationInfo((0,l.ze)(n,m)),c.updateFeatureExpressionInfoContext(I,e.graphic,i);for(const{x:i,y:t,z:s}of d)h.x=i,h.y=t,h.z=null!==s&&void 0!==s?s:0,await(0,r.U)(h,y,E,0,{signal:a}),(0,o.sE)(y,g,c,f,v),R.push(v.z)}return{elevations:R,drapedObjectIds:P,failedObjectIds:M}}const c=new a.F,h=(0,n.T)(0,0,0,u.A.WGS84),v=new o.Uk,y=[0,0,0]},43804:(e,i,t)=>{t.d(i,{N:()=>n});var s=t(50346),r=t(98976);async function n(e,i,t){var n;if(null==e||0===i.candidates.length)return l;const o=null!==(n=e.graphics3DGraphicsByObjectID)&&void 0!==n?n:e.graphics3DGraphics,a=[],d=[],{renderer:u}=e,p=null!=u&&"arcadeRequired"in u&&u.arcadeRequired?(0,r.lw)():null,c=async(i,s)=>{let{graphic:r,graphics3DSymbol:n}=s;const l=await p,o=await e.getRenderingInfoAsync(r,u,l,{signal:t});return null==o?[]:n.queryForSnapping(i,v,o,t)},{candidates:h,spatialReference:v}=i;for(let s=0;s<h.length;++s){const e=h[s],{objectId:i}=e,t="number"==typeof i?null===o||void 0===o?void 0:o.get(i):void 0;if(null==t)continue;const{graphics3DSymbol:r}=t;r.symbologySnappingSupported&&(a.push(c(e,t)),d.push(s))}if(0===a.length)return l;const y=await Promise.all(a);(0,s.Te)(t);const g=[],f=[];for(let s=0;s<y.length;++s){const e=y[s],i=d[s];for(const t of e)g.push(t),f.push(i)}return{candidates:g,sourceCandidateIndices:f}}const l={candidates:[],sourceCandidateIndices:[]}},40200:(e,i,t)=>{t.d(i,{V:()=>n});var s=t(45417),r=t(39483);function n(e){const i=e.view.spatialReference,t=e.layer.fullExtent,n=null!=t&&t.spatialReference;if(null==t||!n)return Promise.resolve(null);if(n.equals(i))return Promise.resolve(t.clone());const l=(0,s.Cv)(t,i);return null!=l?Promise.resolve(l):e.view.state.isLocal?(0,r.projectGeometry)(t,i,e.layer.portalItem).then((i=>!e.destroyed&&i?i:null)).catch((()=>null)):Promise.resolve(null)}},91196:(e,i,t)=>{t.d(i,{A:()=>v});var s=t(35143),r=t(91967),n=t(54099),l=t(5632),o=t(76460),a=t(30726),d=t(91291),u=t(46053),p=(t(40565),t(18690),t(81806),t(85842)),c=t(19451);let h=class extends((0,l.sA)((0,d.g)(n.A.EventedMixin(r.A)))){constructor(e){super(e),this._updatingHandles=new c.U,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){var i;const t=this.layer&&this.layer.id||"no id",s=(null===(i=this.layer)||void 0===i?void 0:i.title)||"no title";o.A.getLogger(this).error("#resolve()","Failed to resolve layer view (layer title: '".concat(s,"', id: '").concat(t,"')"),e)}}))}destroy(){this._updatingHandles=(0,a.pR)(this._updatingHandles)}get fullOpacity(){var e,i,t,s;return(null!==(e=null===(i=this.layer)||void 0===i?void 0:i.opacity)&&void 0!==e?e:1)*(null!==(t=null===(s=this.parent)||void 0===s?void 0:s.fullOpacity)&&void 0!==t?t:1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}get updating(){var e;return!((null===(e=this._updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)}set visible(e){this._overrideIfSome("visible",e)}canResume(){var e,i,t;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(i=this.parent)&&void 0!==i&&i.suspended)&&(null===(t=this.view)||void 0===t?void 0:t.ready)||!1}getSuspendInfo(){var e,i;const t=null!==(e=this.parent)&&void 0!==e&&e.suspended?this.parent.suspendInfo:{};return null!==(i=this.view)&&void 0!==i&&i.ready||(t.viewNotReady=!0),this.layer&&this.layer.loaded||(t.layerNotLoaded=!0),this.visible||(t.layerInvisible=!0),t}isUpdating(){return!1}};(0,s._)([(0,u.MZ)()],h.prototype,"fullOpacity",null),(0,s._)([(0,u.MZ)()],h.prototype,"layer",void 0),(0,s._)([(0,u.MZ)()],h.prototype,"parent",void 0),(0,s._)([(0,u.MZ)({readOnly:!0})],h.prototype,"suspended",null),(0,s._)([(0,u.MZ)({readOnly:!0})],h.prototype,"suspendInfo",null),(0,s._)([(0,u.MZ)({readOnly:!0})],h.prototype,"legendEnabled",null),(0,s._)([(0,u.MZ)({type:Boolean,readOnly:!0})],h.prototype,"updating",null),(0,s._)([(0,u.MZ)({readOnly:!0})],h.prototype,"updatingProgress",null),(0,s._)([(0,u.MZ)()],h.prototype,"visible",null),(0,s._)([(0,u.MZ)()],h.prototype,"view",void 0),h=(0,s._)([(0,p.$)("esri.views.layers.LayerView")],h);const v=h}}]);
//# sourceMappingURL=2208.beb7f801.chunk.js.map