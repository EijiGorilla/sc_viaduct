"use strict";(self.webpackChunksc_viaduct=self.webpackChunksc_viaduct||[]).push([[5227,1438],{1438:(e,t,r)=>{r.d(t,{O7:()=>F,el:()=>O,XX:()=>x});var n=r(86560),s=r(50076),i=r(76460),o=r(65215),a=r(23701),u=r(73548),l=r(80963),c=r(45417),f=(r(35238),r(3825)),h=r(19902),d=r(54994);var p=r(90534),y=r(71838);const m=()=>i.A.getLogger("esri.geometry.support.normalizeUtils");function g(e){return"polygon"===e[0].type}function _(e){return"polyline"===e[0].type}function x(e,t){if(!(e instanceof a.A||e instanceof o.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw m().error(e),new s.A(e)}const r=(0,u.r8)(e),n=[];for(const s of r){const e=[];n.push(e),e.push([s[0][0],s[0][1]]);for(let r=0;r<s.length-1;r++){const n=s[r][0],i=s[r][1],o=s[r+1][0],a=s[r+1][1],u=Math.sqrt((o-n)*(o-n)+(a-i)*(a-i)),l=(a-i)/u,c=(o-n)/u,f=u/t;if(f>1){for(let a=1;a<=f-1;a++){const r=a*t,s=c*r+n,o=l*r+i;e.push([s,o])}const r=(u+Math.floor(f-1)*t)/2,s=c*r+n,o=l*r+i;e.push([s,o])}e.push([o,a])}}return function(e){return"polygon"===e.type}(e)?new o.A({rings:n,spatialReference:e.spatialReference}):new a.A({paths:n,spatialReference:e.spatialReference})}function S(e,t,r){if(t){const t=x(e,1e6);e=(0,c.ci)(t,!0)}return r&&(e=(0,u.kS)(e,r)),e}function b(e,t,r){if(Array.isArray(e)){const n=e[0];if(n>t){const r=(0,u.kd)(n,t);e[0]=n+r*(-2*t)}else if(n<r){const t=(0,u.kd)(n,r);e[0]=n+t*(-2*r)}}else{const n=e.x;if(n>t){const r=(0,u.kd)(n,t);e=e.clone().offset(r*(-2*t),0)}else if(n<r){const t=(0,u.kd)(n,r);e=e.clone().offset(t*(-2*r),0)}}return e}function R(e,t){let r=-1;for(let n=0;n<t.cutIndexes.length;n++){const s=t.cutIndexes[n],i=t.geometries[n],o=(0,u.r8)(i);for(let e=0;e<o.length;e++){const t=o[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const n=t[e][0];r=n>r?n:r}r=Number(r.toFixed(9));const n=-360*(0,u.kd)(r,180);for(let s=0;s<t.length;s++){const t=i.getPoint(e,s);i.setPoint(e,s,t.clone().offset(n,0))}return!0}}))}if(s===r){if(g(e))for(const t of(0,u.r8)(i))e[s]=e[s].addRing(t);else if(_(e))for(const t of(0,u.r8)(i))e[s]=e[s].addPath(t)}else r=s,e[s]=i}return e}async function O(e,t,r){if(!Array.isArray(e))return O([e],t);t&&"string"!=typeof t&&m().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s="string"==typeof t?t:t?.url??n.A.geometryServiceUrl;let i,g,_,x,F,A,w,P,D=0;const C=[],v=[];for(const n of e)if(null!=n)if(i||(i=n.spatialReference,g=(0,l.Vp)(i),_=i.isWebMercator,A=_?102100:4326,x=u.j7[A].maxX,F=u.j7[A].minX,w=u.j7[A].plus180Line,P=u.j7[A].minus180Line),g)if("mesh"===n.type)v.push(n);else if("point"===n.type)v.push(b(n.clone(),x,F));else if("multipoint"===n.type){const e=n.clone();e.points=e.points.map((e=>b(e,x,F))),v.push(e)}else if("extent"===n.type){const e=n.clone()._normalize(!1,!1,g);v.push(e.rings?new o.A(e):e)}else if(n.extent){const e=n.extent,t=(0,u.kd)(e.xmin,F)*(2*x);let r=0===t?n.clone():(0,u.kS)(n.clone(),t);e.offset(t,0);let{xmin:s,xmax:i}=e;s=Number(s.toFixed(9)),i=Number(i.toFixed(9)),e.intersects(w)&&i!==x?(D=i>D?i:D,r=S(r,_),C.push(r),v.push("cut")):e.intersects(P)&&s!==F?(D=i*(2*x)>D?i*(2*x):D,r=S(r,_,360),C.push(r),v.push("cut")):v.push(r)}else v.push(n.clone());else v.push(n);else v.push(n);let q=(0,u.kd)(D,x),M=-90;const j=q,G=new a.A;for(;q>0;){const e=360*q-180;G.addPath([[e,M],[e,-1*M]]),M*=-1,q--}if(C.length>0&&j>0){const t=R(C,await async function(e,t,r,n){const s=(0,d.Dl)(e),i=t[0].spatialReference,o={...n,responseType:"json",query:{...s.query,f:"json",sr:(0,l.YX)(i),target:JSON.stringify({geometryType:(0,h.$B)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await(0,f.A)(s.path+"/cut",o),{cutIndexes:u,geometries:c=[]}=a.data;return{cutIndexes:u,geometries:c.map((e=>{const t=(0,h.rS)(e);return t.spatialReference=i,t}))}}(s,C,G,r)),n=[],i=[];for(let r=0;r<v.length;r++){const s=v[r];if("cut"!==s)i.push(s);else{const s=t.shift(),o=e[r];null!=o&&"polygon"===o.type&&o.rings&&o.rings.length>1&&s.rings.length>=o.rings.length?(n.push(s),i.push("simplify")):i.push(_?(0,c.Gh)(s):s)}}if(!n.length)return i;const o=await async function(e,t,r){const n="string"==typeof e?(0,p.An)(e):e,s=t[0].spatialReference,i=(0,h.$B)(t[0]),o={...r,query:{...n.query,f:"json",sr:(0,l.YX)(s),geometries:JSON.stringify((0,y.X)(t))}},{data:a}=await(0,f.A)(n.path+"/simplify",o);return(0,y.V)(a.geometries,i,s)}(s,n,r),a=[];for(let e=0;e<i.length;e++){const t=i[e];"simplify"!==t?a.push(t):a.push(_?(0,c.Gh)(o.shift()):o.shift())}return a}const N=[];for(let n=0;n<v.length;n++){const e=v[n];if("cut"!==e)N.push(e);else{const e=C.shift();N.push(!0===_?(0,c.Gh)(e):e)}}return N}function F(e,t,r){const n=(0,l.Vp)(r);if(null==n)return e;const[s,i]=n.valid,o=2*i;let a=0,u=0;t>i?a=Math.ceil(Math.abs(t-i)/o):t<s&&(a=-Math.ceil(Math.abs(t-s)/o)),e>i?u=Math.ceil(Math.abs(e-i)/o):e<s&&(u=-Math.ceil(Math.abs(e-s)/o));let c=e+(a-u)*o;const f=c-t;return f>i?c-=o:f<s&&(c+=o),c}},73548:(e,t,r)=>{r.d(t,{j7:()=>o,kS:()=>u,kd:()=>a,r8:()=>l});var n=r(23701),s=r(13312),i=r(19902);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:s.A.WebMercator}),minus180Line:new n.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:s.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.A({paths:[[[180,-180],[180,180]]],spatialReference:s.A.WGS84}),minus180Line:new n.A({paths:[[[-180,-180],[-180,180]]],spatialReference:s.A.WGS84})}};function a(e,t){return Math.ceil((e-t)/(2*t))}function u(e,t){const r=l(e);for(const n of r)for(const e of n)e[0]+=t;return e}function l(e){return(0,i.Bi)(e)?e.rings:e.paths}},75227:(e,t,r)=>{r.d(t,{A:()=>G});var n=r(35143),s=r(91967),i=r(50076),o=r(81806),a=r(50346),u=r(90534),l=r(46053),c=(r(76460),r(47249),r(85842)),f=r(80963),h=r(19463),d=r(89551),p=r(54994),y=r(37713),m=(r(35238),r(36643)),g=r(68295),_=r(76797);var x=r(53104),S=r(14009),b=r(30726),R=r(86729),O=r(98618);function F(e,t){return t}function A(e,t,r,n){switch(r){case 0:return C(e,t+n,0);case 1:return"lowerLeft"===e.originPosition?C(e,t+n,1):function(e,t,r){let{translate:n,scale:s}=e;return n[r]-t*s[r]}(e,t+n,1)}}function w(e,t,r,n){return 2===r?C(e,t,2):A(e,t,r,n)}function P(e,t,r,n){return 2===r?0===t?0:C(e,t,3):A(e,t,r,n)}function D(e,t,r,n){return 3===r?0===t?0:C(e,t,3):w(e,t,r,n)}function C(e,t,r){let{translate:n,scale:s}=e;return n[r]+t*s[r]}class v{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=F,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=(0,R.N)(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){const r=e.fields;(0,b.Lw)(r),r.push(t);const n=r.map((e=>e.name));this._attributesConstructor=function(){for(const e of n)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:n}=t,s=(0,O.Ch)(r.clone(),r,!1,!1,this._transform),i=(0,O.zv)(s,n,!1,!1);e.queryGeometryType=n,e.queryGeometry={...i}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const n=this._transform;switch(t=this._applyTransform(n,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const n=this._transform;return null!==this._mValueOffset&&0===e&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(n,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const n=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(t,r),s=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),s.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?D:t?w:r?P:A}}var q=r(77725);async function M(e,t,r){const n=(0,p.Dl)(e),s={...r},i=g.A.from(t),o=!i.quantizationParameters,{data:a}=await(0,m.IJ)(n,i,new v({sourceSpatialReference:i.sourceSpatialReference,applyTransform:o}),s);return a}let j=class extends s.A{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,u.An)(this.url)}async execute(e,t){const r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){const r=this._normalizeQuery(e),n=null!=e.outStatistics?.[0],s=(0,o.A)("featurelayer-pbf-statistics"),i=!n||s;let a;if(this.pbfSupported&&i)try{a=await M(this.url,r,t)}catch(u){if("query:parsing-pbf"!==u.name)throw u;this.pbfSupported=!1}return this.pbfSupported&&i||(a=await(0,S.e)(this.url,r,t)),this._normalizeFields(a.fields),a}async featureSetFromJSON(e,t,n){if(!this._queryIs3DObjectFormat(e)||null==this.infoFor3D||!t.features)return q.A.fromJSON(t);const{meshFeatureSetFromJSON:s}=await(0,a.qr)(r.e(156).then(r.bind(r,10156)),n);return s(e,this.infoFor3D,t)}executeForCount(e,t){return(0,y.I)(this.url,this._normalizeQuery(e),t)}executeForExtent(e,t){return async function(e,t,r){const n=(0,p.Dl)(e),s=await(0,m.Jf)(n,g.A.from(t),{...r}),i=s.data.extent;return!i||isNaN(i.xmin)||isNaN(i.ymin)||isNaN(i.xmax)||isNaN(i.ymax)?{count:s.data.count,extent:null}:{count:s.data.count,extent:_.A.fromJSON(i)}}(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return(0,x.V)(this.url,this._normalizeQuery(e),t)}async executeRelationshipQuery(e,t){const[{default:n},{executeRelationshipQuery:s}]=await(0,a.qr)(Promise.all([Promise.resolve().then(r.bind(r,58289)),r.e(9437).then(r.bind(r,69437))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,t)}async executeRelationshipQueryForCount(e,t){const[{default:n},{executeRelationshipQueryForCount:s}]=await(0,a.qr)(Promise.all([Promise.resolve().then(r.bind(r,58289)),r.e(9437).then(r.bind(r,69437))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,t)}async executeAttachmentQuery(e,t){const{executeAttachmentQuery:n,fetchAttachments:s,processAttachmentQueryResult:i}=await(0,a.qr)(r.e(5297).then(r.bind(r,55297)),t),o=(0,p.Dl)(this.url);return i(o,await(this.queryAttachmentsSupported?n(o,e,t):s(o,e,t)))}async executeBinsQuery(e,t){const{executeBinsQuery:n}=await(0,a.qr)(Promise.all([r.e(3282),r.e(4530)]).then(r.bind(r,84530)),t);return n(this.parsedUrl,e,t)}async executeTopFeaturesQuery(e,t){const{executeTopFeaturesQuery:n}=await(0,a.qr)(r.e(3863).then(r.bind(r,63863)),t);return n(this.parsedUrl,e,this.sourceSpatialReference,t)}async executeForTopIds(e,t){const{executeForTopIds:n}=await(0,a.qr)(r.e(9119).then(r.bind(r,69119)),t);return n(this.parsedUrl,e,t)}async executeForTopExtents(e,t){const{executeForTopExtents:n}=await(0,a.qr)(r.e(2520).then(r.bind(r,12520)),t);return n(this.parsedUrl,e,t)}async executeForTopCount(e,t){const{executeForTopCount:n}=await(0,a.qr)(r.e(6406).then(r.bind(r,36406)),t);return n(this.parsedUrl,e,t)}_normalizeQuery(e){let t=g.A.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?d.L.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(null!=r&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;const n=(0,h.U9)(r),s=(0,h.CW)(r);for(const e of r.queryFormats){if(e===n){t.formatOf3DObjects=e;break}e!==s||t.formatOf3DObjects||(t.formatOf3DObjects=e)}if(!t.formatOf3DObjects)throw new i.A("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(t.outSpatialReference&&!(0,f.aI)(t.outSpatialReference,this.sourceSpatialReference))throw new i.A("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==t.outFields||!t.outFields.includes("*")){t=t===e?t.clone():t,null==t.outFields&&(t.outFields=[]);const{originX:n,originY:s,originZ:i,translationX:o,translationY:a,translationZ:u,scaleX:l,scaleY:c,scaleZ:f,rotationX:h,rotationY:d,rotationZ:p,rotationDeg:y}=r.transformFieldRoles;t.outFields.push(n,s,i,o,a,u,l,c,f,h,d,p,y)}}return t}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};(0,n._)([(0,l.MZ)({type:d.L})],j.prototype,"dynamicDataSource",void 0),(0,n._)([(0,l.MZ)()],j.prototype,"fieldsIndex",void 0),(0,n._)([(0,l.MZ)()],j.prototype,"gdbVersion",void 0),(0,n._)([(0,l.MZ)()],j.prototype,"infoFor3D",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],j.prototype,"parsedUrl",null),(0,n._)([(0,l.MZ)()],j.prototype,"pbfSupported",void 0),(0,n._)([(0,l.MZ)()],j.prototype,"queryAttachmentsSupported",void 0),(0,n._)([(0,l.MZ)()],j.prototype,"sourceSpatialReference",void 0),(0,n._)([(0,l.MZ)({type:String})],j.prototype,"url",void 0),j=(0,n._)([(0,c.$)("esri.layers.graphics.sources.support.QueryTask")],j);const G=j},78238:(e,t,r)=>{function n(e){const t={};for(const r in e){if("declaredClass"===r)continue;const s=e[r];if(null!=s&&"function"!=typeof s)if(Array.isArray(s)){t[r]=[];for(let e=0;e<s.length;e++)t[r][e]=n(s[e])}else"object"==typeof s?s.toJSON&&(t[r]=JSON.stringify(s)):t[r]=s}return t}r.d(t,{z:()=>n})},37713:(e,t,r)=>{r.d(t,{I:()=>o});var n=r(54994),s=r(36643),i=r(68295);async function o(e,t,r){const o=(0,n.Dl)(e),{data:a}=await(0,s.gW)(o,i.A.from(t),r);return a.count}},53104:(e,t,r)=>{r.d(t,{V:()=>o});var n=r(54994),s=r(36643),i=r(68295);async function o(e,t,r){const o=(0,n.Dl)(e),{data:a}=await(0,s.Pk)(o,i.A.from(t),r);return a.objectIds}},14009:(e,t,r)=>{r.d(t,{e:()=>u,s:()=>a});var n=r(54994),s=r(36643),i=r(77725),o=r(68295);async function a(e,t,r){const n=await u(e,t,r);return i.A.fromJSON(n)}async function u(e,t,r){const i=(0,n.Dl)(e),a={...r},u=o.A.from(t),{data:l}=await(0,s.eW)(i,u,u.sourceSpatialReference,a);return l}},36643:(e,t,r)=>{r.d(t,{GB:()=>x,IJ:()=>p,Jf:()=>_,Pk:()=>m,eW:()=>d,gW:()=>g,kS:()=>y});var n=r(3825),s=r(90534),i=r(19902),o=r(1438),a=r(80963),u=r(78238),l=r(89122),c=r(57831);const f="Layer does not support extent calculation.";function h(e,t){const r=e.geometry,n=e.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const s=n;let o,u,l;if(null!=r&&(u=r.spatialReference,l=(0,a.YX)(u),s.geometryType=(0,i.$B)(r),s.geometry=function(e,t){if(t&&"extent"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&"point"===e.type)return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}(r,e.compactGeometryEnabled),s.inSR=l),n.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(s.objectIds=n.objectIds.join(",")),n.orderByFields&&(s.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete s.outFields:n.outFields.includes("*")?s.outFields="*":s.outFields=n.outFields.join(","),n.outSR?(s.outSR=(0,a.YX)(n.outSR),o=e.outSpatialReference):r&&(n.returnGeometry||n.returnCentroid)&&(s.outSR=s.inSR,o=u),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(s.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(s.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(s.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=u&&null!=e.quantizationParameters?.extent&&u.equals(e.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(s.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(s.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(s.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const e=n.timeExtent,{start:t,end:r}=e;null==t&&null==r||(s.time=t===r?t:`${t??"null"},${r??"null"}`),delete n.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=u&&null!=o&&u.equals(o)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function d(e,t,r,n){const s=null!=t.timeExtent&&t.timeExtent.isEmpty?{data:{features:[]}}:await x(e,t,"json",n);return(0,c.q)(t,r,s.data),s}async function p(e,t,r,n){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const s=await y(e,t,n),i=s;return i.data=(0,l.m)(s.data,r),i}function y(e,t,r){return x(e,t,"pbf",r)}function m(e,t,r){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):x(e,t,"json",r,{returnIdsOnly:!0})}function g(e,t,r){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):x(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}async function _(e,t,r){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const n=await x(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),s=n.data;if(s.hasOwnProperty("extent"))return n;if(s.features)throw new Error(f);if(s.hasOwnProperty("count"))throw new Error(f);return n}async function x(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const l="string"==typeof e?(0,s.An)(e):e,c=t.geometry?[t.geometry]:[],f=await(0,o.el)(c,null,{signal:i.signal}),d=f?.[0];null!=d&&((t=t.clone()).geometry=d);const p=(0,u.z)({...l.query,f:r,...a,...h(t,a)});return(0,n.A)((0,s.fj)(l.path,(y=a,null==t.formatOf3DObjects||y.returnCountOnly||y.returnExtentOnly||y.returnIdsOnly?"query":"query3d")),{...i,responseType:"pbf"===r?"array-buffer":"json",query:{...p,...i.query}});var y}}}]);
//# sourceMappingURL=5227.9642762d.chunk.js.map