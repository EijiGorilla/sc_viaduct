{"version":3,"file":"static/js/2745.0b117585.chunk.js","mappings":"oSAIukB,IAAIA,EAAE,cAAcC,EAAAA,EAAEC,WAAAA,CAAYC,GAAGC,MAAMD,GAAGE,KAAKC,SAAS,KAAKD,KAAKE,iBAAgB,CAAE,CAAC,YAAIC,GAAW,OAAOH,KAAKE,eAAe,CAACE,UAAAA,GAAaJ,KAAKK,cAAc,IAAIC,EAAEN,KAAKC,SAASD,MAAM,MAAMO,MAAMT,EAAEU,qBAAqBZ,EAAEa,uBAAuBC,GAAGV,KAAKA,KAAKW,oBAAoB,gBAAgBX,KAAKK,cAAcO,aAAa,QAAQ,CAACC,IAAIf,EAAEgB,WAAWC,MAAM,GAAGC,UAAUlB,EAAEmB,cAAcC,SAASV,qBAAqBZ,EAAEsB,SAAST,uBAAuBC,EAAEQ,SAASC,YAAYnB,KAAKmB,YAAYC,cAActB,EAAEsB,cAAcC,aAAavB,EAAEuB,aAAaC,SAASxB,EAAEwB,UAAUJ,SAASK,YAAYzB,EAAEyB,YAAYL,WAAvU,IAAsVlB,KAAKwB,WAAWxB,KAAKK,cAAcoB,GAAG,mBAAmBC,IAAgB,IAAdvB,SAASL,GAAE4B,EAAI1B,KAAKE,gBAAgBJ,CAAC,IAAI,CAAC,sBAAM6B,CAAgBC,GAAqB,IAAnBC,MAAM/B,EAAEgC,QAAQlC,GAAEgC,EAAE,GAAG,IAAI9B,EAAEiC,QAAQ,IAAInC,EAAEmC,OAAO,OAAO,MAAMrB,EAAEZ,EAAEkC,IAAIC,GAAGC,EAAEtC,EAAEoC,IAAIG,SAASnC,KAAKK,cAAcO,aAAa,mBAAmB,CAACiB,MAAMnB,EAAEoB,QAAQI,GAAG,CAAC,kBAAME,CAAatC,EAAEF,GAAG,MAAMc,QAAQV,KAAKK,cAAcO,aAAa,eAAed,GAAGoB,SAAStB,GAAGsC,EAAEG,EAAAA,EAAEC,SAAS5B,GAAG,OAAOV,KAAKuC,uBAAuBL,GAAGA,CAAC,CAAC,wBAAMM,CAAmB1C,EAAEF,GAAG,aAAaI,KAAKK,cAAcO,aAAa,qBAAqBd,GAAGoB,SAAStB,EAAE,CAAC,0BAAM6C,CAAqB3C,EAAEF,GAAG,aAAaI,KAAKK,cAAcO,aAAa,uBAAuBd,GAAGoB,SAAStB,EAAE,CAAC,2BAAM8C,CAAsB5C,EAAEF,GAAG,MAAM+C,MAAMjC,EAAEkC,OAAOV,SAASlC,KAAKK,cAAcO,aAAa,wBAAwBd,GAAGoB,SAAStB,GAAG,MAAM,CAAC+C,MAAMjC,EAAEkC,OAAOC,EAAAA,EAAEP,SAASJ,GAAG,CAAC,uCAAMY,CAAkChD,EAAEF,GAAG,MAAMc,QAAQV,KAAKK,cAAcO,aAAa,oCAAoCd,GAAGoB,SAAStB,GAAGsC,EAAEG,EAAAA,EAAEC,SAAS5B,GAAG,OAAOV,KAAKuC,uBAAuBL,GAAGA,CAAC,CAACK,sBAAAA,CAAuBzC,GAAG,MAAMS,MAAMX,GAAGI,KAAK,IAAI,MAAMU,KAAKZ,EAAEiD,SAASrC,EAAEH,MAAMX,EAAEc,EAAEsC,YAAYpD,CAAC,IAAGE,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAKf,EAAEsD,UAAU,WAAW,OAAMnD,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,IAAE,CAACwC,eAAc,KAAMvD,EAAEsD,UAAU,gBAAW,IAAQnD,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,IAAE,CAACwC,eAAc,KAAMvD,EAAEsD,UAAU,aAAQ,IAAQnD,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,IAAE,CAACwC,eAAc,KAAMvD,EAAEsD,UAAU,4BAAuB,IAAQnD,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,IAAE,CAACwC,eAAc,KAAMvD,EAAEsD,UAAU,8BAAyB,IAAQnD,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,IAAE,CAACwC,eAAc,KAAMvD,EAAEsD,UAAU,mBAAc,IAAQnD,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,IAAE,CAACwC,eAAc,KAAMvD,EAAEsD,UAAU,8BAAyB,IAAQnD,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAKf,EAAEsD,UAAU,uBAAkB,GAAQtD,GAAEG,EAAAA,EAAAA,GAAE,EAACoC,EAAAA,EAAAA,GAAE,yEAAyEvC,GAAG,MAAMW,UAAU6C,EAAAA,EAAEtD,WAAAA,CAAYC,EAAEF,GAAGG,MAAM,0BAA0B,QAAQ,CAAC,EAAED,EAAE,CAACsD,SAAS,YAAYC,OAAOzD,GAAG,EAAE,SAASqC,EAACqB,GAAuB,IAArBC,GAAGzD,EAAE0D,IAAI5D,EAAEgD,OAAOlC,GAAE4C,EAAE,MAAM,CAACC,GAAGzD,EAAE0D,IAAI5D,EAAEgD,OAAOlC,EAAE,CAAC,SAASyB,EAACsB,GAAQ,IAANF,GAAGzD,GAAE2D,EAAE,OAAO3D,CAAC,C,gDCAp/D,IAAImC,EAAE,cAAckB,EAAAA,EAAEtD,WAAAA,CAAYC,GAAGC,MAAMD,GAAGE,KAAK0D,UAAU,KAAK1D,KAAK2D,cAAc,CAACC,0BAA0BA,CAAC9D,EAAEF,KAAK,MAAM,IAAIc,EAAAA,EAAE,iCAAiC,EAAE0B,aAAayB,MAAM/D,EAAEY,UAAUV,KAAKK,cAAc+B,aAAatC,EAAEY,GAAG8B,mBAAmBqB,MAAM/D,EAAEY,UAAUV,KAAKK,cAAcmC,mBAAmB1C,EAAEY,GAAG+B,qBAAqBoB,MAAM/D,EAAEY,UAAUV,KAAKK,cAAcoC,qBAAqB3C,EAAEY,GAAGgC,sBAAsBmB,MAAM/D,EAAEY,UAAUV,KAAKK,cAAcqC,sBAAsB5C,EAAEY,GAAGoC,kCAAkCe,MAAM/D,EAAEY,UAAUV,KAAKK,cAAcyC,kCAAkChD,EAAEY,IAAIV,KAAK8D,wBAAwB,GAAG,CAAC1D,UAAAA,GAAa,GAAG,UAAUJ,KAAK+D,UAAUxD,MAAMyD,aAAa,MAAM,IAAItD,EAAAA,EAAE,4BAA6B,GAAEV,KAAK+D,UAAUxD,MAAMyD,iCAAiChE,KAAKW,oBAAoBX,KAAKiE,QAAQ,CAAC,WAAMA,GAAQ,MAAM1D,MAAMT,EAAEoE,KAAKxD,GAAGV,KAAK+D,WAAWI,iBAAiBvE,EAAEa,uBAAuB0C,EAAEiB,mBAAmBlC,GAAGxB,EAAE2B,EAAE3B,EAAE2D,MAAMlD,YAAY,GAAGnB,KAAK0D,UAAU,IAAIY,EAAAA,GAAE,CAACJ,KAAKxD,EAAE6D,SAASzE,EAAE0E,MAAM,YAAY1E,EAAE2E,KAAK,MAAM,IAAIC,MAAM,kCAAkC,MAAM/E,EAAE,IAAIwC,EAAE,CAAClC,SAASH,GAAGoC,EAAEyC,UAAU1E,SAASH,GAAGS,MAAMT,EAAEU,qBAAqBZ,EAAEa,uBAAuB0C,EAAEhC,YAAYkB,EAAEuC,uBAAuB9E,GAAGE,KAAK0D,UAAUmB,sBAAsB/E,KAAKE,KAAKK,oBAAoBV,EAAEmF,OAAO9E,KAAKwB,WAAW,CAACxB,KAAK+D,UAAUG,KAAKa,aAAaC,aAAYnC,EAAAA,EAAAA,KAAG,IAAI7C,KAAK+D,UAAUG,KAAKa,aAAaE,OAAO,UAAUnF,IAAIE,KAAKK,cAAcsB,iBAAiB7B,EAAE,GAAG,CAACoF,cAAcpF,GAAGE,KAAKK,cAAcsB,iBAAiB,CAACE,MAAM/B,EAAEqF,UAAUrD,QAAQ,KAAKsD,iBAAiBtF,GAAGE,KAAKK,cAAcsB,iBAAiB,CAACE,MAAM,GAAGC,QAAQhC,EAAEqF,eAAe,CAAC,iBAAIE,GAAgB,OAAM,CAAE,CAAC,kBAAIC,GAAiB,OAAM,CAAE,CAAC,wBAAIC,GAAuB,OAAM,CAAE,CAAC,qBAAIC,GAAoB,OAAM,CAAE,CAAC,8BAAIC,GAA6B,OAAM,CAAE,CAAC,4BAAIC,GAA2B,OAAM,CAAE,CAAC,eAAIC,GAAc,MAAM,CAAC,CAAC,CAAC,YAAIxF,GAAW,OAAOH,KAAKK,cAAcF,QAAQ,CAAC,gBAAIyF,GAAe,OAAM,CAAE,CAAC,gBAAIC,GAAe,OAAOC,EAAAA,EAAEC,KAAK,CAAC,mCAAIC,GAAkC,OAAM,CAAE,CAAC,yBAAIC,GAAwB,OAAO,CAAC,CAAC,cAAIC,GAAa,OAAO,GAAG,CAAC,kBAAIC,GAAiB,OAAO,CAAC,CAAC,uBAAIC,GAAsB,OAAM,CAAE,CAAC,mBAAIC,GAAkB,OAAO,IAAI1G,EAAAA,EAAE,IAAI2G,EAAAA,EAAEtG,KAAKkG,WAAW,EAAE,EAAElG,KAAK8D,wBAAwB,EAAE,MAAM,EAAE,GAAE,EAAG,QAAQ,MAAM,CAAC,2BAAIyC,GAA0B,MAAM,UAAU,CAACC,cAAAA,CAAe1G,GAAG,CAAC2G,WAAAA,CAAY3G,GAAG,OAAO,IAAI,CAAC4G,SAAAA,CAAU5G,GAAG,OAAOQ,EAAAA,EAAC,CAACqG,YAAAA,CAAa7G,GAAG,OAAOF,EAAAA,EAAAA,KAAG,CAAC,uBAAMgH,CAAkB9G,EAAEY,GAAG,OAAO,IAAI,CAACmG,uBAAAA,CAAwB/G,EAAEY,GAAG,OAAO,IAAI,CAACoG,8BAAAA,CAA+BhH,EAAEF,GAAG,MAAM,IAAIc,EAAAA,EAAE,kCAAkC,CAAC,eAAMqG,CAAUjH,GAAG,CAACkH,aAAAA,CAAclH,EAAEY,GAAG,CAACuG,8BAAAA,CAA+BnH,GAAG,OAAO,IAAI,CAACoH,mBAAAA,CAAoBpH,GAAG,OAAO,IAAI,IAAGA,EAAAA,EAAAA,GAAE,EAACoC,EAAAA,EAAAA,OAAKD,EAAEgB,UAAU,iBAAY,IAAQnD,EAAAA,EAAAA,GAAE,EAACoC,EAAAA,EAAAA,OAAKD,EAAEgB,UAAU,WAAW,MAAMhB,GAAEnC,EAAAA,EAAAA,GAAE,EAACuC,EAAAA,EAAAA,GAAE,6DAA6DJ,E","sources":["../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/Feature3DPipelineWorkerHandle.js","../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/Feature3DPipeline.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{EsriPromise as t}from\"../../../../../core/Promise.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{WorkerHandle as n}from\"../../../../../core/workers/WorkerHandle.js\";import i from\"../../../../../geometry/Extent.js\";import s from\"../../../../../rest/support/FeatureSet.js\";let a=class extends t{constructor(e){super(e),this.schedule=null,this._workerUpdating=!0}get updating(){return this._workerUpdating}initialize(){this._workerHandle=new d(this.schedule,this);const{layer:e,viewSpatialReference:t,renderSpatialReference:r}=this;this.addResolvingPromise((async()=>await this._workerHandle.invokeMethod(\"setup\",{url:e.parsedUrl?.path??\"\",baseQuery:e.createQuery().toJSON(),viewSpatialReference:t.toJSON(),renderSpatialReference:r.toJSON(),viewingMode:this.viewingMode,objectIdField:e.objectIdField,capabilities:e.capabilities,timeInfo:e.timeInfo?.toJSON(),fieldsIndex:e.fieldsIndex.toJSON()}))()),this.addHandles(this._workerHandle.on(\"notify-updating\",(({updating:e})=>{this._workerUpdating=e})))}async onTileTreeChange({added:e,removed:t}){if(0===e.length&&0===t.length)return;const r=e.map(c),o=t.map(u);await this._workerHandle.invokeMethod(\"onTileTreeChange\",{added:r,removed:o})}async executeQuery(e,t){const r=await this._workerHandle.invokeMethod(\"executeQuery\",e?.toJSON(),t),o=s.fromJSON(r);return this._ensureLayerOnFeatures(o),o}async executeQueryForIds(e,t){return await this._workerHandle.invokeMethod(\"executeQueryForIds\",e?.toJSON(),t)}async executeQueryForCount(e,t){return await this._workerHandle.invokeMethod(\"executeQueryForCount\",e?.toJSON(),t)}async executeQueryForExtent(e,t){const{count:r,extent:o}=await this._workerHandle.invokeMethod(\"executeQueryForExtent\",e?.toJSON(),t);return{count:r,extent:i.fromJSON(o)}}async executeQueryForLatestObservations(e,t){const r=await this._workerHandle.invokeMethod(\"executeQueryForLatestObservations\",e?.toJSON(),t),o=s.fromJSON(r);return this._ensureLayerOnFeatures(o),o}_ensureLayerOnFeatures(e){const{layer:t}=this;for(const r of e.features)r.layer=t,r.sourceLayer=t}};e([r()],a.prototype,\"updating\",null),e([r({constructOnly:!0})],a.prototype,\"schedule\",void 0),e([r({constructOnly:!0})],a.prototype,\"layer\",void 0),e([r({constructOnly:!0})],a.prototype,\"viewSpatialReference\",void 0),e([r({constructOnly:!0})],a.prototype,\"renderSpatialReference\",void 0),e([r({constructOnly:!0})],a.prototype,\"viewingMode\",void 0),e([r({constructOnly:!0})],a.prototype,\"dispatchRenderCommands\",void 0),e([r()],a.prototype,\"_workerUpdating\",void 0),a=e([o(\"esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorkerHandle\")],a);class d extends n{constructor(e,t){super(\"Feature3DPipelineWorker\",\"setup\",{},e,{strategy:\"dedicated\",client:t})}}function c({id:e,lij:t,extent:r}){return{id:e,lij:t,extent:r}}function u({id:e}){return e}export{a as Feature3DPipelineWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import r from\"../../../../../core/Error.js\";import{makeHandle as t}from\"../../../../../core/handleUtils.js\";import{EsriPromise as n}from\"../../../../../core/Promise.js\";import{on as i}from\"../../../../../core/reactiveUtils.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{FeatureLayerViewPerformanceInfo as a}from\"../../FeatureLayerViewPerformanceInfo.js\";import{Feature3DPipelineWorkerHandle as u}from\"./Feature3DPipelineWorkerHandle.js\";import{FeaturePipelineRenderManager as l}from\"./rendering/FeaturePipelineRenderManager.js\";import{emptyHighlightHandle as d}from\"../../support/highlightUtils.js\";import{LayerViewPerformanceInfo as p}from\"../../support/LayerViewPerformanceInfo.js\";import{UpdatePolicy as m}from\"../../../webgl-engine/lib/UpdatePolicy.js\";let c=class extends n{constructor(e){super(e),this._renderer=null,this.graphicsQuery={queryForSymbologySnapping:(e,t)=>{throw new r(\"unsupported-symbology-snapping\")},executeQuery:async(e,r)=>await this._workerHandle.executeQuery(e,r),executeQueryForIds:async(e,r)=>await this._workerHandle.executeQueryForIds(e,r),executeQueryForCount:async(e,r)=>await this._workerHandle.executeQueryForCount(e,r),executeQueryForExtent:async(e,r)=>await this._workerHandle.executeQueryForExtent(e,r),executeQueryForLatestObservations:async(e,r)=>await this._workerHandle.executeQueryForLatestObservations(e,r)},this.maximumNumberOfFeatures=1e3}initialize(){if(\"point\"!==this.layerView.layer.geometryType)throw new r(\"unsupported-geometry-type\",`${this.layerView.layer.geometryType} is not supported`);this.addResolvingPromise(this.setup())}async setup(){const{layer:e,view:r}=this.layerView,{spatialReference:t,renderSpatialReference:n,resourceController:o}=r,s=r.state.viewingMode;if(this._renderer=new l({view:r,layerUid:e.uid}),\"feature\"!==e.type)throw new Error(\"Only FeatureLayer is supported\");const a=new u({schedule:e=>o.immediate.schedule(e),layer:e,viewSpatialReference:t,renderSpatialReference:n,viewingMode:s,dispatchRenderCommands:e=>this._renderer.executeRenderCommands(e)});this._workerHandle=await a.when(),this.addHandles([this.layerView.view.featureTiles.addClient(),i((()=>this.layerView.view.featureTiles.tiles),\"change\",(e=>{this._workerHandle.onTileTreeChange(e)}),{onListenerAdd:e=>this._workerHandle.onTileTreeChange({added:e.toArray(),removed:[]}),onListenerRemove:e=>this._workerHandle.onTileTreeChange({added:[],removed:e.toArray()})})])}get legendEnabled(){return!1}get hasAllFeatures(){return!1}get hasAllFeaturesInView(){return!1}get hasFullGeometries(){return!1}get symbologySnappingSupported(){return!1}get scaleVisibilitySuspended(){return!1}get suspendInfo(){return{}}get updating(){return this._workerHandle.updating}get dataUpdating(){return!1}get updatePolicy(){return m.ASYNC}get maximumNumberOfFeaturesExceeded(){return!1}get updatingProgressValue(){return 1}get usedMemory(){return 100}get unloadedMemory(){return 0}get ignoresMemoryFactor(){return!0}get performanceInfo(){return new a(new p(this.usedMemory,0,0,this.maximumNumberOfFeatures,0,null),0,0,!0,\"tiles\",\"n/a\")}get suspendResumeExtentMode(){return\"computed\"}forEachGraphic(e){}findGraphic(e){return null}highlight(e){return d}maskOccludee(e){return t()}async whenGraphicBounds(e,r){return null}computeAttachmentOrigin(e,r){return null}elevationAlignPointsInFeatures(e,t){throw new r(\"unsupported-elevation-alignment\")}async doRefresh(e){}setVisibility(e,r){}getMissingAttributesForFeature(e){return null}getHydratedGeometry(e){return null}};e([o()],c.prototype,\"layerView\",void 0),e([o()],c.prototype,\"updating\",null),c=e([s(\"esri.views.3d.layers.graphics.pipeline.Feature3DPipeline\")],c);export{c as Feature3DPipeline};\n"],"names":["a","t","constructor","e","super","this","schedule","_workerUpdating","updating","initialize","_workerHandle","d","layer","viewSpatialReference","renderSpatialReference","r","addResolvingPromise","invokeMethod","url","parsedUrl","path","baseQuery","createQuery","toJSON","viewingMode","objectIdField","capabilities","timeInfo","fieldsIndex","addHandles","on","_ref","onTileTreeChange","_ref2","added","removed","length","map","c","o","u","executeQuery","s","fromJSON","_ensureLayerOnFeatures","executeQueryForIds","executeQueryForCount","executeQueryForExtent","count","extent","i","executeQueryForLatestObservations","features","sourceLayer","prototype","constructOnly","n","strategy","client","_ref3","id","lij","_ref4","_renderer","graphicsQuery","queryForSymbologySnapping","async","maximumNumberOfFeatures","layerView","geometryType","setup","view","spatialReference","resourceController","state","l","layerUid","uid","type","Error","immediate","dispatchRenderCommands","executeRenderCommands","when","featureTiles","addClient","tiles","onListenerAdd","toArray","onListenerRemove","legendEnabled","hasAllFeatures","hasAllFeaturesInView","hasFullGeometries","symbologySnappingSupported","scaleVisibilitySuspended","suspendInfo","dataUpdating","updatePolicy","m","ASYNC","maximumNumberOfFeaturesExceeded","updatingProgressValue","usedMemory","unloadedMemory","ignoresMemoryFactor","performanceInfo","p","suspendResumeExtentMode","forEachGraphic","findGraphic","highlight","maskOccludee","whenGraphicBounds","computeAttachmentOrigin","elevationAlignPointsInFeatures","doRefresh","setVisibility","getMissingAttributesForFeature","getHydratedGeometry"],"sourceRoot":""}