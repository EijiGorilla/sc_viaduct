"use strict";(self.webpackChunksc_viaduct=self.webpackChunksc_viaduct||[]).push([[8156],{98156:(t,e,n)=>{n.d(e,{getTimeSliderSettingsFromWebDocument:()=>d,YU:()=>T,h3:()=>p});var i=n(18690),l=(n(63241),n(53084)),r=(n(76460),n(18288)),s=n(59187),u=n(2515),a=n(72027);function o(t){return void 0!==t.timeInfo}async function m(t,e){return t.widgets?.timeSlider?.fullTimeExtent??async function(t,e){if(0===t.length)return s.A.allTime;await Promise.all(t.map((t=>t.load({signal:e}))));const n=t.filter(o),l=t.filter((t=>!o(t)&&null!=t.visibilityTimeExtent));if(0===n.length&&0===l.length)return s.A.allTime;const r=[],u=[];for(const i of n)"feature"!==i?.type&&"map-image"!==i?.type||!i.timeInfo?.hasLiveData?u.push(i):r.push(i);const a=t=>null==t||t.isAllTime,m=[...u.map((t=>{const e=t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:n}=t;return e?.intersection(n)??n})),...l.map((t=>t.visibilityTimeExtent))];if(m.some(a))return s.A.allTime;const c=r.map((async t=>{const n=(await t.fetchRecomputedExtents({signal:e}))?.timeExtent??t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:i}=t;return n?.intersection(i)??i})),f=(await Promise.allSettled(c)).map((t=>"fulfilled"===t.status?t.value:null));if(f.some(a))return s.A.allTime;const d=[...f,...m].filter(i.Ru);return 0===d.length?s.A.allTime:d.reduce(((t,e)=>t.union(e)))}(t.allLayers,e)}function c(t){const{numStops:e,stopInterval:n,stops:i}=t;return i?{dates:(0,l.o8)(i)}:n?{interval:n.clone()}:{count:e??5}}function f(t,e){const n=t.currentTimeExtent;if(!n)return null;const{start:i,end:l}=n,r=i??l??null;switch(e){case"time-window":return new s.A({start:i,end:l});case"cumulative-from-start":return new s.A({start:null,end:r});case"cumulative-from-end":return new s.A({start:r,end:null});case"instant":return new s.A({start:r,end:r})}}async function d(t,e){if(!(0,u.r)(t)&&!function(t){return null!=t&&"object"==typeof t&&a.X in t}(t))return null;await t.load({signal:e});const n=t?.widgets?.timeSlider;if(!n)return null;const i=await m(t,e),l=n.loop,r=function(t){const e=t.numThumbs??2,n=t.currentTimeExtent;if(n){const{start:t,end:i}=n;return null!=t&&null!=i&&t.getTime()===i.getTime()?"instant":2===e?"time-window":null==t||0===t.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===e?"time-window":"cumulative-from-start"}(n);return{fullTimeExtent:i,loop:l,mode:r,playRate:n.stopDelay??2e3,stops:c(n),timeExtent:f(n,r)}}function p(t){if(!t)return t;const{start:e,end:n}=t;return new s.A({start:null!=e?(0,r.S1)(e,-e.getTimezoneOffset(),"minutes"):e,end:null!=n?(0,r.S1)(n,-n.getTimezoneOffset(),"minutes"):n})}function T(t){if(!t)return t;const{start:e,end:n}=t;return new s.A({start:null!=e?(0,r.S1)(e,e.getTimezoneOffset(),"minutes"):e,end:null!=n?(0,r.S1)(n,n.getTimezoneOffset(),"minutes"):n})}},2515:(t,e,n)=>{n.d(e,{r:()=>r});var i=n(19898);class l extends i.R{constructor(t,e){super(t,e,"webmap")}}function r(t){return null!=t&&"object"==typeof t&&"declaredClass"in t&&"esri.WebMap"===t.declaredClass}new l(2,32)}}]);
//# sourceMappingURL=8156.bee9a32c.chunk.js.map